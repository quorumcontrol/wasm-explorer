{"version":3,"sources":["../../tupelo-wasm-sdk/lib/community/index.js","../../tupelo-wasm-sdk/lib/community/wrappedbitswap.js","theme.tsx","nodedisplay.tsx","explorer.tsx","wallet/minttokendialog.tsx","wallet/tokendisplay.tsx","wallet/establishtokendialog.tsx","wallet/wallet.tsx","layout.tsx","App.tsx","serviceWorker.ts","index.tsx","../../tupelo-wasm-sdk/lib/tupelo.js","../../tupelo-wasm-sdk/lib/index.js","../../tupelo-wasm-sdk/lib/node.js","../../tupelo-wasm-sdk/lib/chaintree/dag/dag.js","../../tupelo-wasm-sdk/lib/community/default.js","../../tupelo-wasm-sdk/lib/community/community.js","../../tupelo-wasm-sdk/lib/community/wrappedblockservice.js","../../tupelo-wasm-sdk/lib/notarygroup.js","../../tupelo-wasm-sdk/lib/repo.js","community.ts","wallet/login.tsx","wallet/sendtokendialog.tsx","wallet/receivetokendialog.tsx","../../tupelo-wasm-sdk/lib/js/go/index.js","../../tupelo-wasm-sdk/lib/js/go sync","../../tupelo-wasm-sdk/lib/js/p2p/index.js","state.ts","../../tupelo-wasm-sdk/lib/js/p2p/discovery.js","../../tupelo-wasm-sdk/lib/crypto.js","../../tupelo-wasm-sdk/lib/chaintree/index.js","../../tupelo-wasm-sdk/lib/chaintree/chaintree.js"],"names":["__export","m","p","exports","hasOwnProperty","Object","defineProperty","value","default_1","defaultNotaryGroup","_classCallCheck","_createClass","__importDefault","this","mod","__esModule","util_1","log","default","WrappedBitswap","bitswap","key","cid","promisify","get","bind","block","resolve","reject","Promise","res","rej","put","toString","err","_","Error","start","stop","peerID","wantlistForPeer","ledgerForPeer","cids","getMany","blocks","putMany","getWantlist","peers","stat","theme","createMuiTheme","palette","primary","main","secondary","error","red","A400","background","useStyles","makeStyles","preFormatted","whiteSpace","NodeRow","display","label","path","did","classes","constructor","name","href","concat","join","className","JSON","stringify","TableRow","TableCell","NodeExplorer","decodedCbor","Table","TableHead","TableBody","keys","map","k","i","explorerRoute","route","req","a","params","fetchTree","fetchTreeResult","console","split","undefined","tree","resolveResult","view","pathDisplay","padding","spacing","found","getCommunity","community","getTip","tip","ChainTree","store","blockservice","PathRenderer","val","slice","Explorer","result","Typography","variant","MintTokenDialog","open","onClose","tokenName","useState","amount","setAmount","loading","setLoading","handleSubmit","playTransactions","mintTokenTransaction","_onClose","Dialog","aria-labelledby","DialogTitle","id","DialogContent","DialogContentText","TextField","autoFocus","margin","type","fullWidth","onChange","evt","parseInt","target","CircularProgress","DialogActions","Button","onClick","color","tokenPath","balance","setBalance","max","setMax","loaded","setLoaded","mintDialogOpen","setMintDialogOpen","sendDialogOpen","setSendDialogOpen","loadInfo","tokenInfoPath","tokenInfoResp","monetaryPolicy","useEffect","TokenList","tokens","setTokens","loadTokens","tokenResp","EstablishTokenDialog","setTokenName","maxAmount","setMaxAmount","establishTokenTransaction","walletRoute","mount","userTreeObj","globalStorageStarted","userTree","redirect","WalletPage","dialogOpen","setDialogOpen","receiveDialogOpen","setReceiveDialogOpen","setDid","handleClose","then","Grid","container","item","subDirectory","window","location","pathname","Go","wasmPath","root","title","breakpoints","up","grow","flexGrow","search","marginLeft","searchIcon","routes","loginRoute","NavBar","setSearch","navigation","useNavigation","Community","AppBar","position","Toolbar","noWrap","onSubmit","preventDefault","navigate","InputProps","startAdornment","InputAdornment","Layout","useGlobalState","Container","maxWidth","context","history","createHashHistory","direction","justify","alignItems","xs","Paper","render","renderNotFound","fallback","App","ThemeProvider","CssBaseline","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","_regeneratorRuntime","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","e","rejected","done","apply","TupeloWasm","Tupelo","cids_1","go","transactions_pb_1","signatures_pb_1","UnderlyingWasm","_populated","phrase","salt","bytes","pubKey","opts","publicKey","_tupelowasm","mark","_callee","wrap","_context","prev","abrupt","run","populate","generateKey","_callee2","tw","_context2","sent","passPhraseKey","_callee3","_context3","keyFromPrivateBytes","_callee4","_context4","ecdsaPubkeyToDid","_callee5","_context5","ecdsaPubkeyToAddress","_callee6","_context6","getCurrentState","_callee7","stateBits","_context7","CurrentState","deserializeBinary","t0","newEmptyTree","_callee8","_context8","tokenPayloadForTransaction","_callee9","respBits","_context9","blockService","sendId","jsSendTxSig","signature","serializeBinary","TokenPayload","publisher","notaryGroup","transactions","_callee10","transBits","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","t","serialized","privateKey","resp","currState","sig","_context10","Array","Symbol","iterator","return","finish","Uint8Array","length","getSignature","Buffer","from","getNewTip_asU8","libp2p","p2p","createNode","CreateNode","config","peerDiscovery","bootstrap","list","bootstrapAddresses","Ipld","Dag","dagStore","resolveAt","str_path","resolved","lastVal","last","message","startsWith","remainderPath","_this","_defaultCommunity","community_1","notarygroup_1","repo_1","node_1","MemoryDatastore","tomlToNotaryGroup","_getDefault","repo","node","c","_this2","init","getBootstrapAddressesList","on","once","_possibleConstructorReturn","_getPrototypeOf","_inherits","events_1","wrappedblockservice_1","tupelo_1","debugLog","IpfsBitswap","IpfsBlockService","_events_1$default","group","call","_started","WrappedBlockService","setExchange","_startPromiseResolve","_startPromiseReject","_startPromise","nextUpdate","state","tx","sendTokenPayload","getSendTokenPayload","getType","Transaction","Type","SENDTOKEN","getName","getId","pubsub","_rej","isStarted","subscribeToTips","emit","_this3","subscribe","msg","data","getDefault","delete","unsetExchange","hasExchange","config_pb_1","toml_1","hexToBuffer","hex","substr","tomlString","obj","ng","NotaryGroup","setId","setBootstrapAddressesList","signers","s","publicKeySet","PublicKeySet","setVerKey","verKeyHex","setDestKey","destKeyHex","setSignersList","configToNotaryGroup","toCamel","o","newO","origKey","newKey","prototype","charAt","toLowerCase","parse","IpfsRepo","Repo","close","datastore","_query","query","namespace","publicUserKey","userName","EcdsaKey","RootLoginPage","username","UsernameUnavailable","UsernameAvailable","password","setPassword","badPassword","setBadPassword","secureKey","secureAddr","resolveResp","includes","dispatch","userKey","registerUser","insecureKey","secureKeyAddress","setOwnershipTransaction","setDataTransaction","setUsername","uuidv4","require","SendTokenDialog","destination","setDestination","code","setCode","uuid","sendTokenAndGetPayload","sendTokenTransaction","payload","ReceiveTokenDialog","tokenPayload","receiveTokenTransactionFromPayload","_asyncToGenerator","_slicedToArray","global","self","encoder","decoder","isNodeJS","process","indexOf","fs","nodeCrypto","crypto","getRandomValues","b","randomFillSync","performance","now","_process$hrtime","hrtime","_process$hrtime2","util","TextEncoder","TextDecoder","outputBuf","constants","O_WRONLY","O_RDWR","O_CREAT","O_TRUNC","O_APPEND","O_EXCL","writeSync","fd","buf","nl","decode","lastIndexOf","write","offset","callback","flags","mode","read","buffer","fsync","_class","argv","env","exit","warn","_exitPromise","_resolveExitPromise","_pendingEvent","_scheduledTimeouts","Map","_nextCallbackTimeoutID","mem","DataView","_inst","setInt64","addr","v","setUint32","Math","floor","getInt64","getUint32","getInt32","loadValue","f","getFloat64","isNaN","_values","storeValue","setFloat64","ref","_refs","push","set","typeFlag","loadSlice","array","len","loadSliceOfValues","loadString","saddr","timeOrigin","Date","importObject","sp","exited","n","msec","getTime","setInt32","setTimeout","_resume","clearTimeout","Reflect","getsp","args","setUint8","construct","str","encode","String","_run","instance","strPtr","argc","argvPtrs","NaN","ptr","forEach","arg","sort","_x","arguments","resume","event","readFileSync","__dirname","readyPromise","readyResolver","runner","_run2","wasmResp","wasm","assign","TMPDIR","tmpdir","WebAssembly","instantiate","instantiateStreaming","fetch","arrayBuffer","_ready","_x2","reqs","populateLibrary","module","webpackEmptyContext","_assertThisInitialized","WS","Multiplex","SECIO","Bootstrap","KadDHT","mergeOptions","PeerInfo","PeerId","RoutingDiscovery","TupeloP2P","_libp2p","_options","routingDiscoverer","defaults","switch","blacklistTTL","blackListAttempts","maxParallelDials","maxColdCalls","dialTimeout","modules","transport","streamMuxer","connEncryption","stub","dht","autoDial","enabled","kBucketSize","randomWalk","EXPERIMENTAL","_routingDiscoverer","_ref","options","generateKeyPair","_ref2","peerInfo","createFromPrivKey","multiaddrs","add","toB58String","_x3","initialState","createStore","action","mutated","reducer","sessionStorage","setItem","GlobalStateProvider","keyString","getItem","fromBytes","userTreeDid","setStoredState","EventEmitter","debug","CID","multihashing","nsToCid","_nsToCid","ns","hash","RoutingStub","_EventEmitter","parent","_EventEmitter2","_stub","_namespace","_interval","interval","_timer","nextTick","setInterval","_discoverContentPeers","_discoverContentPeers2","_this4","_nsCid","contentRouting","findProviders","providers","clearInterval","tag","publicKeyBits","privateKeyBits","generate","pair","_cids_1$default","version","codec","multihash","multibaseName","dag_1","dagCBOR","_dag_1$Dag","newOwnerKeys","SetOwnershipPayload","setAuthenticationList","setOwnershipPayload","txn","setType","SETOWNERSHIP","setSetOwnershipPayload","cborData","serialize","SetDataPayload","setPath","setValue","setDataPayloadMaker","SETDATA","setSetDataPayload","maximum","policy","TokenMonetaryPolicy","setMaximum","EstablishTokenPayload","setName","setMonetaryPolicy","establishTokenPayload","ESTABLISHTOKEN","setEstablishTokenPayload","MintTokenPayload","mintTokenPayload","MINTTOKEN","setMintTokenPayload","destinationChainId","SendTokenPayload","setSendTokenPayload","receiveTokenPayload","leaves","ReceiveTokenPayload","setSendTokenTransactionId","setTip","setSignature","setLeavesList","receiveTokenTransaction","RECEIVETOKEN","setReceiveTokenPayload","getLeavesList_asU8","getTransactionId"],"mappings":"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","file":"static/js/main.8a1512d3.chunk.js","sourcesContent":["\"use strict\";\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar default_1 = require(\"./default\");\n\nexports.defaultNotaryGroup = default_1.defaultNotaryGroup;\n\n__export(require(\"./community\"));\n\n__export(require(\"./wrappedbitswap\"));\n\n__export(require(\"./wrappedblockservice\"));","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = __importDefault(require(\"util\"));\n\nvar debug_1 = __importDefault(require(\"debug\"));\n\nvar log = debug_1.default(\"wrappedbitswap\");\n/**\n * A wrapper around an IPFS call-back-based bitswap that turns it into async/await compatible.\n * There is currently an open PR on the bitswap repo that will allow us to switch to the IPFS-maintained bitswap completely.\n * @public\n */\n\nvar WrappedBitswap =\n/*#__PURE__*/\nfunction () {\n  function WrappedBitswap(bitswap) {\n    _classCallCheck(this, WrappedBitswap);\n\n    this.bitswap = bitswap;\n  }\n\n  _createClass(WrappedBitswap, [{\n    key: \"get\",\n    value: function get(cid) {\n      return util_1.default.promisify(this.bitswap.get.bind(this.bitswap))(cid);\n    }\n  }, {\n    key: \"put\",\n    value: function put(block) {\n      var resolve, reject;\n      var p = new Promise(function (res, rej) {\n        resolve = res, reject = rej;\n      });\n      log(\"bitswap put: \", this.bitswap.put.toString());\n      this.bitswap.put(block, function (err) {\n        if (err) {\n          reject(err);\n        }\n\n        resolve();\n      });\n      return p; // return util.promisify(this.bitswap.put.bind(this.bitswap))(block) as Promise<any>\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(cid) {\n      return new Promise(function (_, reject) {\n        reject(new Error(\"can't delete from bitswap\"));\n      });\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      return util_1.default.promisify(this.bitswap.start.bind(this.bitswap));\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      return util_1.default.promisify(this.bitswap.stop.bind(this.bitswap));\n    }\n  }, {\n    key: \"wantlistForPeer\",\n    value: function wantlistForPeer(peerID) {\n      return this.bitswap.wantlistForPeer(peerID);\n    }\n  }, {\n    key: \"ledgerForPeer\",\n    value: function ledgerForPeer(peerID) {\n      return this.bitswap.ledgerForPeer(peerID);\n    }\n  }, {\n    key: \"getMany\",\n    value: function getMany(cids) {\n      return util_1.default.promisify(this.bitswap.getMany.bind(this.bitswap))(cids);\n    }\n  }, {\n    key: \"putMany\",\n    value: function putMany(blocks) {\n      return util_1.default.promisify(this.bitswap.putMany.bind(this.bitswap))(blocks);\n    }\n  }, {\n    key: \"getWantlist\",\n    value: function getWantlist() {\n      return this.bitswap.getWantlist();\n    }\n  }, {\n    key: \"peers\",\n    value: function peers() {\n      return this.bitswap.peers();\n    }\n  }, {\n    key: \"stat\",\n    value: function stat() {\n      return this.bitswap.stat();\n    }\n  }]);\n\n  return WrappedBitswap;\n}();\n\nexports.WrappedBitswap = WrappedBitswap;","import red from '@material-ui/core/colors/red';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n});\n\nexport default theme","import React from 'react';\nimport { Link } from 'react-navi'\nimport { Table, TableHead, TableBody, TableRow, TableCell, Theme } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    preFormatted: {\n        whiteSpace: \"pre\",\n    },\n}));\n\nconst NodeRow = ({ label, value, path, did }: { did: string, path: string[], label: string, value: any }) => {\n    const classes = useStyles()\n    let display\n    if (value && value.constructor && value.constructor.name === \"CID\") {\n        display = (\n            <Link\n                href={\"/chaintrees/\" + did + \"?path=\" + path.concat(label).join(\"/\")}\n            >\n                CID: {value.toString()}\n            </Link>\n        )\n    } else {\n        display = (\n            <code className={classes.preFormatted}>{JSON.stringify(value, null, 2)}</code>\n        )\n    }\n\n    return (\n        <TableRow>\n            <TableCell>{label}</TableCell>\n            <TableCell>{display}</TableCell>\n        </TableRow>\n    )\n}\n\nconst NodeExplorer = ({ decodedCbor, path, did }: { decodedCbor: any, path: string[], did: string }) => {\n    return (\n            <Table>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Key</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {Object.keys(decodedCbor).map((k: string, i: number) => {\n                        return (\n                            <NodeRow key={i} label={k} path={path} did={did} value={decodedCbor[k]} />\n                        )\n                    })}\n                </TableBody>\n            </Table>\n    )\n}\n\nexport default NodeExplorer\n","import React from 'react';\nimport { ChainTree} from 'tupelo-wasm-sdk';\nimport { Typography, makeStyles, Theme } from '@material-ui/core';\nimport {Link} from 'react-navi'\nimport NodeDisplay from './nodedisplay';\nimport { route } from 'navi'\nimport { getCommunity } from './community';\n\nexport const explorerRoute = route(async (req) => {\n    const did = req.params.did\n    let fetchTreeResult\n    try {\n        fetchTreeResult = await fetchTree(did)\n    } catch(e) {\n        console.error(\"error fetching tree: \", e)\n        throw e\n    }\n    let path = [\"\"]\n    let decodedCbor\n    if (req.params.path) {\n        path = req.params.path.split(\"/\")\n    }\n    if (fetchTreeResult.tree !== undefined) {\n        const resolveResult = await fetchTreeResult.tree.resolve(path)\n        if (resolveResult.value !== undefined) {\n            decodedCbor = resolveResult.value\n        }\n    }\n    return {\n        view: <Explorer did={did} path={path} fetchTreeResult={fetchTreeResult} decodedCbor={decodedCbor} />\n    }\n})\n\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    pathDisplay: {\n        padding: theme.spacing(0, 0.5),\n    },\n}));\n\ninterface IFetchTreeResult {\n    tree?:ChainTree\n    found:boolean\n    message?:string\n}\n\nexport const fetchTree = async (did: string):Promise<IFetchTreeResult> => {\n    if (did === \"\") {\n        return {\n            found: false,\n        }\n    }\n    const community = await getCommunity()\n\n    try {\n        const tip = await community.getTip(did)\n        const tree = new ChainTree({\n            store: community.blockservice,\n            tip: tip,\n        })\n        return {\n            tree: tree,\n            found: true,\n        }\n    } catch (e) {\n        if (e === \"not found\") {\n            return {\n                found: false,\n            }\n        }\n        console.error(\"error getting tip: \", e)\n        throw e\n    }\n}\n\n\nconst PathRenderer = ({ did, path }: { did:string, path: string[] }) => {\n    const classes = useStyles()\n\n    return (\n        <div>\n        Path: \n        {path.map((val: string, i: number) => {\n            return (\n                <Link\n                    key={i}\n                    className={classes.pathDisplay}\n                    href={\"/chaintrees/\" + did + \"?path=\" + path.slice(0,i+1).join(\"/\")}\n                >\n                    {val}/\n            </Link>)\n        })}</div>\n    )\n}\n\nconst Explorer = ({ did, fetchTreeResult, path, decodedCbor }: { did:string, fetchTreeResult: IFetchTreeResult, path:string[], decodedCbor:any }) => {\n\n    let result = fetchTreeResult\n\n    return (\n        <div>\n        {result && (result.found === undefined || !result.found) && (\n            <div>\n                <Typography variant=\"h6\">{did}</Typography>\n                {(did === \"\") ? \"Awaiting your DID\" : \"Not found\"}\n            </div>\n        )}\n        {(result && result.tree !== undefined) && (\n            <div>\n            <Typography variant=\"h6\">{did}</Typography>\n            <p>tip: {result.tree.tip.toString()}</p>\n            <PathRenderer did={did} path={path}/>\n            <NodeDisplay decodedCbor={decodedCbor} path={path} did={did}/>\n            </div>\n        )}\n        </div>\n    )\n}\n\nexport default Explorer","import React, { useState } from 'react'\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, TextField, CircularProgress, Button } from '@material-ui/core';\nimport { ChainTree, mintTokenTransaction } from 'tupelo-wasm-sdk'\nimport { getCommunity } from '../community';\n\n/**\n * Mint token is really simple, just take a tokenName and ammount and create it.\n * The token must be *established* (see {@link EstablishTokenDialog }) before you are allowed to mint.\n */\nexport const MintTokenDialog = ({ open, onClose, tree, tokenName }: { tokenName: string, open: boolean, onClose: () => void, tree: ChainTree }) => {\n    const [amount, setAmount] = useState(0)\n    const [loading, setLoading] = useState(false)\n\n\n    const handleSubmit = async () => {\n        if (tree === undefined) {\n            throw new Error(\"userTree is undefined\")\n        }\n        setLoading(true)\n        const community = await getCommunity()\n        await community.playTransactions(tree, [mintTokenTransaction(tokenName, amount)])\n        _onClose()\n    }\n\n    const _onClose = () => {\n        setAmount(0)\n        setLoading(false)\n        onClose()\n    }\n\n    return (\n        <Dialog open={open} onClose={onClose} aria-labelledby=\"form-dialog-title\">\n            <DialogTitle id=\"form-dialog-title\">Mint Tokens</DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    Mint tokens of type {tokenName}\n                </DialogContentText>\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    id=\"amount\"\n                    label=\"Amount\"\n                    type=\"number\"\n                    fullWidth\n                    onChange={(evt) => { setAmount(parseInt(evt.target.value, 10)) }}\n                    value={amount.toString()}\n                />\n\n            </DialogContent>\n            {loading ? <CircularProgress /> :\n                <DialogActions>\n                    <Button onClick={_onClose} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleSubmit} color=\"primary\">\n                        Mint\n                    </Button>\n                </DialogActions>\n            }\n        </Dialog>\n    )\n}\n\nexport default MintTokenDialog","import React, { useState, useEffect } from 'react'\nimport {  Table, TableHead, TableBody, TableRow, TableCell, CircularProgress, Button } from '@material-ui/core';\nimport { ChainTree } from 'tupelo-wasm-sdk'\nimport SendTokenDialog from './sendtokendialog'\nimport MintTokenDialog from './minttokendialog'\n\nconst tokenPath = [\"tree\", \"_tupelo\", \"tokens\"];\n\nexport const NodeRow = ({tree,tokenName}:{tree:ChainTree, tokenName:string})=> {\n    const [balance,setBalance] = useState(0)\n    const [max,setMax] = useState(null)\n    const [loading,setLoading] = useState(true)\n    const [loaded,setLoaded] = useState(false)\n    const [mintDialogOpen, setMintDialogOpen] = useState(false)\n    const [sendDialogOpen, setSendDialogOpen] = useState(false)\n\n    const loadInfo = async ()=> {\n        setLoaded(true)\n\n        const tokenInfoPath = tokenPath.concat(tokenName)\n        const tokenInfoResp = await tree.resolve(tokenInfoPath)\n        if (tokenInfoResp.value.monetaryPolicy) {\n            const monetaryPolicy = await tree.resolve(tokenInfoPath.concat(\"monetaryPolicy\"))\n            setMax(monetaryPolicy.value['maximum'])\n        }\n\n        setBalance(tokenInfoResp.value['balance'])\n        setLoading(false)\n    }\n\n    useEffect(()=> {\n        if (!loaded) {\n            loadInfo()\n        }\n    })\n\n    const handleMintClose = ()=> {\n        setMintDialogOpen(false)\n        setLoaded(false)\n    }\n\n    const handleSendClose = ()=> {\n        setSendDialogOpen(false)\n        setLoaded(false)\n    }\n\n    return (\n        <TableRow>\n            <TableCell>\n                {tokenName}\n            </TableCell>\n            <TableCell>\n                {loading ? <CircularProgress/> : balance}\n            </TableCell>\n            <TableCell>\n                {loading ? <CircularProgress/> : max}\n            </TableCell>\n            <TableCell>\n                <Button onClick={()=>{setMintDialogOpen(true)}}>\n                    Mint\n                </Button>\n                <Button onClick={()=>{setSendDialogOpen(true)}}>\n                    Send\n                </Button>\n                <MintTokenDialog open={mintDialogOpen} onClose={handleMintClose} tree={tree} tokenName={tokenName}/>\n                <SendTokenDialog open={sendDialogOpen} onClose={handleSendClose} tree={tree} tokenName={tokenName}/>\n            </TableCell>\n        </TableRow>\n    )\n}\n\nexport const TokenList = ({ tree }: { tree: ChainTree }) => {\n    const [tokens, setTokens] = useState({});\n    const [loaded, setLoaded] = useState(false);\n\n    const loadTokens = async () => {\n        let tokenResp = await tree.resolve(tokenPath)\n\n        if (tokenResp.value) {\n            console.log(\"tokens resp: \", tokenResp)\n            setLoaded(true)\n            setTokens(tokenResp.value)\n        }\n    }\n\n    useEffect(() => {\n        if (!loaded) {\n            loadTokens()\n        }\n    })\n\n    return (\n        <Table>\n            <TableHead>\n                <TableRow>\n                    <TableCell>Name</TableCell>\n                    <TableCell>Balance</TableCell>\n                    <TableCell>Max</TableCell>\n                    <TableCell>Actions</TableCell>\n                </TableRow>\n            </TableHead>\n            <TableBody>\n                {Object.keys(tokens).map((k: string, i: number) => {\n                    return (<NodeRow key={i} tree={tree} tokenName={k}/>)\n                })}\n            </TableBody>\n        </Table>\n    )\n}\n\nexport default TokenList","import React, {useState} from 'react'\nimport {  Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, TextField, CircularProgress, Button } from '@material-ui/core';\nimport { ChainTree, establishTokenTransaction } from 'tupelo-wasm-sdk'\nimport { getCommunity } from '../community';\n\n/**\n * Establishing a token allows you to mint them. It is done before a mint because it allows you to set a monetary\n * policy. As of this writing, only a maximum is supported in the monetary policy. A maximum of 0 means unlimited.\n * \n */\nexport const EstablishTokenDialog = ({open, onClose, tree}:{open:boolean, onClose:() => void, tree:ChainTree})=> {\n\n    const [tokenName, setTokenName] = useState(\"\")\n    const [maxAmount, setMaxAmount] = useState(0)\n    const [loading,setLoading] = useState(false)\n\n    const handleSubmit = async ()=> {\n        if (tree === undefined) {\n            throw new Error(\"userTree is undefined\")\n        }\n        setLoading(true)\n        const community = await getCommunity()\n        await community.playTransactions(tree, [establishTokenTransaction(tokenName, maxAmount)])\n        _onClose()\n    }\n\n    const _onClose = ()=> {\n        setTokenName(\"\")\n        setMaxAmount(0)\n        setLoading(false)\n        onClose()\n    }\n\n    return (\n        <Dialog open={open} onClose={onClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">Establish Token</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        Establish a token with a name and a monetary policy.\n                    </DialogContentText>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"name\"\n                        label=\"Token Name\"\n                        fullWidth\n                        onChange={(evt)=> {setTokenName(evt.target.value)}}\n                        value={tokenName}\n                    />\n                    <TextField\n                        margin=\"dense\"\n                        id=\"maximum\"\n                        label=\"Maximum Amount\"\n                        type=\"number\"\n                        fullWidth\n                        onChange={(evt)=> {setMaxAmount(parseInt(evt.target.value, 10))}}\n                        value={maxAmount}\n                    />\n                </DialogContent>\n                {loading ? <CircularProgress/> : \n                <DialogActions>\n                    <Button onClick={_onClose} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleSubmit} color=\"primary\">\n                        Establish\n                    </Button>\n                </DialogActions>\n                }\n            </Dialog>\n    )\n}\n\nexport default EstablishTokenDialog","import React, { useState, useEffect } from 'react'\nimport { mount, route, redirect, map } from 'navi'\nimport { globalStorageStarted } from '../state'\nimport { ChainTree } from 'tupelo-wasm-sdk'\nimport TokenDisplay from './tokendisplay'\nimport { Button, Grid } from '@material-ui/core';\nimport ReceiveTokenDialog from './receivetokendialog'\nimport EstablishTokenDialog from './establishtokendialog'\n/**\n * Define the navi routes \n */\nexport const walletRoute = mount({\n    \"/\": map(async (req, userTreeObj) => {\n        await globalStorageStarted\n        const userTree = userTreeObj as ChainTree\n        if (userTree.id === undefined) {\n            return redirect(\"/login\")\n        }\n        return route({\n            view: <WalletPage tree={userTree} />\n        })\n    }),\n});\n\n\n/**\n * Demos all the coin transactions:\n * EstablishToken,MintToken,SendToken,ReceiveToken\n * A full flow of creating and then sending a token is this:\n * \n * * Establish the token with a monetary policy\n * * Mint some tokens (less than the maximum defined in monetaryPolicy)\n * * Send token (that you have a balance of)\n * * copy the payload generated from sending the token and send (out-of-band) to receiver\n * \n * Then the receiver\n * * Receive token transaction using the sent payload\n * \n * Note the payload does not need to be kept secure, it is tied directly to the receiving chaintree.\n */\nconst WalletPage = ({ tree }: { tree: ChainTree }) => {\n    const [dialogOpen, setDialogOpen] = useState(false)\n    const [receiveDialogOpen,setReceiveDialogOpen] = useState(false)\n    const [did,setDid] = useState(\"\")\n\n    const handleClose = () => {\n        setDialogOpen(false)\n        setReceiveDialogOpen(false)\n    }\n\n    useEffect(()=> {\n        tree.id().then((id)=> {\n            if (id != null) {\n                setDid(id)\n            }\n        })\n    })\n\n    return (\n        <div>\n            <h1>Wallet</h1>\n            <p>{did}</p>\n            <Grid container spacing={2}>\n                <Grid item>\n                    <Button variant=\"outlined\" onClick={() => { setDialogOpen(true) }}>Establish Token</Button>\n                </Grid>\n                <Grid item>\n                    <Button variant=\"outlined\" onClick={()=>{setReceiveDialogOpen(true)}}>Receive Token</Button>\n                </Grid>\n            </Grid>\n            <TokenDisplay tree={tree}/>\n            <EstablishTokenDialog open={dialogOpen} onClose={handleClose} tree={tree}/>\n            <ReceiveTokenDialog open={receiveDialogOpen} onClose={handleClose} tree={tree}/>\n        </div>\n    )\n}\n","import React, { useState, Suspense } from 'react';\n\nimport { Paper, Container, Grid, Theme, AppBar, Toolbar, Typography, TextField, InputAdornment } from '@material-ui/core';\nimport { explorerRoute } from './explorer';\nimport { makeStyles } from '@material-ui/styles';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { mount, route } from 'navi'\nimport { Router, View, useNavigation, NotFoundBoundary } from 'react-navi'\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useGlobalState } from './state';\nimport { loginRoute } from './wallet/login';\nimport { walletRoute } from './wallet/wallet';\nimport { createHashHistory } from 'history';\nimport {Community} from 'tupelo-wasm-sdk';\n\nimport 'tupelo-wasm-sdk' // in order to bring in the Go global\ndeclare const Go: any;\n\nconst subDirectory = window.location.pathname\nconsole.log(\"subDirectory \", subDirectory)\n\nif (subDirectory !== '/') {\n    console.log(\"setting wasmpath to: \",  subDirectory + \"/tupelo.wasm\")\n    Go.wasmPath = subDirectory + \"/tupelo.wasm\"\n}\n\ndeclare global {\n    interface Window { Community: any; }\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    root: {\n        padding: theme.spacing(3, 2),\n    },\n    title: {\n        display: 'none',\n        [theme.breakpoints.up('sm')]: {\n            display: 'block',\n        },\n    },\n    grow: {\n        flexGrow: 1,\n    },\n    search: {\n        marginLeft: theme.spacing(3),\n    },\n    searchIcon: {\n        color: \"white\",\n    }\n}));\n\nconst routes =\n    mount({\n        '/': route({\n            view: <div>Awaiting your DID</div>\n        }),\n        '/chaintrees/:did': explorerRoute,\n        '/login': loginRoute,\n        \"/wallet\": walletRoute,\n    })\n\nexport const NavBar = () => {\n    const classes = useStyles();\n    let [search, setSearch] = useState(\"\")\n    let navigation = useNavigation()\n\n    const handleSubmit = (evt: React.FormEvent) => {\n        evt.preventDefault()\n        if (!!search && search !== \"\") {\n            navigation.navigate(\"/chaintrees/\" + search)\n        }\n    }\n\n    window.Community = Community\n\n    return (\n        <AppBar position=\"static\">\n            <Toolbar>\n                <Typography className={classes.title} variant=\"h6\" noWrap>\n                    ChainTree Explorer\n            </Typography>\n                <form onSubmit={handleSubmit}>\n                    <TextField\n                        className={classes.search}\n                        id=\"did\"\n                        label=\"search...\"\n                        type=\"search\"\n                        variant=\"filled\"\n                        InputProps={{\n                            startAdornment: <InputAdornment position=\"start\"><SearchIcon className={classes.searchIcon} /></InputAdornment>,\n                        }}\n                        value={search}\n                        onChange={(evt) => {\n                            setSearch(evt.target.value)\n                        }} />\n                </form>\n            </Toolbar>\n        </AppBar>\n    )\n}\n\nexport const Layout = () => {\n    const classes = useStyles();\n    const [userTree] = useGlobalState(\"userTree\")\n\n    return (\n        <Container maxWidth=\"lg\">\n\n            <Router \n                routes={routes} \n                context={userTree} \n                history={createHashHistory()}>\n                <NavBar />\n                <Grid\n                    container\n                    direction=\"row\"\n                    justify=\"center\"\n                    alignItems=\"center\"\n                    spacing={2}\n                >\n                    <Grid item xs={12} >\n                        <Paper className={classes.root}>\n                            <NotFoundBoundary render={renderNotFound}>\n                                <Suspense fallback={<CircularProgress />}>\n                                    <View />\n                                </Suspense>\n                            </NotFoundBoundary>\n                        </Paper>\n                    </Grid>\n                </Grid>\n            </Router>\n\n        </Container>\n    )\n}\n\nconst renderNotFound = (err: Error) => {\n    return (\n        <h1>NotFound</h1>\n    )\n}","import React from 'react';\nimport './App.css';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/styles';\nimport theme from './theme';\nimport { Layout } from './layout'\nimport { GlobalStateProvider } from './state'\n\nconst App: React.FC = () => {\n  return (\n    <GlobalStateProvider>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Layout />\n      </ThemeProvider>\n    </GlobalStateProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'typeface-roboto';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar cids_1 = __importDefault(require(\"cids\"));\n\nvar go = require('./js/go');\n\nvar transactions_pb_1 = require(\"tupelo-messages/transactions/transactions_pb\");\n\nvar signatures_pb_1 = require(\"tupelo-messages/signatures/signatures_pb\");\n\nvar UnderlyingWasm =\n/*#__PURE__*/\nfunction () {\n  function UnderlyingWasm() {\n    _classCallCheck(this, UnderlyingWasm);\n\n    this._populated = false;\n  }\n\n  _createClass(UnderlyingWasm, [{\n    key: \"generateKey\",\n    value: function generateKey() {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"passPhraseKey\",\n    value: function passPhraseKey(phrase, salt) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"keyFromPrivateBytes\",\n    value: function keyFromPrivateBytes(bytes) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"ecdsaPubkeyToDid\",\n    value: function ecdsaPubkeyToDid(pubKey) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"ecdsaPubkeyToAddress\",\n    value: function ecdsaPubkeyToAddress(pubKey) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"getCurrentState\",\n    value: function getCurrentState(opts) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"newEmptyTree\",\n    value: function newEmptyTree(store, publicKey) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"playTransactions\",\n    value: function playTransactions(opts) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"tokenPayloadForTransaction\",\n    value: function tokenPayloadForTransaction(opts) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }]);\n\n  return UnderlyingWasm;\n}();\n\nvar TupeloWasm;\n\n(function (TupeloWasm) {\n  var _tupelowasm = new UnderlyingWasm();\n\n  function get() {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!_tupelowasm._populated) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", _tupelowasm);\n\n            case 2:\n              go.run(\"./main.wasm\");\n              _context.next = 5;\n              return go.ready();\n\n            case 5:\n              go.populate(_tupelowasm, {\n                \"cids\": cids_1.default,\n                \"ipfs-block\": require('ipfs-block')\n              });\n              _tupelowasm._populated = true;\n              return _context.abrupt(\"return\", _tupelowasm);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n  }\n\n  TupeloWasm.get = get;\n})(TupeloWasm || (TupeloWasm = {}));\n/**\n * Tupelo is the more \"raw\" namespace, it is generally expected\n * that you would use higher level wrapper classes around this namespace.\n * For example: {@link EcdsaKey} or {@link Community#\"class\"}\n * @public\n */\n\n\nvar Tupelo;\n\n(function (Tupelo) {\n  // generateKey returns a two element array of the bytes for [privateKey, publicKey]\n  function generateKey() {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var tw;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return TupeloWasm.get();\n\n            case 2:\n              tw = _context2.sent;\n              return _context2.abrupt(\"return\", tw.generateKey());\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n  }\n\n  Tupelo.generateKey = generateKey;\n\n  function passPhraseKey(phrase, salt) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var tw;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return TupeloWasm.get();\n\n            case 2:\n              tw = _context3.sent;\n              return _context3.abrupt(\"return\", tw.passPhraseKey(phrase, salt));\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n  }\n\n  Tupelo.passPhraseKey = passPhraseKey;\n\n  function keyFromPrivateBytes(bytes) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      var tw;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return TupeloWasm.get();\n\n            case 2:\n              tw = _context4.sent;\n              return _context4.abrupt(\"return\", tw.keyFromPrivateBytes(bytes));\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n  }\n\n  Tupelo.keyFromPrivateBytes = keyFromPrivateBytes;\n\n  function ecdsaPubkeyToDid(pubKey) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee5() {\n      var tw;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return TupeloWasm.get();\n\n            case 2:\n              tw = _context5.sent;\n              return _context5.abrupt(\"return\", tw.ecdsaPubkeyToDid(pubKey));\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n  }\n\n  Tupelo.ecdsaPubkeyToDid = ecdsaPubkeyToDid;\n\n  function ecdsaPubkeyToAddress(pubKey) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee6() {\n      var tw;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return TupeloWasm.get();\n\n            case 2:\n              tw = _context6.sent;\n              return _context6.abrupt(\"return\", tw.ecdsaPubkeyToAddress(pubKey));\n\n            case 4:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n  }\n\n  Tupelo.ecdsaPubkeyToAddress = ecdsaPubkeyToAddress;\n\n  function getCurrentState(opts) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee7() {\n      var tw, stateBits;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return TupeloWasm.get();\n\n            case 2:\n              tw = _context7.sent;\n              _context7.prev = 3;\n              _context7.next = 6;\n              return tw.getCurrentState(opts);\n\n            case 6:\n              stateBits = _context7.sent;\n              return _context7.abrupt(\"return\", signatures_pb_1.CurrentState.deserializeBinary(stateBits));\n\n            case 10:\n              _context7.prev = 10;\n              _context7.t0 = _context7[\"catch\"](3);\n              throw _context7.t0;\n\n            case 13:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[3, 10]]);\n    }));\n  }\n\n  Tupelo.getCurrentState = getCurrentState; // newEmptyTree creates a new ChainTree with the ID populateed in the IBlockService and\n  // returns the CID to the tip\n\n  function newEmptyTree(store, publicKey) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee8() {\n      var tw;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.next = 2;\n              return TupeloWasm.get();\n\n            case 2:\n              tw = _context8.sent;\n              return _context8.abrupt(\"return\", tw.newEmptyTree(store, publicKey));\n\n            case 4:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n  }\n\n  Tupelo.newEmptyTree = newEmptyTree;\n\n  function tokenPayloadForTransaction(opts) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee9() {\n      var tw, respBits;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              _context9.next = 2;\n              return TupeloWasm.get();\n\n            case 2:\n              tw = _context9.sent;\n              _context9.next = 5;\n              return tw.tokenPayloadForTransaction({\n                blockService: opts.blockService,\n                tip: opts.tip,\n                tokenName: opts.tokenName,\n                sendId: opts.sendId,\n                jsSendTxSig: opts.signature.serializeBinary()\n              });\n\n            case 5:\n              respBits = _context9.sent;\n              return _context9.abrupt(\"return\", transactions_pb_1.TokenPayload.deserializeBinary(respBits));\n\n            case 7:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n  }\n\n  Tupelo.tokenPayloadForTransaction = tokenPayloadForTransaction;\n\n  function playTransactions(publisher, notaryGroup, tree, transactions) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee10() {\n      var tw, transBits, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, t, serialized, store, privateKey, resp, currState, sig;\n\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              if (!(tree.key == undefined)) {\n                _context10.next = 2;\n                break;\n              }\n\n              throw new Error(\"playing transactions on a tree requires the tree to have a private key, use tree.key = <ecdsaKey>\");\n\n            case 2:\n              _context10.next = 4;\n              return TupeloWasm.get();\n\n            case 4:\n              tw = _context10.sent;\n              transBits = new Array();\n              _iteratorNormalCompletion = true;\n              _didIteratorError = false;\n              _iteratorError = undefined;\n              _context10.prev = 9;\n\n              for (_iterator = transactions[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                t = _step.value;\n                serialized = t.serializeBinary();\n                transBits = transBits.concat(serialized);\n              }\n\n              _context10.next = 17;\n              break;\n\n            case 13:\n              _context10.prev = 13;\n              _context10.t0 = _context10[\"catch\"](9);\n              _didIteratorError = true;\n              _iteratorError = _context10.t0;\n\n            case 17:\n              _context10.prev = 17;\n              _context10.prev = 18;\n\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n\n            case 20:\n              _context10.prev = 20;\n\n              if (!_didIteratorError) {\n                _context10.next = 23;\n                break;\n              }\n\n              throw _iteratorError;\n\n            case 23:\n              return _context10.finish(20);\n\n            case 24:\n              return _context10.finish(17);\n\n            case 25:\n              store = tree.store;\n              privateKey = tree.key.privateKey ? tree.key.privateKey : new Uint8Array();\n\n              if (!(privateKey.length == 0)) {\n                _context10.next = 29;\n                break;\n              }\n\n              throw new Error(\"can only play transactions on a tree with a private key attached\");\n\n            case 29:\n              _context10.next = 31;\n              return tw.playTransactions({\n                notaryGroup: notaryGroup.serializeBinary(),\n                publisher: publisher,\n                blockService: store,\n                privateKey: privateKey,\n                tip: tree.tip,\n                transactions: transBits\n              });\n\n            case 31:\n              resp = _context10.sent;\n              currState = signatures_pb_1.CurrentState.deserializeBinary(resp);\n              sig = currState.getSignature();\n\n              if (!(sig == undefined)) {\n                _context10.next = 36;\n                break;\n              }\n\n              throw new Error(\"empty signature received from CurrState\");\n\n            case 36:\n              tree.tip = new cids_1.default(Buffer.from(sig.getNewTip_asU8()));\n              return _context10.abrupt(\"return\", currState);\n\n            case 38:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10, null, [[9, 13, 17, 25], [18,, 20, 24]]);\n    }));\n  }\n\n  Tupelo.playTransactions = playTransactions;\n})(Tupelo = exports.Tupelo || (exports.Tupelo = {}));\n\nexports.default = Tupelo;","\"use strict\";\n/**\n * The Tupelo WASM SDK is designed to be used in both nodejs and the browser.\n * @packageDocumentation\n */\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__export(require(\"./tupelo\"));\n\n__export(require(\"./node\"));\n\n__export(require(\"./crypto\"));\n\n__export(require(\"./chaintree\"));\n\n__export(require(\"./community\"));\n\n__export(require(\"./repo\"));\n\n__export(require(\"./notarygroup\"));","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar libp2p = require('./js/p2p');\n/**\n * @public\n */\n\n\nvar p2p;\n\n(function (p2p) {\n  /**\n   *\n   * @param opts - {@link INodeOptions}\n   * @public\n   */\n  function createNode(opts) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", libp2p.CreateNode({\n                config: {\n                  peerDiscovery: {\n                    bootstrap: {\n                      list: opts.bootstrapAddresses\n                    }\n                  }\n                }\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n  }\n\n  p2p.createNode = createNode;\n})(p2p = exports.p2p || (exports.p2p = {}));","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Ipld = require('ipld');\n/**\n * Underlies a ChainTree, it represents a DAG of IPLD nodes and supports resolving accross\n * multiple nodes.\n * @public\n */\n\n\nvar Dag =\n/*#__PURE__*/\nfunction () {\n  function Dag(tip, store) {\n    _classCallCheck(this, Dag);\n\n    this.tip = tip;\n    this.dagStore = new Ipld({\n      blockService: store\n    });\n  }\n  /**\n   * Gets a node from the dag\n   * @param cid - The CID of the node to get from the DAG\n   * @public\n   */\n\n\n  _createClass(Dag, [{\n    key: \"get\",\n    value: function get(cid) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", this.dagStore.get(cid));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n    /**\n     *\n     * @param path - an array of strings which form a path to the desired node/key in the DAG\n     * @public\n     */\n\n  }, {\n    key: \"resolve\",\n    value: function resolve(path) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", this.resolveAt(this.tip, path));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n    /**\n     * Similar to resolve, but allows you to start at a specific tip of a dag rather than the current tip.\n     * @param tip - The tip of the dag to start at\n     * @param path - the path to find the value\n     * @public\n     */\n\n  }, {\n    key: \"resolveAt\",\n    value: function resolveAt(tip, path) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var str_path, resolved, lastVal, e;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                str_path = path.join(\"/\");\n                resolved = this.dagStore.resolve(tip, str_path);\n                _context3.prev = 2;\n                _context3.next = 5;\n                return resolved.last();\n\n              case 5:\n                lastVal = _context3.sent;\n                _context3.next = 13;\n                break;\n\n              case 8:\n                _context3.prev = 8;\n                _context3.t0 = _context3[\"catch\"](2);\n                e = _context3.t0;\n\n                if (e.message.startsWith(\"Object has no property\")) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                throw _context3.t0;\n\n              case 13:\n                if (!(typeof lastVal === 'undefined')) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", {\n                  remainderPath: path,\n                  value: null\n                });\n\n              case 15:\n                if (!(lastVal.remainderPath != \"\")) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", {\n                  remainderPath: lastVal.remainderPath.split(\"/\"),\n                  value: null\n                });\n\n              case 17:\n                return _context3.abrupt(\"return\", {\n                  remainderPath: [],\n                  value: lastVal.value\n                });\n\n              case 18:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[2, 8]]);\n      }));\n    }\n  }]);\n\n  return Dag;\n}();\n\nexports.Dag = Dag;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _this = this;\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar community_1 = require(\"./community\");\n\nvar notarygroup_1 = require(\"../notarygroup\");\n\nvar repo_1 = __importDefault(require(\"../repo\"));\n\nvar node_1 = require(\"../node\");\n\nvar debug_1 = __importDefault(require(\"debug\"));\n\nvar log = debug_1.default(\"community:default\");\n\nvar MemoryDatastore = require('interface-datastore').MemoryDatastore;\n\nvar testNetToml = \"id = \\\"testnet\\\"\\n\\n# below are the community nodes running on the testnet\\nBootstrapAddresses = [\\n  \\\"/dns4/3-210-47-111.ssl.quorumcontrol.com/tcp/443/wss/ipfs/16Uiu2HAmFLqDZpxvDiJZPTF3MazsH3f4AhGayCknuny121a8VzJz\\\",\\n  \\\"/dns4/35-157-225-128.ssl.quorumcontrol.com/tcp/443/wss/ipfs/16Uiu2HAmEyHmGb7qDZ2yAzHKF8JYL7FSpTtSEauWpjaBFDdYtqBd\\\",\\n  \\\"/dns4/54-241-183-3.ssl.quorumcontrol.com/tcp/443/wss/ipfs/16Uiu2HAmNp4pAvoGYPkTmniRzt5Y3onDCZDURdxpqHRcpbXYgvdi\\\",\\n]\\n\\n[[signers]]\\nVerKeyHex = \\\"0x7c1489ff8b8c8f22a8387dc0b3f387b3f48f2585e09c5a88e91f434e566662b056ca99cf5828a7a202eb6b2502b8846cb1291af4a086086d2cfe867d07e752065e8e384d8254cf57e3db3280cb5ca17f48f7471ae1cb943786bd0378bfdb609c60f6f0281d76b8579a22489f45eafa29a1db998523cdbe86300b1836fd736f9b\\\"\\nDestKeyHex = \\\"0x0410ce0d11dcb98cbaa7b50d45b8ab3985438e7cb6af47b0f0cba15e58f9916529e406a1fbcdfd13a254e1cae220eccb196812b3847e547cd20925973550779a9a\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x0f0ddf09f4d5bd799ea5dbed5edd4e82fa5f64122ef432eaef8520c53dfad62b2c146ab1a42f9dadf5ec3675c7a7c3d9a4287c002c1a97bc7d9504f8f8d937876e4114beb4da110258a879700d09f6e829fdd3924ce0184a14d7746ccae884ba7b509e9f8dc49bd497bf9203e6a95ad7f74c5b1097c95c7a47a4d1bd46da0321\\\"\\nDestKeyHex = \\\"0x0486bbdca3916cede6ba65a39d625fc76936131f8b557e2ea508727b8be807af26619319a9495796eeb5a5abdf60106614b81eeae42e6e828ad9fbb04ba7c851fe\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x01536daaa4654e03e48c143ebbea01a6a7a97516abeba3db8ef5b225e934ab855defe07200b3b5ef118cf16edec8d4e8e7fa29e0aa304f55b14aa0bbf4c3c52f278f073e4a933de52648dc3b7c0ea8bc0204034dc541385a705cf221e763f5482ed41150eaf4b3b154640e6de19a2e34f9c638ff52c8a72b5d09f3025df7641c\\\"\\nDestKeyHex = \\\"0x0439923ba68fd9400c7148142aa052819d35fd00c798a216808719f03d9a3b623c06c69e814b8f8ffdbb9563e713e7796b950e6954085adc2af3adb8713c06b8a6\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x145f59f7d4019a77b051c98cacb75e3ebe8c6c8e460cf8ff08874b906394c6f83e963ed1928d8e2aa453c9e6e02de381c5cc8118a33f87a45cf02f1e97cbd29308efc2f7bbaa49d8107c0a901824f4c4de44127c4476bf5fa0cb7fee073216b357cdc30274627cae6018a37033dd00e631fb051eab0642cb7a0ed049fd47d5ad\\\"\\nDestKeyHex = \\\"0x0461a2fc33ef88281b07a1ff71b619aa584c28e5bc6be5e8b3981ab6b5017d3d2f06965b294d7c6fe9d3f9c7f2735181ce821e32d8bb5ca7fc6d5d26a8dd14107b\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x713554805fc623b3ec668565f4074a0e1809967d2c346ece22924da799c3d8298adb0353d2360bcf28b2853616456dc459cd33b06c18c98af88541145a38cd77186f7b62b8d0f586be590f880858156a5469a9e8e3d05a3f5e4fdc61ea47d9e60b501771892c619f687b795c356755017961fab44b25af4434c42a8ddf9b3684\\\"\\nDestKeyHex = \\\"0x04e8e38b206291a6447d074d471ca94f4e264acc187df283889ea5b27e158bfc6c85e2786b04c086b6fcaa1003659a1dc549a00411a66a883aacb58ac0fe51c0cb\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x00e4a60d3997c07bf3df538f0010e163f4ba0fb14278841337dee9883e94b927164a2c9700b81b70df89f2d3355af35fc3f79845318d8feb48e4d3651c9e39292cf44c7fd31c467d6945bfed7d3645d4d4e9311b03f3728816ce92681c75fae11c5a1d3e017d906d4d436808983ef0f531c10ea81edd42dae9a1b039a1fa5a78\\\"\\nDestKeyHex = \\\"0x04f3992ec14f4159d55283eae25a1cdd8ce38f5cae321ccfd17e7d631d5d27a30d4316cf59c97bb8d404dfd082a3ef64ade457c0398493cffa66c4ec152ed22908\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x193bba05a9804ef7b4cc968720a36ac4aaa58a4ed48ce9cb2179fbb2bb24d2a84988d31be6f792d84098011405373950ea15dfdc26d3e41ce9454b6d39e3c0c3847df8c6e409a3ea600c0907d0414fc20c03ae5f6870970cdb7707c3dca871186fa97739c925b9449080035e46afdcad41a94f9fdaf3c992320390df329a365f\\\"\\nDestKeyHex = \\\"0x04b51bfa4110e3c3dec1fa20eb716e74046b0ec16a8657256970c54a52fd9bb0bca4e57ef886ddac6d8e079129fb18baa88b0200c4f3f71c01692d638d877da0c9\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x621732818cb7539c78562c756bc68f0dbe30f8bc6947545effc20ee6b16369a245387a252962fb9bea27adf9e3b3ff18b30101a53351e024e6dc06bbe549369e7d3ce89bb3c167fbe72b0933b5b05400f24fc6989cb6cde1bef5b6d8b363629f666743e3e85db3e022182bcebf7ce07b7304b7f22cc40b3540f4b5bef65f491b\\\"\\nDestKeyHex = \\\"0x04718a3698c6d739f87723e266fb4b093d73256a684b49fa770bef9af9e322d8681b3dadf5bda5b3f4bb84eb82ba9f86236c1ebf6cca7f808d2547719236ca8dad\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x7b5c97eb45b4813427f921a71b4e30ab41200307c32f6b80ca7bf7578487c81c496c877ca11f77ca8a7296d7b63460fbbdb53767824604e3068cbbcbdeb4854e43b6a85215a1ada3323543dd548a837e3db597591db1a363f65c01653118b2c00186b428ec9d1916fb451da3280d1de8c313d9210e287e9f83623ca6ae083127\\\"\\nDestKeyHex = \\\"0x043be54e822c5a589b5e95dbe200c7ec520a689f24832e552e7842a4bcd3c31348ad2103528c29d4b53d1ccb241bf8a537d04e92b70a2248dcddb129a9ade20b94\\\"\\n\";\n/**\n * The default (testnet) notary group for the Tupelo Network\n * @public\n */\n\nexports.defaultNotaryGroup = notarygroup_1.tomlToNotaryGroup(testNetToml);\n\nvar _defaultCommunity;\n/**\n *\n * @internal\n */\n\n\nexports._getDefault = function (repo) {\n  return __awaiter(_this, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var _this2 = this;\n\n    var node, c;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(repo == undefined)) {\n              _context2.next = 6;\n              break;\n            }\n\n            repo = new repo_1.default(\"default\");\n            _context2.next = 4;\n            return repo.init({});\n\n          case 4:\n            _context2.next = 6;\n            return repo.open();\n\n          case 6:\n            if (!(_defaultCommunity !== undefined)) {\n              _context2.next = 8;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", _defaultCommunity.start());\n\n          case 8:\n            _context2.next = 10;\n            return node_1.p2p.createNode({\n              bootstrapAddresses: exports.defaultNotaryGroup.getBootstrapAddressesList()\n            });\n\n          case 10:\n            node = _context2.sent;\n            node.on('error', function (err) {\n              console.error('p2p error: ', err);\n            });\n            node.start(function () {\n              log(\"node started\");\n            }); // clear the defaultcommunity on a node stopage\n\n            node.once('stop', function () {\n              return __awaiter(_this2, void 0, void 0,\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee() {\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _defaultCommunity = undefined;\n\n                      case 1:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n            });\n            c = new community_1.Community(node, exports.defaultNotaryGroup, repo.repo);\n            _defaultCommunity = c;\n            return _context2.abrupt(\"return\", c.start());\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n};","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar events_1 = __importDefault(require(\"events\"));\n\nvar transactions_pb_1 = require(\"tupelo-messages/transactions/transactions_pb\");\n\nvar cids_1 = __importDefault(require(\"cids\"));\n\nvar wrappedblockservice_1 = require(\"./wrappedblockservice\");\n\nvar tupelo_1 = __importDefault(require(\"../tupelo\"));\n\nvar default_1 = require(\"./default\");\n\nvar debug_1 = __importDefault(require(\"debug\"));\n\nvar debugLog = debug_1.default(\"community\"); // const IpfsBlockService:any = require('ipfs-block-service');\n\nvar IpfsBitswap = require('ipfs-bitswap');\n\nvar IpfsBlockService = require('ipfs-block-service');\n\nfunction tipTopicFromNotaryGroup(ng) {\n  return ng.getId() + \"-tips\";\n}\n/**\n * Commmunity is a combination of a Tupelo NotaryGroup and the application 'Community' running.\n * The remote p2p community app will also store blocks, and this is the default supported way\n * that the current wasm-sdk works.\n * @public\n */\n\n\nvar Community =\n/*#__PURE__*/\nfunction (_events_1$default) {\n  _inherits(Community, _events_1$default);\n\n  function Community(node, group, repo) {\n    var _this;\n\n    _classCallCheck(this, Community);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Community).call(this));\n    _this._started = false;\n    _this.node = node;\n    _this.group = group;\n    _this.repo = repo;\n    _this.bitswap = new IpfsBitswap(_this.node, _this.repo.blocks);\n    _this.blockservice = new wrappedblockservice_1.WrappedBlockService(new IpfsBlockService(_this.repo));\n\n    _this.blockservice.setExchange(_this.bitswap);\n\n    _this._startPromiseResolve = function () {}; // replaced on the line below, this just stops typescript from complaining\n\n\n    _this._startPromiseReject = function () {}; // replaced on the line below, this just stops typescript from complaining\n\n\n    _this._startPromise = new Promise(function (resolve) {\n      _this._startPromiseResolve = resolve;\n    });\n    return _this;\n  }\n\n  _createClass(Community, [{\n    key: \"waitForStart\",\n    value: function waitForStart() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", this._startPromise);\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n    /**\n     * getCurrentState returns the current state (signatures)\n     * for a given ChainTree (its DID)\n     * @public\n    */\n\n  }, {\n    key: \"getCurrentState\",\n    value: function getCurrentState(did) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.start();\n\n              case 2:\n                _context2.next = 4;\n                return this.nextUpdate();\n\n              case 4:\n                if (!(this.tip == undefined)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                throw new Error(\"tip still undefined, even though community started and update received\");\n\n              case 6:\n                return _context2.abrupt(\"return\", tupelo_1.default.getCurrentState({\n                  did: did,\n                  blockService: this.blockservice,\n                  tip: this.tip\n                }));\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n    /**\n     * returns the TIP as a CID of the ChainTree. This is more of a convenience function\n     * around getting the current state, and then casting the tip, etc.\n     * @param did - The DID of the ChainTree\n     */\n\n  }, {\n    key: \"getTip\",\n    value: function getTip(did) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var state, sig;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.getCurrentState(did);\n\n              case 2:\n                state = _context3.sent;\n                sig = state.getSignature();\n\n                if (!(sig == undefined)) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                throw new Error(\"undefined signature\");\n\n              case 6:\n                return _context3.abrupt(\"return\", new cids_1.default(Buffer.from(sig.getNewTip_asU8())));\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }, {\n    key: \"sendTokenAndGetPayload\",\n    value: function sendTokenAndGetPayload(tree, tx) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var sendTokenPayload, resp, sig;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                sendTokenPayload = tx.getSendTokenPayload();\n\n                if (!(tx.getType() != transactions_pb_1.Transaction.Type.SENDTOKEN || sendTokenPayload === undefined)) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                throw new Error(\"must use a send token transaction here\");\n\n              case 3:\n                _context4.next = 5;\n                return this.playTransactions(tree, [tx]);\n\n              case 5:\n                resp = _context4.sent;\n                sig = resp.getSignature();\n\n                if (!(sig === undefined)) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                throw new Error('received undefined signature');\n\n              case 9:\n                return _context4.abrupt(\"return\", tupelo_1.default.tokenPayloadForTransaction({\n                  blockService: this.blockservice,\n                  tip: tree.tip,\n                  tokenName: sendTokenPayload.getName(),\n                  sendId: sendTokenPayload.getId(),\n                  signature: sig\n                }));\n\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n    }\n    /**\n     * playTransactions is a convenience wrapper on community to make calling the underlying Tupelo.playTransactions\n     * easier when using a fully community client\n    */\n\n  }, {\n    key: \"playTransactions\",\n    value: function playTransactions(tree, transactions) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                return _context5.abrupt(\"return\", tupelo_1.default.playTransactions(this.node.pubsub, this.group, tree, transactions));\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n    }\n    /** next update is a helper function\n     * which lets you do an await until the next tip\n     * update of the community\n    */\n\n  }, {\n    key: \"nextUpdate\",\n    value: function nextUpdate() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6() {\n        var resolve, p;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                p = new Promise(function (res, _rej) {\n                  resolve = res;\n                });\n                this.once('tip', function () {\n                  resolve();\n                });\n                return _context6.abrupt(\"return\", p);\n\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n    }\n    /**\n     * starts up the community\n    */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (!this._started) {\n                  _context8.next = 2;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", this._startPromise);\n\n              case 2:\n                this._started = true;\n                this.bitswap.start(function () {\n                  debugLog(\"bitswap started\");\n                });\n\n                if (!this.node.isStarted()) {\n                  _context8.next = 16;\n                  break;\n                }\n\n                _context8.prev = 5;\n                _context8.next = 8;\n                return this.subscribeToTips();\n\n              case 8:\n                _context8.next = 14;\n                break;\n\n              case 10:\n                _context8.prev = 10;\n                _context8.t0 = _context8[\"catch\"](5);\n                this._started = false;\n\n                this._startPromiseReject(_context8.t0);\n\n              case 14:\n                _context8.next = 17;\n                break;\n\n              case 16:\n                this.node.once('start', function () {\n                  return __awaiter(_this2, void 0, void 0,\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee7() {\n                    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n                      while (1) {\n                        switch (_context7.prev = _context7.next) {\n                          case 0:\n                            _context7.prev = 0;\n                            _context7.next = 3;\n                            return this.subscribeToTips();\n\n                          case 3:\n                            _context7.next = 9;\n                            break;\n\n                          case 5:\n                            _context7.prev = 5;\n                            _context7.t0 = _context7[\"catch\"](0);\n                            this._started = false;\n\n                            this._startPromiseReject(_context7.t0);\n\n                          case 9:\n                          case \"end\":\n                            return _context7.stop();\n                        }\n                      }\n                    }, _callee7, this, [[0, 5]]);\n                  }));\n                });\n\n              case 17:\n                this._startPromiseResolve(this);\n\n                this.emit('start');\n                return _context8.abrupt(\"return\", this._startPromise);\n\n              case 20:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[5, 10]]);\n      }));\n    }\n  }, {\n    key: \"subscribeToTips\",\n    value: function subscribeToTips() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee9() {\n        var _this3 = this;\n\n        var resolve, reject, p;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                p = new Promise(function (res, rej) {\n                  resolve = res, reject = rej;\n                });\n                this.node.pubsub.subscribe(tipTopicFromNotaryGroup(this.group), function (msg) {\n                  if (msg.data.length > 0) {\n                    _this3.tip = new cids_1.default(Buffer.from(msg.data));\n\n                    _this3.emit('tip', _this3.tip);\n\n                    debugLog(\"tip received: cid: \", _this3.tip, \" raw: \", msg.data);\n                  } else {\n                    debugLog(\"received null tip\");\n                  }\n                }, function (err) {\n                  if (err) {\n                    reject(err);\n                    return;\n                  }\n\n                  resolve();\n                });\n\n              case 2:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n    }\n  }]);\n\n  return Community;\n}(events_1.default);\n\nexports.Community = Community;\n\n(function (Community) {\n  /**\n   * getDefault returns the default Tupelo commuity. This is currently the Tupelo testnet.\n   * It creates a libp2p node and connects to the testnet, establishes the community connection.\n   * This method optionally takes a {@link Repo}. If you do not pass in a Repo, then it will create a\n   * default repo. Details on the default can be found:\n   * @param repo - (optional) - a {@link Repo} object (wrapper around an IPFS repo).\n   * @public\n  */\n  function getDefault(repo) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee10() {\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              return _context10.abrupt(\"return\", default_1._getDefault(repo));\n\n            case 1:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n  }\n\n  Community.getDefault = getDefault;\n})(Community = exports.Community || (exports.Community = {}));","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = __importDefault(require(\"util\"));\n/**\n * A wrapper around a callback-based IBlockService that allows async/await\n * There is an open PR on the bitswap PR which will allow us to switch to the ipfs-maintained version.\n * @public\n */\n\n\nvar WrappedBlockService =\n/*#__PURE__*/\nfunction () {\n  function WrappedBlockService(blockservice) {\n    _classCallCheck(this, WrappedBlockService);\n\n    this.blockservice = blockservice;\n  }\n\n  _createClass(WrappedBlockService, [{\n    key: \"put\",\n    value: function put(block) {\n      return util_1.default.promisify(this.blockservice.put.bind(this.blockservice))(block);\n    }\n  }, {\n    key: \"get\",\n    value: function get(cid) {\n      return util_1.default.promisify(this.blockservice.get.bind(this.blockservice))(cid);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(cid) {\n      return util_1.default.promisify(this.blockservice.delete.bind(this.blockservice))(cid);\n    }\n  }, {\n    key: \"setExchange\",\n    value: function setExchange(bitswap) {\n      this.blockservice.setExchange(bitswap);\n    }\n  }, {\n    key: \"unsetExchange\",\n    value: function unsetExchange() {\n      this.blockservice.unsetExchange();\n    }\n  }, {\n    key: \"hasExchange\",\n    value: function hasExchange() {\n      return this.blockservice.hasExchange();\n    }\n  }]);\n\n  return WrappedBlockService;\n}();\n\nexports.WrappedBlockService = WrappedBlockService;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar config_pb_1 = require(\"tupelo-messages/config/config_pb\");\n\nvar toml_1 = __importDefault(require(\"toml\"));\n\nfunction hexToBuffer(hex) {\n  // the hex that we export in go is always prefaced with \"0x\", so strip that off\n  return Buffer.from(hex.substr(2), \"hex\");\n} // stack overflow ftw\n\n\nfunction toCamel(o) {\n  var newO, origKey, newKey, value;\n\n  if (o instanceof Array) {\n    return o.map(function (value) {\n      if (typeof value === \"object\") {\n        value = toCamel(value);\n      }\n\n      return value;\n    });\n  } else {\n    newO = {};\n\n    for (origKey in o) {\n      if (Object.prototype.hasOwnProperty.call(o, origKey)) {\n        newKey = (origKey.charAt(0).toLowerCase() + origKey.slice(1) || origKey).toString();\n        value = o[origKey];\n\n        if (value instanceof Array || value !== null && value.constructor === Object) {\n          value = toCamel(value);\n        }\n\n        newO[newKey] = value;\n      }\n    }\n  }\n\n  return newO;\n}\n/**\n * takes a toml config and returns a NotaryGroup object.\n * @param tomlString - a notary group HumanConfig in toml format\n * @public\n */\n\n\nfunction tomlToNotaryGroup(tomlString) {\n  var config = toml_1.default.parse(tomlString);\n  return configToNotaryGroup(toCamel(config));\n}\n\nexports.tomlToNotaryGroup = tomlToNotaryGroup;\n\nfunction configToNotaryGroup(obj) {\n  var ng = new config_pb_1.NotaryGroup();\n  ng.setId(obj.id);\n  ng.setBootstrapAddressesList(obj.bootstrapAddresses);\n  var signers = [];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = obj.signers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var s = _step.value;\n      var publicKeySet = new config_pb_1.PublicKeySet();\n      publicKeySet.setVerKey(hexToBuffer(s.verKeyHex));\n      publicKeySet.setDestKey(hexToBuffer(s.destKeyHex));\n      signers = signers.concat(publicKeySet);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  ng.setSignersList(signers);\n  return ng;\n}\n\nexports.default = tomlToNotaryGroup;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = __importDefault(require(\"util\"));\n\nvar IpfsRepo = require('ipfs-repo');\n/**\n * Repo is a typescript wrapper around the IPFS Repo {@link https://github.com/ipfs/js-ipfs-repo}\n * @public\n */\n\n\nvar Repo =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @param name - The name of the repo\n   * @param opts - (optional) {@link RepoOpts} - if opts are unspecified, it will use the IPFS repo defaults\n   * @public\n   */\n  function Repo(name, opts) {\n    _classCallCheck(this, Repo);\n\n    this.repo = new IpfsRepo(name, opts);\n  }\n\n  _createClass(Repo, [{\n    key: \"init\",\n    value: function init(opts) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", util_1.default.promisify(this.repo.init.bind(this.repo))(opts));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", util_1.default.promisify(this.repo.open.bind(this.repo))());\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", util_1.default.promisify(this.repo.close.bind(this.repo))());\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }, {\n    key: \"put\",\n    value: function put(key, val) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                return _context4.abrupt(\"return\", util_1.default.promisify(this.repo.datastore.put.bind(this.repo.datastore))(key, val));\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                return _context5.abrupt(\"return\", util_1.default.promisify(this.repo.datastore.get.bind(this.repo.datastore))(key));\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n    }\n  }, {\n    key: \"query\",\n    value: function query(_query) {\n      return this.repo.datastore.query(_query);\n    }\n  }]);\n\n  return Repo;\n}();\n\nexports.Repo = Repo;\nexports.default = Repo;","import {Community} from 'tupelo-wasm-sdk'\n\nexport const getCommunity = async ()=> {\n    let c = await Community.getDefault()\n    await c.nextUpdate()\n    return c\n}","import React, { useState } from 'react';\nimport { route,mount } from 'navi';\nimport { TextField, Button, Grid, Typography, CircularProgress } from '@material-ui/core';\nimport { EcdsaKey, Tupelo, ChainTree, setOwnershipTransaction, setDataTransaction } from 'tupelo-wasm-sdk';\nimport { useNavigation } from 'react-navi';\nimport { dispatch } from '../state';\nimport { getCommunity } from '../community';\n\nexport const usernameKey = \"/_crazywallet/username\"\nconst namespace =  Buffer.from(\"_crazywallet-dev\")\n\n/**\n * Generates a public/private keypair from an *insecure* passphrase.\n * This method is used to generate a ChainTree with a known name (given a namespace)\n * The very first thing you do with the ChainTree should be to ChangeOwner\n * @param userName - the username\n */\nconst publicUserKey = async (userName:string)=> {\n    return EcdsaKey.passPhraseKey(Buffer.from(userName),namespace)\n}\n\n/**\n * Fetch the ChainTree based on the username see {@link publicUserKey} for more details\n * on how we determine the ChainTree from the username.\n * \n * @param userName - the username\n */\nconst userTree = async (userName:string) => {\n    const key = await publicUserKey(userName)\n    // Convert the key to a tupelo DID (ChainTree id)\n    const did = await Tupelo.ecdsaPubkeyToDid(key.publicKey)\n\n    const community = await getCommunity()\n    let tip\n    try {\n        tip = await community.getTip(did)\n    } catch(e) {\n        if (e === \"not found\") {\n            return null\n        }\n    }\n    if (tip === undefined) {\n        return null\n    }\n    const tree = new ChainTree({\n        store: community.blockservice,\n        tip: tip,\n    })\n    return tree\n}\n\n/**\n * Define the navi routes \n */\nexport const loginRoute = mount({\n    \"/\": route(async (req) => {\n            return {\n                view: <RootLoginPage />\n            }\n    }),\n    \"/available/:username\": route(async (req) => {\n        const username = req.params.username\n        const tree = await userTree(username)\n        if (tree) {\n            return {\n                view: <UsernameUnavailable userName={username} tree={tree} />\n            }\n        } else {\n            return {\n                view: <UsernameAvailable userName={username} />\n            }\n        }\n    }),\n});\n\n\n/**\n * \n * When the username is unavailable\n */\nconst UsernameUnavailable = ({userName, tree}:{userName:string, tree:ChainTree}) => {\n    const navigation = useNavigation()\n\n    const [loading,setLoading] = useState(false)\n    const [password,setPassword] = useState(\"\")\n    const [badPassword,setBadPassword] = useState(false)\n\n    const handleSubmit = async (evt:React.FormEvent)=> {\n        evt.preventDefault()\n\n        setLoading(true)\n        setBadPassword(false)\n        let secureKey = await EcdsaKey.passPhraseKey(Buffer.from(password), Buffer.from(userName))\n        let secureAddr = await Tupelo.ecdsaPubkeyToAddress(secureKey.publicKey)\n        let resolveResp = await tree.resolve([\"tree\", \"_tupelo\", \"authentications\"])\n        setLoading(false)\n        let auths:string[] = resolveResp.value\n        if (auths.includes(secureAddr)) {\n            dispatch({\n                type:\"setKey\",\n                userKey: secureKey,\n            })\n            dispatch({\n                type:\"setTree\",\n                userTree: tree,\n            })\n            navigation.navigate(\"/wallet\")\n        } else {\n            setBadPassword(true)\n        }\n        setLoading(false)\n    }\n\n    return (\n        <div>\n            Username {userName} is NOT available.\n            <p>Your Username? You can login.</p>\n            <form onSubmit={handleSubmit}>\n            {loading ? <CircularProgress/> : null}\n             <Grid container spacing={2}>\n                    <Grid item>\n                        <TextField error={badPassword} label=\"password\" id=\"password\" type=\"password\" value={password} onChange={(evt) => {setPassword(evt.target.value)}}/>\n                    </Grid>\n                    <Grid item>\n                        <Button type=\"submit\" variant=\"contained\">Submit</Button>\n                    </Grid>\n                </Grid>\n            </form>\n        </div>\n    )\n}\n\n/**\n * When the user name is available, offer to register the user with a password.\n * Under the hood, we'll be creating a private key from the password using the\n * warp wallet technique (Brain wallet).\n */\nconst UsernameAvailable = ({userName}:{userName:string}) => {\n    const navigation = useNavigation()\n    const [password,setPassword] = useState(\"\")\n    const [loading,setLoading] = useState(false)\n\n    /**\n     * * create the private key from the password\n     * * change ownership of the known ChainTree to the new key\n     * * change the global state to reflect the user is logged in\n     */\n    const registerUser = async ()=> {\n        setLoading(true)\n        const insecureKey = await publicUserKey(userName)\n\n        const secureKey = await EcdsaKey.passPhraseKey(Buffer.from(password), Buffer.from(userName))\n        const secureKeyAddress = await Tupelo.ecdsaPubkeyToAddress(secureKey.publicKey)\n        \n        const community = await getCommunity()\n        const tree = await ChainTree.newEmptyTree(community.blockservice, insecureKey)\n\n        await community.playTransactions(tree, [\n                // Set the ownership of the chaintree to our secure key (thus owning the username)\n                setOwnershipTransaction([secureKeyAddress]),\n                // Cache the username inside of the chaintree for easier access later\n                setDataTransaction(usernameKey, userName),\n        ])\n        tree.key = secureKey\n        dispatch({\n            type:\"setKey\",\n            userKey: secureKey,\n        })\n        dispatch({\n            type:\"setTree\",\n            userTree: tree,\n        })\n        setLoading(false)\n        navigation.navigate(\"/wallet\")\n    }\n\n    const handleSubmit = (evt:React.FormEvent) => {\n        evt.preventDefault()\n        registerUser()\n    }\n\n    return (\n        <div>\n            Username {userName} is available.\n            <p>Reserve username?</p>\n            <form onSubmit={handleSubmit}>\n            {loading ? <CircularProgress/> : null}\n             <Grid container spacing={2}>\n                    <Grid item>\n                        <TextField label=\"password\" id=\"password\" type=\"password\" value={password} onChange={(evt) => {setPassword(evt.target.value)}}/>\n                    </Grid>\n                    <Grid item>\n                        <Button type=\"submit\" variant=\"contained\">Submit</Button>\n                    </Grid>\n                </Grid>\n            </form>\n        </div>\n    )\n}\n\n\n/**\n * The root login page which just allows for choosing a username\n */\nexport const RootLoginPage = () => {\n\n    const navigation = useNavigation()\n    const [username,setUsername] = useState(\"\")\n\n    const handleSubmit = (evt:React.FormEvent) => {\n        evt.preventDefault()\n        navigation.navigate(\"/login/available/\" + username)\n    }\n\n    return (\n        <div>\n            <Typography>Login or Register</Typography>\n            <form onSubmit={handleSubmit}>\n                <Grid container spacing={2}>\n                    <Grid item>\n                        <TextField label=\"user name\" id=\"userName\" value={username} onChange={(evt) => {setUsername(evt.target.value)}}/>\n                    </Grid>\n                    <Grid item>\n                        <Button type=\"submit\" variant=\"contained\">Submit</Button>\n                    </Grid>\n                </Grid>\n            </form>\n        </div>\n    )\n}","import React, { useState } from 'react'\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, TextField, CircularProgress, Button } from '@material-ui/core';\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\nimport { ChainTree, sendTokenTransaction } from 'tupelo-wasm-sdk'\nimport { getCommunity } from '../community';\n\nconst uuidv4: () => string = require('uuid/v4');\n\n/**\n * \n * You can send any token you have a balance of. This dialog will show the user the base64 encoded version of the payload they need to send\n * to the receiver. If that payload is lost, it's difficult to recover.\n * The token transaction flow is this:\n * send token (transaction) -> copy payload -> send payload -> (receiver) get payload -> receive token (transaction)\n */\nexport const SendTokenDialog = ({ open, onClose, tree, tokenName }: { tokenName: string, open: boolean, onClose: () => void, tree: ChainTree }) => {\n    const [amount, setAmount] = useState(0)\n    const [destination, setDestination] = useState(\"\")\n    const [loading, setLoading] = useState(false)\n    const [code, setCode] = useState()\n\n    const handleSubmit = async () => {\n        if (tree === undefined) {\n            throw new Error(\"userTree is undefined\")\n        }\n        setLoading(true)\n        //sendId must be unique to the receiving chaintree. Here we just use a globally unique uuid.\n        const uuid = uuidv4()\n        const community = await getCommunity()\n        // const canonicalName = await tokenCanonicalName(tree, tokenName)\n        console.log('tokenname: ', tokenName)\n    \n        // sendTokenAndGetPayload is a helper function to both play the send token transaction and then also create the payload\n        // from the transaction. it is then shown to the user.\n        const payload = await community.sendTokenAndGetPayload(tree, sendTokenTransaction(uuid, tokenName, amount, destination))\n        setCode(Buffer.from(payload.serializeBinary()).toString('base64'))\n    }\n\n    const _onClose = () => {\n        setAmount(0)\n        setDestination(\"\")\n        setLoading(false)\n        onClose()\n    }\n\n    return (\n        !code ? <Dialog open={open} onClose={onClose} aria-labelledby=\"form-dialog-title\">\n            <DialogTitle id=\"form-dialog-title\">Send Tokens</DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    Send tokens of type {tokenName}\n                </DialogContentText>\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    id=\"name\"\n                    label=\"Destination\"\n                    fullWidth\n                    onChange={(evt) => { setDestination(evt.target.value) }}\n                    value={destination}\n                />\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    id=\"amount\"\n                    label=\"Amount\"\n                    type=\"number\"\n                    fullWidth\n                    onChange={(evt) => { setAmount(parseInt(evt.target.value, 10)) }}\n                    value={amount.toString()}\n                />\n\n            </DialogContent>\n            {loading ? <CircularProgress /> :\n                <DialogActions>\n                    <Button onClick={_onClose} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleSubmit} color=\"primary\">\n                        Send\n                    </Button>\n                </DialogActions>\n            }\n        </Dialog> : // if we have a code, display it to the user\n        <Dialog open={open} onClose={onClose} aria-labelledby=\"form-dialog-title\">\n            <DialogTitle id=\"form-dialog-title\">Send Tokens</DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    Give the following snippet to your send coin receiver:\n                </DialogContentText>\n                <TextareaAutosize>\n                    {code}\n                </TextareaAutosize>\n            </DialogContent>\n            <DialogActions>\n                    <Button onClick={_onClose} color=\"primary\">\n                        Ok\n                    </Button>\n                </DialogActions>\n        </Dialog>\n        \n    )\n}\n\nexport default SendTokenDialog","import React, {useState} from 'react'\nimport {  Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, TextField, CircularProgress, Button } from '@material-ui/core';\nimport { ChainTree, receiveTokenTransactionFromPayload } from 'tupelo-wasm-sdk'\nimport { TokenPayload } from 'tupelo-messages/transactions/transactions_pb';\nimport { getCommunity } from '../community';\n\n/**\n * Receive token is used on the *receiving* side of a token transaction. The sender does a send transaction and then \n * (out of band) sends the payload to the receiver. The receiver can then do a receive coin transaction.\n */\nexport const ReceiveTokenDialog = ({open, onClose, tree}:{open:boolean, onClose:() => void, tree:ChainTree})=> {\n    const [code, setCode] = useState(\"\")\n    const [loading,setLoading] = useState(false)\n\n    const handleSubmit = async ()=> {\n        if (tree === undefined) {\n            throw new Error(\"userTree is undefined\")\n        }\n        let tokenPayload = TokenPayload.deserializeBinary(Buffer.from(code, 'base64'))\n        // The receiveTokenTransactionFromPayload function is a helper to create a transaction\n        // from a TokenPayload\n        let tx = receiveTokenTransactionFromPayload(tokenPayload)\n\n        setLoading(true)\n        const community = await getCommunity()\n        await community.playTransactions(tree, [tx])\n        _onClose()\n    }\n\n    const _onClose = ()=> {\n        setCode(\"\")\n        setLoading(false)\n        onClose()\n    }\n\n    return (\n        <Dialog open={open} onClose={onClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">Receive Tokens</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                       Receive Tokens\n                    </DialogContentText>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"name\"\n                        label=\"Code\"\n                        fullWidth\n                        onChange={(evt)=> {setCode(evt.target.value)}}\n                        value={code}\n                    />\n                </DialogContent>\n                {loading ? <CircularProgress/> : \n                <DialogActions>\n                    <Button onClick={_onClose} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleSubmit} color=\"primary\">\n                        Send\n                    </Button>\n                </DialogActions>\n                }\n            </Dialog>\n    )\n}\n\nexport default ReceiveTokenDialog","var _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _slicedToArray = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/slicedToArray\");\n\n// Copyright 2018 The Go Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\nvar log = require('debug')('gowasm');\n\n(function () {\n  if (typeof global !== \"undefined\") {// global already exists\n  } else if (typeof window !== \"undefined\") {\n    window.global = window;\n  } else if (typeof self !== \"undefined\") {\n    self.global = self;\n  } else {\n    throw new Error(\"cannot export Go (neither global, window nor self is defined)\");\n  }\n\n  var encoder, decoder; // Map web browser API and Node.js API to a single common API (preferring web standards over Node.js API).\n\n  var isNodeJS = global.process && global.process.title.indexOf(\"node\") !== -1;\n\n  if (isNodeJS) {\n    log('nodejs running');\n    global.require = require;\n    global.fs = require(\"fs\");\n\n    var nodeCrypto = require(\"crypto\");\n\n    global.crypto = {\n      getRandomValues: function getRandomValues(b) {\n        nodeCrypto.randomFillSync(b);\n      }\n    };\n    global.performance = {\n      now: function now() {\n        var _process$hrtime = process.hrtime(),\n            _process$hrtime2 = _slicedToArray(_process$hrtime, 2),\n            sec = _process$hrtime2[0],\n            nsec = _process$hrtime2[1];\n\n        return sec * 1000 + nsec / 1000000;\n      }\n    };\n\n    var util = require(\"util\");\n\n    encoder = new util.TextEncoder();\n    decoder = new util.TextDecoder();\n  } else {\n    log('browser running');\n    global.Buffer = require('buffer').Buffer;\n    var outputBuf = \"\";\n    global.fs = {\n      constants: {\n        O_WRONLY: -1,\n        O_RDWR: -1,\n        O_CREAT: -1,\n        O_TRUNC: -1,\n        O_APPEND: -1,\n        O_EXCL: -1\n      },\n      // unused\n      writeSync: function writeSync(fd, buf) {\n        outputBuf += decoder.decode(buf);\n        var nl = outputBuf.lastIndexOf(\"\\n\");\n\n        if (nl != -1) {\n          console.log(outputBuf.substr(0, nl));\n          outputBuf = outputBuf.substr(nl + 1);\n        }\n\n        return buf.length;\n      },\n      write: function write(fd, buf, offset, length, position, callback) {\n        if (offset !== 0 || length !== buf.length || position !== null) {\n          throw new Error(\"not implemented\");\n        }\n\n        var n = this.writeSync(fd, buf);\n        callback(null, n);\n      },\n      open: function open(path, flags, mode, callback) {\n        var err = new Error(\"not implemented\");\n        err.code = \"ENOSYS\";\n        callback(err);\n      },\n      read: function read(fd, buffer, offset, length, position, callback) {\n        var err = new Error(\"not implemented\");\n        err.code = \"ENOSYS\";\n        callback(err);\n      },\n      fsync: function fsync(fd, callback) {\n        callback(null);\n      }\n    };\n    encoder = new TextEncoder(\"utf-8\");\n    decoder = new TextDecoder(\"utf-8\");\n  }\n\n  global.Go =\n  /*#__PURE__*/\n  function () {\n    \"use strict\";\n\n    function _class() {\n      var _this = this;\n\n      _classCallCheck(this, _class);\n\n      this.argv = [\"js\"];\n      this.env = {};\n\n      this.exit = function (code) {\n        if (code !== 0) {\n          console.warn(\"exit code:\", code);\n        }\n      };\n\n      this._exitPromise = new Promise(function (resolve) {\n        _this._resolveExitPromise = resolve;\n      });\n      this._pendingEvent = null;\n      this._scheduledTimeouts = new Map();\n      this._nextCallbackTimeoutID = 1;\n\n      var mem = function mem() {\n        // The buffer may change when requesting more memory.\n        return new DataView(_this._inst.exports.mem.buffer);\n      };\n\n      var setInt64 = function setInt64(addr, v) {\n        mem().setUint32(addr + 0, v, true);\n        mem().setUint32(addr + 4, Math.floor(v / 4294967296), true);\n      };\n\n      var getInt64 = function getInt64(addr) {\n        var low = mem().getUint32(addr + 0, true);\n        var high = mem().getInt32(addr + 4, true);\n        return low + high * 4294967296;\n      };\n\n      var loadValue = function loadValue(addr) {\n        var f = mem().getFloat64(addr, true);\n\n        if (f === 0) {\n          return undefined;\n        }\n\n        if (!isNaN(f)) {\n          return f;\n        }\n\n        var id = mem().getUint32(addr, true);\n        return _this._values[id];\n      };\n\n      var storeValue = function storeValue(addr, v) {\n        var nanHead = 0x7FF80000;\n\n        if (typeof v === \"number\") {\n          if (isNaN(v)) {\n            mem().setUint32(addr + 4, nanHead, true);\n            mem().setUint32(addr, 0, true);\n            return;\n          }\n\n          if (v === 0) {\n            mem().setUint32(addr + 4, nanHead, true);\n            mem().setUint32(addr, 1, true);\n            return;\n          }\n\n          mem().setFloat64(addr, v, true);\n          return;\n        }\n\n        switch (v) {\n          case undefined:\n            mem().setFloat64(addr, 0, true);\n            return;\n\n          case null:\n            mem().setUint32(addr + 4, nanHead, true);\n            mem().setUint32(addr, 2, true);\n            return;\n\n          case true:\n            mem().setUint32(addr + 4, nanHead, true);\n            mem().setUint32(addr, 3, true);\n            return;\n\n          case false:\n            mem().setUint32(addr + 4, nanHead, true);\n            mem().setUint32(addr, 4, true);\n            return;\n        }\n\n        var ref = _this._refs.get(v);\n\n        if (ref === undefined) {\n          ref = _this._values.length;\n\n          _this._values.push(v);\n\n          _this._refs.set(v, ref);\n        }\n\n        var typeFlag = 0;\n\n        switch (typeof v) {\n          case \"string\":\n            typeFlag = 1;\n            break;\n\n          case \"symbol\":\n            typeFlag = 2;\n            break;\n\n          case \"function\":\n            typeFlag = 3;\n            break;\n        }\n\n        mem().setUint32(addr + 4, nanHead | typeFlag, true);\n        mem().setUint32(addr, ref, true);\n      };\n\n      var loadSlice = function loadSlice(addr) {\n        var array = getInt64(addr + 0);\n        var len = getInt64(addr + 8);\n        return new Uint8Array(_this._inst.exports.mem.buffer, array, len);\n      };\n\n      var loadSliceOfValues = function loadSliceOfValues(addr) {\n        var array = getInt64(addr + 0);\n        var len = getInt64(addr + 8);\n        var a = new Array(len);\n\n        for (var i = 0; i < len; i++) {\n          a[i] = loadValue(array + i * 8);\n        }\n\n        return a;\n      };\n\n      var loadString = function loadString(addr) {\n        var saddr = getInt64(addr + 0);\n        var len = getInt64(addr + 8);\n        return decoder.decode(new DataView(_this._inst.exports.mem.buffer, saddr, len));\n      };\n\n      var timeOrigin = Date.now() - performance.now();\n      this.importObject = {\n        go: {\n          // Go's SP does not change as long as no Go code is running. Some operations (e.g. calls, getters and setters)\n          // may synchronously trigger a Go event handler. This makes Go code get executed in the middle of the imported\n          // function. A goroutine can switch to a new stack if the current stack is too small (see morestack function).\n          // This changes the SP, thus we have to update the SP used by the imported function.\n          // func wasmExit(code int32)\n          \"runtime.wasmExit\": function runtimeWasmExit(sp) {\n            var code = mem().getInt32(sp + 8, true);\n            _this.exited = true;\n            delete _this._inst;\n            delete _this._values;\n            delete _this._refs;\n\n            _this.exit(code);\n          },\n          // func wasmWrite(fd uintptr, p unsafe.Pointer, n int32)\n          \"runtime.wasmWrite\": function runtimeWasmWrite(sp) {\n            var fd = getInt64(sp + 8);\n            var p = getInt64(sp + 16);\n            var n = mem().getInt32(sp + 24, true);\n            global.fs.writeSync(fd, new Uint8Array(_this._inst.exports.mem.buffer, p, n));\n          },\n          // func nanotime() int64\n          \"runtime.nanotime\": function runtimeNanotime(sp) {\n            setInt64(sp + 8, (timeOrigin + performance.now()) * 1000000);\n          },\n          // func walltime() (sec int64, nsec int32)\n          \"runtime.walltime\": function runtimeWalltime(sp) {\n            var msec = new Date().getTime();\n            setInt64(sp + 8, msec / 1000);\n            mem().setInt32(sp + 16, msec % 1000 * 1000000, true);\n          },\n          // func scheduleTimeoutEvent(delay int64) int32\n          \"runtime.scheduleTimeoutEvent\": function runtimeScheduleTimeoutEvent(sp) {\n            var id = _this._nextCallbackTimeoutID;\n            _this._nextCallbackTimeoutID++;\n\n            _this._scheduledTimeouts.set(id, setTimeout(function () {\n              _this._resume();\n            }, getInt64(sp + 8) + 1 // setTimeout has been seen to fire up to 1 millisecond early\n            ));\n\n            mem().setInt32(sp + 16, id, true);\n          },\n          // func clearTimeoutEvent(id int32)\n          \"runtime.clearTimeoutEvent\": function runtimeClearTimeoutEvent(sp) {\n            var id = mem().getInt32(sp + 8, true);\n            clearTimeout(_this._scheduledTimeouts.get(id));\n\n            _this._scheduledTimeouts.delete(id);\n          },\n          // func getRandomData(r []byte)\n          \"runtime.getRandomData\": function runtimeGetRandomData(sp) {\n            crypto.getRandomValues(loadSlice(sp + 8));\n          },\n          // func stringVal(value string) ref\n          \"syscall/js.stringVal\": function syscallJsStringVal(sp) {\n            storeValue(sp + 24, loadString(sp + 8));\n          },\n          // func valueGet(v ref, p string) ref\n          \"syscall/js.valueGet\": function syscallJsValueGet(sp) {\n            var result = Reflect.get(loadValue(sp + 8), loadString(sp + 16));\n            sp = _this._inst.exports.getsp(); // see comment above\n\n            storeValue(sp + 32, result);\n          },\n          // func valueSet(v ref, p string, x ref)\n          \"syscall/js.valueSet\": function syscallJsValueSet(sp) {\n            Reflect.set(loadValue(sp + 8), loadString(sp + 16), loadValue(sp + 32));\n          },\n          // func valueIndex(v ref, i int) ref\n          \"syscall/js.valueIndex\": function syscallJsValueIndex(sp) {\n            storeValue(sp + 24, Reflect.get(loadValue(sp + 8), getInt64(sp + 16)));\n          },\n          // valueSetIndex(v ref, i int, x ref)\n          \"syscall/js.valueSetIndex\": function syscallJsValueSetIndex(sp) {\n            Reflect.set(loadValue(sp + 8), getInt64(sp + 16), loadValue(sp + 24));\n          },\n          // func valueCall(v ref, m string, args []ref) (ref, bool)\n          \"syscall/js.valueCall\": function syscallJsValueCall(sp) {\n            try {\n              var v = loadValue(sp + 8);\n              var m = Reflect.get(v, loadString(sp + 16));\n              var args = loadSliceOfValues(sp + 32);\n              var result = Reflect.apply(m, v, args);\n              sp = _this._inst.exports.getsp(); // see comment above\n\n              storeValue(sp + 56, result);\n              mem().setUint8(sp + 64, 1);\n            } catch (err) {\n              storeValue(sp + 56, err);\n              mem().setUint8(sp + 64, 0);\n            }\n          },\n          // func valueInvoke(v ref, args []ref) (ref, bool)\n          \"syscall/js.valueInvoke\": function syscallJsValueInvoke(sp) {\n            try {\n              var v = loadValue(sp + 8);\n              var args = loadSliceOfValues(sp + 16);\n              var result = Reflect.apply(v, undefined, args);\n              sp = _this._inst.exports.getsp(); // see comment above\n\n              storeValue(sp + 40, result);\n              mem().setUint8(sp + 48, 1);\n            } catch (err) {\n              storeValue(sp + 40, err);\n              mem().setUint8(sp + 48, 0);\n            }\n          },\n          // func valueNew(v ref, args []ref) (ref, bool)\n          \"syscall/js.valueNew\": function syscallJsValueNew(sp) {\n            try {\n              var v = loadValue(sp + 8);\n              var args = loadSliceOfValues(sp + 16);\n              var result = Reflect.construct(v, args);\n              sp = _this._inst.exports.getsp(); // see comment above\n\n              storeValue(sp + 40, result);\n              mem().setUint8(sp + 48, 1);\n            } catch (err) {\n              storeValue(sp + 40, err);\n              mem().setUint8(sp + 48, 0);\n            }\n          },\n          // func valueLength(v ref) int\n          \"syscall/js.valueLength\": function syscallJsValueLength(sp) {\n            setInt64(sp + 16, parseInt(loadValue(sp + 8).length));\n          },\n          // valuePrepareString(v ref) (ref, int)\n          \"syscall/js.valuePrepareString\": function syscallJsValuePrepareString(sp) {\n            var str = encoder.encode(String(loadValue(sp + 8)));\n            storeValue(sp + 16, str);\n            setInt64(sp + 24, str.length);\n          },\n          // valueLoadString(v ref, b []byte)\n          \"syscall/js.valueLoadString\": function syscallJsValueLoadString(sp) {\n            var str = loadValue(sp + 8);\n            loadSlice(sp + 16).set(str);\n          },\n          // func valueInstanceOf(v ref, t ref) bool\n          \"syscall/js.valueInstanceOf\": function syscallJsValueInstanceOf(sp) {\n            mem().setUint8(sp + 24, loadValue(sp + 8) instanceof loadValue(sp + 16));\n          },\n          \"debug\": function debug(value) {\n            console.log(value);\n          }\n        }\n      };\n    }\n\n    _createClass(_class, [{\n      key: \"run\",\n      value: function () {\n        var _run = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(instance) {\n          var _this2 = this;\n\n          var mem, offset, strPtr, argc, argvPtrs, keys, argv;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  this._inst = instance;\n                  this._values = [// TODO: garbage collection\n                  NaN, 0, null, true, false, global, this._inst.exports.mem, this];\n                  this._refs = new Map();\n                  this.exited = false;\n                  mem = new DataView(this._inst.exports.mem.buffer); // Pass command line arguments and environment variables to WebAssembly by writing them to the linear memory.\n\n                  offset = 4096;\n\n                  strPtr = function strPtr(str) {\n                    var ptr = offset;\n                    new Uint8Array(mem.buffer, offset, str.length + 1).set(encoder.encode(str + \"\\0\"));\n                    offset += str.length + (8 - str.length % 8);\n                    return ptr;\n                  };\n\n                  argc = this.argv.length;\n                  argvPtrs = [];\n                  this.argv.forEach(function (arg) {\n                    argvPtrs.push(strPtr(arg));\n                  });\n                  keys = Object.keys(this.env).sort();\n                  argvPtrs.push(keys.length);\n                  keys.forEach(function (key) {\n                    argvPtrs.push(strPtr(\"\".concat(key, \"=\").concat(_this2.env[key])));\n                  });\n                  argv = offset;\n                  argvPtrs.forEach(function (ptr) {\n                    mem.setUint32(offset, ptr, true);\n                    mem.setUint32(offset + 4, 0, true);\n                    offset += 8;\n                  });\n\n                  this._inst.exports.run(argc, argv);\n\n                  if (this.exited) {\n                    this._resolveExitPromise();\n                  }\n\n                  _context.next = 19;\n                  return this._exitPromise;\n\n                case 19:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function run(_x) {\n          return _run.apply(this, arguments);\n        }\n\n        return run;\n      }()\n    }, {\n      key: \"_resume\",\n      value: function _resume() {\n        if (this.exited) {\n          throw new Error(\"Go program has already exited\");\n        }\n\n        this._inst.exports.resume();\n\n        if (this.exited) {\n          this._resolveExitPromise();\n        }\n      }\n    }, {\n      key: \"_makeFuncWrapper\",\n      value: function _makeFuncWrapper(id) {\n        var go = this;\n        return function () {\n          var event = {\n            id: id,\n            this: this,\n            args: arguments\n          };\n          go._pendingEvent = event;\n\n          go._resume();\n\n          return event.result;\n        };\n      }\n    }]);\n\n    return _class;\n  }();\n\n  global.Go.wasmPath = isNodeJS ? global.fs.readFileSync(require(\"path\").join(__dirname, \"tupelo.wasm\")) : \"/tupelo.wasm\";\n  global.Go.readyPromise = new Promise(function (resolve) {\n    global.Go.readyResolver = resolve;\n  });\n})();\n\nvar runner = {\n  run: function () {\n    var _run2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var isNodeJS, go, result, wasmResp, wasm;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              log('outer go.run');\n              isNodeJS = global.process && global.process.title.indexOf(\"node\") !== -1;\n              go = new Go();\n              go.env = Object.assign({\n                TMPDIR: require(\"os\").tmpdir()\n              }, process.env); // go.exit = process.exit;\n\n              if (!isNodeJS) {\n                _context2.next = 11;\n                break;\n              }\n\n              _context2.next = 7;\n              return WebAssembly.instantiate(Go.wasmPath, go.importObject);\n\n            case 7:\n              result = _context2.sent;\n              process.on(\"exit\", function (code) {\n                // Node.js exits if no event handler is pending\n                Go.exit();\n\n                if (code === 0 && !go.exited) {\n                  // deadlock, make Go print error and stack traces\n                  go._pendingEvent = {\n                    id: 0\n                  };\n\n                  go._resume();\n                }\n              });\n              _context2.next = 30;\n              break;\n\n            case 11:\n              log(\"is not nodejs\");\n\n              if (!(typeof WebAssembly.instantiateStreaming == 'function')) {\n                _context2.next = 18;\n                break;\n              }\n\n              _context2.next = 15;\n              return WebAssembly.instantiateStreaming(fetch(Go.wasmPath), go.importObject);\n\n            case 15:\n              result = _context2.sent;\n              _context2.next = 30;\n              break;\n\n            case 18:\n              log('fetching wasm');\n              _context2.next = 21;\n              return fetch(Go.wasmPath);\n\n            case 21:\n              wasmResp = _context2.sent;\n              log('turning it into an array buffer');\n              _context2.next = 25;\n              return wasmResp.arrayBuffer();\n\n            case 25:\n              wasm = _context2.sent;\n              log('instantiating');\n              _context2.next = 29;\n              return WebAssembly.instantiate(wasm, go.importObject);\n\n            case 29:\n              result = _context2.sent;\n\n            case 30:\n              log('inner go.run');\n              return _context2.abrupt(\"return\", go.run(result.instance));\n\n            case 32:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    function run() {\n      return _run2.apply(this, arguments);\n    }\n\n    return run;\n  }(),\n  ready: function () {\n    var _ready = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(path) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              return _context3.abrupt(\"return\", global.Go.readyPromise);\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    function ready(_x2) {\n      return _ready.apply(this, arguments);\n    }\n\n    return ready;\n  }(),\n  populate: function populate(obj, reqs) {\n    return global.populateLibrary(obj, reqs);\n  }\n};\nmodule.exports = runner;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 532;","var _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _assertThisInitialized = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/inherits\");\n\nvar WS = require('libp2p-websockets');\n\nvar Multiplex = require('pull-mplex');\n\nrequire('libp2p-crypto-secp256k1'); // no need to do anything with this, just require it.\n\n\nvar SECIO = require('libp2p-secio');\n\nvar Bootstrap = require('libp2p-bootstrap');\n\nvar KadDHT = require('libp2p-kad-dht');\n\nvar libp2p = require('libp2p');\n\nvar mergeOptions = require('merge-options');\n\nvar PeerInfo = require('peer-info');\n\nvar crypto = require('libp2p-crypto').keys;\n\nvar PeerId = require('peer-id');\n\nvar TCP = require('libp2p-tcp');\n\nvar util = require('util');\n\nvar log = require('debug')(\"p2p\");\n\nvar RoutingDiscovery = require('./discovery');\n\nvar isNodeJS = global.process && global.process.title.indexOf(\"node\") !== -1;\n\nvar TupeloP2P =\n/*#__PURE__*/\nfunction (_libp2p) {\n  \"use strict\";\n\n  _inherits(TupeloP2P, _libp2p);\n\n  function TupeloP2P(_options) {\n    var _this;\n\n    _classCallCheck(this, TupeloP2P);\n\n    var routingDiscoverer = new RoutingDiscovery({\n      namespace: 'tupelo-transaction-gossipers'\n    });\n    var defaults = {\n      switch: {\n        blacklistTTL: 2 * 60 * 1e3,\n        // 2 minute base\n        blackListAttempts: 5,\n        // back off 5 times\n        maxParallelDials: 100,\n        maxColdCalls: 25,\n        dialTimeout: 20e3\n      },\n      modules: {\n        transport: [WS],\n        streamMuxer: [Multiplex],\n        connEncryption: [SECIO],\n        peerDiscovery: [Bootstrap, routingDiscoverer.stub()],\n        dht: KadDHT\n      },\n      config: {\n        peerDiscovery: {\n          autoDial: true,\n          bootstrap: {\n            enabled: true\n          }\n        },\n        dht: {\n          kBucketSize: 20,\n          // taken from https://github.com/ipfs/js-ipfs/blob/master/src/core/runtime/libp2p-nodejs.js\n          enabled: true,\n          randomWalk: {\n            enabled: false\n          }\n        },\n        EXPERIMENTAL: {\n          pubsub: true\n        }\n      }\n    };\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TupeloP2P).call(this, mergeOptions(defaults, _options)));\n    routingDiscoverer.node = _assertThisInitialized(_this);\n\n    _this.once('peer:connect', function () {\n      routingDiscoverer.start(function () {\n        log(\"discovery started\");\n      });\n    });\n\n    _this.once('stop', function () {\n      routingDiscoverer.stop(function () {\n        log(\"routing stopped\");\n      });\n    });\n\n    _this._routingDiscoverer = routingDiscoverer;\n    return _this;\n  }\n\n  return TupeloP2P;\n}(libp2p);\n\nmodule.exports.TupeloP2P = TupeloP2P;\n\nmodule.exports.CreateNode =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(options) {\n    var resolve, reject, p;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!options) {\n              options = {};\n            }\n\n            p = new Promise(function (res, rej) {\n              resolve = res;\n              reject = rej;\n            });\n            crypto.generateKeyPair('secp256k1',\n            /*#__PURE__*/\n            function () {\n              var _ref2 = _asyncToGenerator(\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee(err, key) {\n                var peerID, peerInfo, node;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        if (err) {\n                          console.error(\"error generating key pair \", err);\n                          reject(err);\n                        }\n\n                        _context.next = 3;\n                        return util.promisify(PeerId.createFromPrivKey)(key.bytes);\n\n                      case 3:\n                        peerID = _context.sent;\n                        peerInfo = new PeerInfo(peerID);\n\n                        if (isNodeJS) {\n                          // nodejs requires that you listen to the address to be able\n                          // to dial it, the browser *can't* listen to an address.\n                          peerInfo.multiaddrs.add('/ip4/0.0.0.0/tcp/0/ws');\n                          peerInfo.multiaddrs.add('/ip4/0.0.0.0/tcp/0/wss');\n                        }\n\n                        options.peerInfo = peerInfo;\n                        node = new TupeloP2P(options);\n                        log(\"peerIdStr \", peerID.toB58String());\n                        resolve(node);\n\n                      case 10:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x2, _x3) {\n                return _ref2.apply(this, arguments);\n              };\n            }());\n            return _context2.abrupt(\"return\", p);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();","import { createStore } from 'react-hooks-global-state';\nimport {EcdsaKey, ChainTree} from 'tupelo-wasm-sdk';\nimport { getCommunity } from './community';\n\nlet resolve:Function\nexport const globalStorageStarted = new Promise((res)=> {resolve = res})\n\ninterface IGlobalState {\n    userKey?:EcdsaKey\n    userTree?:ChainTree\n}\n\ninterface IAction {\n    type:\"setKey\"|\"setTree\"\n    userKey?:EcdsaKey\n    userTree?:ChainTree\n}\n\nconst reducer = (state:IGlobalState, action:IAction) => {\n    switch (action.type) {\n      case 'setKey': return {...state, userKey: action.userKey}\n      case 'setTree': return { ...state, userTree: action.userTree };\n      default: return state;\n    }\n  };\n\nconst initialState:IGlobalState = {\n    userTree:undefined,\n    userKey:undefined,\n};\nconst persistentReducer = (state:IGlobalState, action:IAction) => {\n    let mutated = reducer(state,action)\n\n    if (mutated.userKey !== undefined && mutated.userKey.privateKey !== undefined) {\n        sessionStorage.setItem('userKey', Buffer.from(mutated.userKey.privateKey).toString('hex'))\n    }\n    if (mutated.userTree !== undefined) {\n        mutated.userTree.id().then((id)=> {\n            if (id == null) {\n                throw new Error(\"unknown id\")\n            }\n            sessionStorage.setItem('userTreeDid', id)\n        }, (err)=> {\n            throw err\n        })\n    }\n\treturn mutated\n}\n\nexport const { GlobalStateProvider, dispatch, useGlobalState } = createStore(persistentReducer, initialState)\n\nasync function setStoredState() {\n    let keyString = sessionStorage.getItem('userKey')\n    if (!keyString || keyString === \"\") {\n        resolve()\n        return\n    }\n    let key = await EcdsaKey.fromBytes(Buffer.from(keyString, 'hex'))\n\n    let userTreeDid = sessionStorage.getItem('userTreeDid')\n    if (userTreeDid == null) {\n        resolve()\n        throw new Error(\"had a userKey but no user Tree\")\n    }\n    let community = await getCommunity()\n    let tip = await community.getTip(userTreeDid)\n\n    let tree = new ChainTree({\n        tip: tip,\n        store: community.blockservice,\n        key:key,\n    })\n    dispatch({\n        type: \"setKey\",\n        userKey: key,\n    })\n    dispatch({\n        type:\"setTree\",\n        userTree: tree,\n    })\n    resolve()\n}\nsetStoredState()","var _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _assertThisInitialized = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _asyncToGenerator = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar EventEmitter = require('events').EventEmitter;\n\nvar debug = require('debug');\n\nvar mafmt = require('mafmt');\n\nvar CID = require('cids');\n\nvar multihashing = require('multihashing-async');\n\nvar log = debug('p2p:discovery');\nlog.error = debug('p2p:discoveryp:error');\n\nfunction isIPFS(addr) {\n  try {\n    return mafmt.IPFS.matches(addr);\n  } catch (e) {\n    return false;\n  }\n} // Go function is:\n// func nsToCid(ns string) (cid.Cid, error) {\n// \th, err := mh.Sum([]byte(ns), mh.SHA2_256, -1)\n// \tif err != nil {\n// \t\treturn cid.Undef, err\n// \t}\n// \treturn cid.NewCidV1(cid.Raw, h), nil\n// }\n\n\nfunction nsToCid(_x) {\n  return _nsToCid.apply(this, arguments);\n}\n\nfunction _nsToCid() {\n  _nsToCid = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(ns) {\n    var hash;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return multihashing(Buffer.from(ns), 'sha2-256');\n\n          case 2:\n            hash = _context2.sent;\n            return _context2.abrupt(\"return\", new CID(1, 'raw', hash));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _nsToCid.apply(this, arguments);\n}\n\nvar RoutingStub =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  \"use strict\";\n\n  _inherits(RoutingStub, _EventEmitter);\n\n  function RoutingStub(options) {\n    var _this;\n\n    _classCallCheck(this, RoutingStub);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RoutingStub).call(this));\n    _this.parent = options.parent;\n    return _this;\n  }\n\n  _createClass(RoutingStub, [{\n    key: \"start\",\n    value: function start(callback) {\n      // don't call the parent for start\n      // because we'll need new information\n      callback();\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(callback) {\n      this.parent.stop(callback);\n    }\n  }]);\n\n  return RoutingStub;\n}(EventEmitter);\n\nvar RoutingDiscovery =\n/*#__PURE__*/\nfunction (_EventEmitter2) {\n  \"use strict\";\n\n  _inherits(RoutingDiscovery, _EventEmitter2);\n\n  function RoutingDiscovery(options) {\n    var _this2;\n\n    _classCallCheck(this, RoutingDiscovery);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(RoutingDiscovery).call(this));\n\n    if (!options.namespace) {\n      throw new Error(\"you must provide a namespace to the RoutingDiscovery\");\n    }\n\n    _this2._stub = new RoutingStub({\n      parent: _assertThisInitialized(_this2)\n    });\n    _this2._namespace = options.namespace;\n    _this2._interval = options.interval || 2000;\n    _this2._timer = null;\n    return _this2;\n  } // stub is used so that there is something for the node to listen to for the 'peer' event\n  // but we can't actually spin up this routing discovery until we have a node\n\n\n  _createClass(RoutingDiscovery, [{\n    key: \"stub\",\n    value: function stub() {\n      return this._stub;\n    }\n  }, {\n    key: \"start\",\n    value: function start(callback) {\n      var _this3 = this;\n\n      if (!this.node) {\n        throw new Error(\"you must set node on this discoverer before starting\");\n      }\n\n      if (!this.node.isStarted()) {\n        throw new Error(\"you must start the node before discovering\");\n      }\n\n      if (this._timer) {\n        return process.nextTick(function () {\n          return callback();\n        });\n      }\n\n      this._timer = setInterval(function () {\n        return _this3._discoverContentPeers();\n      }, this._interval);\n      process.nextTick(function () {\n        callback();\n\n        _this3._discoverContentPeers();\n      });\n    }\n  }, {\n    key: \"_discoverContentPeers\",\n    value: function () {\n      var _discoverContentPeers2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this4 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this._nsCid) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _context.next = 3;\n                return nsToCid(this._namespace);\n\n              case 3:\n                this._nsCid = _context.sent;\n\n              case 4:\n                this.node.contentRouting.findProviders(this._nsCid, 1800, function (err, providers) {\n                  if (err) {\n                    if (!_this4.node.isStarted()) {\n                      _this4.stop(function () {\n                        console.error(\"self-stopping the discoverer, because the node is stopped\");\n                      });\n                    }\n\n                    if (err.message === \"no providers found\") {\n                      return; // we don't want to throw an error when we just haven't found the providers yet\n                    }\n\n                    if (err.message === 'Callback function \"anonymous\" timed out.') {\n                      console.error(\"timeout on findProviders\");\n                      return; // do nothing here either, don't want to blow up due to a timeout\n                    }\n\n                    console.error(\"throwing an error: \", err.message);\n                    throw err;\n                  }\n\n                  var _iteratorNormalCompletion = true;\n                  var _didIteratorError = false;\n                  var _iteratorError = undefined;\n\n                  try {\n                    for (var _iterator = providers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                      var peerInfo = _step.value;\n\n                      _this4.stub().emit('peer', peerInfo);\n                    }\n                  } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                  } finally {\n                    try {\n                      if (!_iteratorNormalCompletion && _iterator.return != null) {\n                        _iterator.return();\n                      }\n                    } finally {\n                      if (_didIteratorError) {\n                        throw _iteratorError;\n                      }\n                    }\n                  }\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _discoverContentPeers() {\n        return _discoverContentPeers2.apply(this, arguments);\n      }\n\n      return _discoverContentPeers;\n    }()\n  }, {\n    key: \"stop\",\n    value: function stop(callback) {\n      process.nextTick(callback);\n\n      if (this._timer) {\n        clearInterval(this._timer);\n        this._timer = null;\n      }\n    }\n  }]);\n\n  return RoutingDiscovery;\n}(EventEmitter);\n\nexports = module.exports = RoutingDiscovery;\nexports.tag = 'routing';","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _this = this;\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tupelo_1 = require(\"./tupelo\");\n/**\n * EcdsaKey defines the public/private key-pairs used to interact with Tupelo.\n * It also supportes generating new keys either randomly or through a passphrase.\n * @public\n */\n\n\nvar EcdsaKey =\n/*#__PURE__*/\nfunction () {\n  function EcdsaKey(publicKeyBits, privateKeyBits) {\n    _classCallCheck(this, EcdsaKey);\n\n    this.publicKey = publicKeyBits;\n    this.privateKey = privateKeyBits;\n  }\n\n  _createClass(EcdsaKey, [{\n    key: \"keyAddr\",\n    value: function keyAddr() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", tupelo_1.Tupelo.ecdsaPubkeyToDid(this.publicKey));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }]);\n\n  return EcdsaKey;\n}();\n/**\n * Generate a new keypair with random bits.\n * @public\n */\n\n\nEcdsaKey.generate = function () {\n  return __awaiter(_this, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var pair, key;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return tupelo_1.Tupelo.generateKey();\n\n          case 2:\n            pair = _context2.sent;\n            key = new EcdsaKey(pair[1], pair[0]);\n            return _context2.abrupt(\"return\", key);\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n};\n/**\n * Generate a new key based on a passphrase and salt (this goes through the Warp wallet treatment {@link https://keybase.io/warp/warp_1.0.9_SHA256_a2067491ab582bde779f4505055807c2479354633a2216b22cf1e92d1a6e4a87.html})\n */\n\n\nEcdsaKey.passPhraseKey = function (phrase, salt) {\n  return __awaiter(_this, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3() {\n    var pair;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return tupelo_1.Tupelo.passPhraseKey(phrase, salt);\n\n          case 2:\n            pair = _context3.sent;\n            return _context3.abrupt(\"return\", new EcdsaKey(pair[1], pair[0]));\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n};\n\nEcdsaKey.fromBytes = function (bytes) {\n  return __awaiter(_this, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4() {\n    var pair;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return tupelo_1.Tupelo.keyFromPrivateBytes(bytes);\n\n          case 2:\n            pair = _context4.sent;\n            return _context4.abrupt(\"return\", new EcdsaKey(pair[1], pair[0]));\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n};\n\nexports.EcdsaKey = EcdsaKey;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/inherits\");\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__export(require(\"./chaintree\"));\n\n__export(require(\"./dag/dag\"));\n\nvar cids_1 = __importDefault(require(\"cids\"));\n/**\n * This is a helper class so that CID descriptions can be used in other repos.\n * @public\n */\n\n\nvar CID =\n/*#__PURE__*/\nfunction (_cids_1$default) {\n  _inherits(CID, _cids_1$default);\n\n  function CID(version, codec, multihash, multibaseName) {\n    _classCallCheck(this, CID);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CID).call(this, version, codec, multihash, multibaseName));\n  }\n\n  return CID;\n}(cids_1.default);\n\nexports.CID = CID;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _this2 = this;\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar dag_1 = require(\"./dag/dag\");\n\nvar cids_1 = __importDefault(require(\"cids\"));\n\nvar tupelo_1 = require(\"../tupelo\");\n\nvar transactions_pb_1 = require(\"tupelo-messages/transactions/transactions_pb\");\n\nvar dagCBOR = require('ipld-dag-cbor');\n/**\n * ChainTree is the main class used for interacting with the data of Tupelo.\n * See {@link https://docs.quorumcontrol.com/docs/chaintree.html} for a detailed description\n * of what a ChainTree is.\n * @public\n */\n\n\nvar ChainTree =\n/*#__PURE__*/\nfunction (_dag_1$Dag) {\n  _inherits(ChainTree, _dag_1$Dag);\n\n  /**\n   * Creates a new ChainTree\n   * @param opts - {@link IChainTreeInitializer}\n   * @public\n   */\n  function ChainTree(opts) {\n    var _this;\n\n    _classCallCheck(this, ChainTree);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ChainTree).call(this, opts.tip, opts.store));\n    _this.key = opts.key;\n    _this.store = opts.store;\n    return _this;\n  }\n  /**\n   * Returns the DID of the ChainTree\n   * @public\n   */\n\n\n  _createClass(ChainTree, [{\n    key: \"id\",\n    value: function id() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var resolveResp;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.resolve([\"id\"]);\n\n              case 2:\n                resolveResp = _context.sent;\n                return _context.abrupt(\"return\", resolveResp.value);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }]);\n\n  return ChainTree;\n}(dag_1.Dag);\n/**\n * Creates a new empty chaintree using the specified key and blockservice.\n * @param store - The {@link IBlockService} to store the new blocks in (Community exports a block service)\n * @param key - The {@link EcdsaKey} to use to name the ChainTree (this is used to create the DID)\n * @public\n */\n\n\nChainTree.newEmptyTree = function (store, key) {\n  return __awaiter(_this2, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var tip;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return tupelo_1.Tupelo.newEmptyTree(store, key.publicKey);\n\n          case 2:\n            tip = _context2.sent;\n            return _context2.abrupt(\"return\", new ChainTree({\n              key: key,\n              tip: tip,\n              store: store\n            }));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n};\n\nexports.ChainTree = ChainTree;\n\nvar setOwnershipPayload = function setOwnershipPayload(newOwnerKeys) {\n  var payload = new transactions_pb_1.SetOwnershipPayload();\n  payload.setAuthenticationList(newOwnerKeys);\n  return payload;\n};\n/**\n * returns a setOwnershipTransaction\n * @param newOwnerKeys - An array of the addresses of the new owners\n * @public\n */\n\n\nexports.setOwnershipTransaction = function (newOwnerKeys) {\n  var payload = setOwnershipPayload(newOwnerKeys);\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.SETOWNERSHIP);\n  txn.setSetOwnershipPayload(payload);\n  return txn;\n};\n\nvar setDataPayloadMaker = function setDataPayloadMaker(path, value) {\n  var cborData = dagCBOR.util.serialize(value);\n  var payload = new transactions_pb_1.SetDataPayload();\n  payload.setPath(path);\n  payload.setValue(cborData);\n  return payload;\n};\n/**\n * Returns a setDataTransaction\n * @param path - The path of the Tree to set\n * @param value - An object to set at the path (this will be CBOR encoded for you).\n * @public\n */\n\n\nexports.setDataTransaction = function (path, value) {\n  var payload = setDataPayloadMaker(path, value);\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.SETDATA);\n  txn.setSetDataPayload(payload);\n  return txn;\n};\n\nvar establishTokenPayload = function establishTokenPayload(name, maximum) {\n  var policy = new transactions_pb_1.TokenMonetaryPolicy();\n  policy.setMaximum(maximum);\n  var payload = new transactions_pb_1.EstablishTokenPayload();\n  payload.setName(name);\n  payload.setMonetaryPolicy(policy);\n  return payload;\n};\n/**\n * Returns a new establishTokenTransaction which is used to setup the monetary policy\n * of a new token on a ChainTree\n * @public\n */\n\n\nexports.establishTokenTransaction = function (name, maximum) {\n  var payload = establishTokenPayload(name, maximum);\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.ESTABLISHTOKEN);\n  txn.setEstablishTokenPayload(payload);\n  return txn;\n};\n\nvar mintTokenPayload = function mintTokenPayload(name, amount) {\n  var payload = new transactions_pb_1.MintTokenPayload();\n  payload.setName(name);\n  payload.setAmount(amount);\n  return payload;\n};\n/**\n * @public\n */\n\n\nexports.mintTokenTransaction = function (name, amount) {\n  var payload = mintTokenPayload(name, amount);\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.MINTTOKEN);\n  txn.setMintTokenPayload(payload);\n  return txn;\n};\n\nvar sendTokenPayload = function sendTokenPayload(sendId, name, amount, destinationChainId) {\n  var payload = new transactions_pb_1.SendTokenPayload();\n  payload.setId(sendId);\n  payload.setName(name);\n  payload.setAmount(amount);\n  payload.setDestination(destinationChainId);\n  return payload;\n};\n/**\n * @public\n */\n\n\nexports.sendTokenTransaction = function (sendId, name, amount, destinationChainId) {\n  var payload = sendTokenPayload(sendId, name, amount, destinationChainId);\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.SENDTOKEN);\n  txn.setSendTokenPayload(payload);\n  return txn;\n};\n\nvar receiveTokenPayload = function receiveTokenPayload(sendId, tip, signature, leaves) {\n  var payload = new transactions_pb_1.ReceiveTokenPayload();\n  payload.setSendTokenTransactionId(sendId);\n  payload.setTip(tip);\n  payload.setSignature(signature);\n  payload.setLeavesList(leaves);\n  return payload;\n};\n/**\n * @public\n */\n\n\nexports.receiveTokenTransaction = function (sendId, tip, signature, leaves) {\n  var payload = receiveTokenPayload(sendId, tip, signature, leaves);\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.RECEIVETOKEN);\n  txn.setReceiveTokenPayload(payload);\n  return txn;\n};\n/**\n * This function is useful if you have the full payload from the send token sent to you\n * no need to deconstruct and the reconstruct the payload. Often wallets will send this payload as base64.\n *\n * @param payload - The receive token payload\n * @public\n */\n\n\nexports.receiveTokenTransactionFromPayload = function (payload) {\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.RECEIVETOKEN);\n  var tip = new cids_1.default(payload.getTip());\n  var sig = payload.getSignature();\n\n  if (sig === undefined) {\n    throw new Error(\"signature must be defined\");\n  }\n\n  var leaves = payload.getLeavesList_asU8();\n\n  if (leaves === undefined) {\n    throw new Error('leaves must be defined');\n  }\n\n  txn.setReceiveTokenPayload(receiveTokenPayload(payload.getTransactionId(), tip.buffer, sig, leaves));\n  return txn;\n};\n\nexports.default = ChainTree;"],"sourceRoot":""}