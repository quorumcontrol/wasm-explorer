(window.webpackJsonpexplorer=window.webpackJsonpexplorer||[]).push([[0],{1008:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var a=n(448);t.defaultNotaryGroup=a.defaultNotaryGroup,r(n(449)),r(n(1081)),r(n(450))},1057:function(e,t){},1059:function(e,t){},1081:function(e,t,n){"use strict";var r=n(3),a=n(4),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(74)),o=i(n(12)).default("wrappedbitswap"),s=function(){function e(t){r(this,e),this.bitswap=t}return a(e,[{key:"get",value:function(e){return c.default.promisify(this.bitswap.get.bind(this.bitswap))(e)}},{key:"put",value:function(e){var t,n,r=new Promise(function(e,r){t=e,n=r});return o("bitswap put: ",this.bitswap.put.toString()),this.bitswap.put(e,function(e){e&&n(e),t()}),r}},{key:"delete",value:function(e){return new Promise(function(e,t){t(new Error("can't delete from bitswap"))})}},{key:"start",value:function(){return c.default.promisify(this.bitswap.start.bind(this.bitswap))}},{key:"stop",value:function(){return c.default.promisify(this.bitswap.stop.bind(this.bitswap))}},{key:"wantlistForPeer",value:function(e){return this.bitswap.wantlistForPeer(e)}},{key:"ledgerForPeer",value:function(e){return this.bitswap.ledgerForPeer(e)}},{key:"getMany",value:function(e){return c.default.promisify(this.bitswap.getMany.bind(this.bitswap))(e)}},{key:"putMany",value:function(e){return c.default.promisify(this.bitswap.putMany.bind(this.bitswap))(e)}},{key:"getWantlist",value:function(){return this.bitswap.getWantlist()}},{key:"peers",value:function(){return this.bitswap.peers()}},{key:"stat",value:function(){return this.bitswap.stat()}}]),e}();t.WrappedBitswap=s},1093:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(31),c=n.n(i),o=(n(502),n(503),n(1138)),s=n(1137),u=n(481),f=n.n(u),l=n(492),d=Object(l.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:f.a.A400},background:{default:"#fff"}}}),p=n(7),b=n(25),v=n(1133),m=n(1134),h=n(200),y=n(123),w=n(1135),k=n(1136),x=n(77),g=n(1097),E=n(6),T=n.n(E),O=n(27),j=n(24),_=n(1095),P=n(55),S=n(1128),C=n(1129),D=n(1130),K=n(1131),N=n(1132),I=n(1098),A=Object(I.a)(function(e){return{preFormatted:{whiteSpace:"pre"}}}),M=function(e){var t,n=e.label,r=e.value,i=e.path,c=e.did,o=A();return t=r&&j.CID.isCID(r)?a.a.createElement(P.a,{href:"/chaintrees/"+c+"?path="+i.concat(n).join("/")},"CID: ",r.toString()):a.a.createElement("code",{className:o.preFormatted},JSON.stringify(r,null,2)),a.a.createElement(S.a,null,a.a.createElement(C.a,null,n),a.a.createElement(C.a,null,t))},U=function(e){var t=e.decodedCbor,n=e.path,r=e.did;return a.a.createElement(D.a,null,a.a.createElement(K.a,null,a.a.createElement(S.a,null,a.a.createElement(C.a,null,"Key"),a.a.createElement(C.a,null,"Value"))),a.a.createElement(N.a,null,Object.keys(t).map(function(e,i){return a.a.createElement(M,{key:i,label:e,path:n,did:r,value:t[e]})})))},R=n(28),B=n(47),F=Object(R.i)(function(){var e=Object(O.a)(T.a.mark(function e(t){var n,r,i,c,o;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.did,e.prev=1,e.next=4,W(n);case 4:r=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),console.error("error fetching tree: ",e.t0),e.t0;case 11:if(i=[""],t.params.path&&(i=t.params.path.split("/")),void 0===r.tree){e.next=18;break}return e.next=16,r.tree.resolve(i);case 16:void 0!==(o=e.sent).value&&(c=o.value);case 18:return e.abrupt("return",{view:a.a.createElement(L,{did:n,path:i,fetchTreeResult:r,decodedCbor:c})});case 19:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()),G=Object(_.a)(function(e){return{pathDisplay:{padding:e.spacing(0,.5)}}}),W=function(){var e=Object(O.a)(T.a.mark(function e(t){var n,r,a;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=2;break}return e.abrupt("return",{found:!1});case 2:return e.next=4,Object(B.a)();case 4:return n=e.sent,e.prev=5,e.next=8,n.getTip(t);case 8:return r=e.sent,a=new j.ChainTree({store:n.blockservice,tip:r}),e.abrupt("return",{tree:a,found:!0});case 13:if(e.prev=13,e.t0=e.catch(5),"not found"!==e.t0){e.next=17;break}return e.abrupt("return",{found:!1});case 17:throw console.error("error getting tip: ",e.t0),e.t0;case 19:case"end":return e.stop()}},e,null,[[5,13]])}));return function(t){return e.apply(this,arguments)}}(),H=function(e){var t=e.did,n=e.path,r=G();return a.a.createElement("div",null,"Path:",n.map(function(e,i){return a.a.createElement(P.a,{key:i,className:r.pathDisplay,href:"/chaintrees/"+t+"?path="+n.slice(0,i+1).join("/")},e,"/")}))},L=function(e){var t=e.did,n=e.fetchTreeResult,r=e.path,i=e.decodedCbor,c=n;return a.a.createElement("div",null,c&&(void 0===c.found||!c.found)&&a.a.createElement("div",null,a.a.createElement(h.a,{variant:"h6"},t),""===t?"Awaiting your DID":"Not found"),c&&void 0!==c.tree&&a.a.createElement("div",null,a.a.createElement(h.a,{variant:"h6"},t),a.a.createElement("p",null,"tip: ",c.tree.tip.toString()),a.a.createElement(H,{did:t,path:r}),a.a.createElement(U,{decodedCbor:i,path:r,did:t})))},V=n(491),z=n.n(V),q=n(201),Y=n(66),J=n(487),Z=n(92),X=n(488),$=n(282),Q=n(278),ee=n(279),te=n(280),ne=n(281),re=function(e){var t=e.open,n=e.onClose,i=e.tree,c=e.tokenName,o=Object(r.useState)(0),s=Object(p.a)(o,2),u=s[0],f=s[1],l=Object(r.useState)(!1),d=Object(p.a)(l,2),b=d[0],v=d[1],m=function(){var e=Object(O.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==i){e.next=2;break}throw new Error("userTree is undefined");case 2:return v(!0),e.next=5,Object(B.a)();case 5:return t=e.sent,e.next=8,t.playTransactions(i,[Object(j.mintTokenTransaction)(c,u)]);case 8:h();case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),h=function(){f(0),v(!1),n()};return a.a.createElement($.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title"},a.a.createElement(Q.a,{id:"form-dialog-title"},"Mint Tokens"),a.a.createElement(ee.a,null,a.a.createElement(te.a,null,"Mint tokens of type ",c),a.a.createElement(y.a,{autoFocus:!0,margin:"dense",id:"amount",label:"Amount",type:"number",fullWidth:!0,onChange:function(e){f(parseInt(e.target.value,10))},value:u.toString()})),b?a.a.createElement(q.a,null):a.a.createElement(ne.a,null,a.a.createElement(Z.a,{onClick:h,color:"primary"},"Cancel"),a.a.createElement(Z.a,{onClick:m,color:"primary"},"Mint")))},ae=["tree","_tupelo","tokens"],ie=function(e){var t=e.tree,n=e.tokenName,i=Object(r.useState)(0),c=Object(p.a)(i,2),o=c[0],s=c[1],u=Object(r.useState)(null),f=Object(p.a)(u,2),l=f[0],d=f[1],b=Object(r.useState)(!0),v=Object(p.a)(b,2),m=v[0],h=v[1],y=Object(r.useState)(!1),w=Object(p.a)(y,2),k=w[0],x=w[1],g=Object(r.useState)(!1),E=Object(p.a)(g,2),j=E[0],_=E[1],P=Object(r.useState)(!1),D=Object(p.a)(P,2),K=D[0],N=D[1],I=function(){var e=Object(O.a)(T.a.mark(function e(){var r,a,i;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),r=ae.concat(n),e.next=4,t.resolve(r);case 4:if(!(a=e.sent).value.monetaryPolicy){e.next=10;break}return e.next=8,t.resolve(r.concat("monetaryPolicy"));case 8:i=e.sent,d(i.value.maximum);case 10:s(a.value.balance),h(!1);case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)(function(){k||I()});return a.a.createElement(S.a,null,a.a.createElement(C.a,null,n),a.a.createElement(C.a,null,m?a.a.createElement(q.a,null):o),a.a.createElement(C.a,null,m?a.a.createElement(q.a,null):l),a.a.createElement(C.a,null,a.a.createElement(Z.a,{onClick:function(){_(!0)}},"Mint"),a.a.createElement(Z.a,{onClick:function(){N(!0)}},"Send"),a.a.createElement(re,{open:j,onClose:function(){_(!1),x(!1)},tree:t,tokenName:n}),a.a.createElement(X.a,{open:K,onClose:function(){N(!1),x(!1)},tree:t,tokenName:n})))},ce=function(e){var t=e.tree,n=Object(r.useState)({}),i=Object(p.a)(n,2),c=i[0],o=i[1],s=Object(r.useState)(!1),u=Object(p.a)(s,2),f=u[0],l=u[1],d=function(){var e=Object(O.a)(T.a.mark(function e(){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resolve(ae);case 2:(n=e.sent).value&&(console.log("tokens resp: ",n),l(!0),o(n.value));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)(function(){f||d()}),a.a.createElement(D.a,null,a.a.createElement(K.a,null,a.a.createElement(S.a,null,a.a.createElement(C.a,null,"Name"),a.a.createElement(C.a,null,"Balance"),a.a.createElement(C.a,null,"Max"),a.a.createElement(C.a,null,"Actions"))),a.a.createElement(N.a,null,Object.keys(c).map(function(e,n){return a.a.createElement(ie,{key:n,tree:t,tokenName:e})})))},oe=n(489),se=function(e){var t=e.open,n=e.onClose,i=e.tree,c=Object(r.useState)(""),o=Object(p.a)(c,2),s=o[0],u=o[1],f=Object(r.useState)(0),l=Object(p.a)(f,2),d=l[0],b=l[1],v=Object(r.useState)(!1),m=Object(p.a)(v,2),h=m[0],w=m[1],k=function(){var e=Object(O.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==i){e.next=2;break}throw new Error("userTree is undefined");case 2:return w(!0),e.next=5,Object(B.a)();case 5:return t=e.sent,e.next=8,t.playTransactions(i,[Object(j.establishTokenTransaction)(s,d)]);case 8:x();case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),x=function(){u(""),b(0),w(!1),n()};return a.a.createElement($.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title"},a.a.createElement(Q.a,{id:"form-dialog-title"},"Establish Token"),a.a.createElement(ee.a,null,a.a.createElement(te.a,null,"Establish a token with a name and a monetary policy."),a.a.createElement(y.a,{autoFocus:!0,margin:"dense",id:"name",label:"Token Name",fullWidth:!0,onChange:function(e){u(e.target.value)},value:s}),a.a.createElement(y.a,{margin:"dense",id:"maximum",label:"Maximum Amount",type:"number",fullWidth:!0,onChange:function(e){b(parseInt(e.target.value,10))},value:d})),h?a.a.createElement(q.a,null):a.a.createElement(ne.a,null,a.a.createElement(Z.a,{onClick:x,color:"primary"},"Cancel"),a.a.createElement(Z.a,{onClick:k,color:"primary"},"Establish")))},ue=Object(R.g)({"/":Object(R.e)(function(){var e=Object(O.a)(T.a.mark(function e(t,n){var r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.c;case 2:if(void 0!==(r=n).id){e.next=5;break}return e.abrupt("return",Object(R.h)("/login"));case 5:return e.abrupt("return",Object(R.i)({view:a.a.createElement(fe,{tree:r})}));case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}())}),fe=function(e){var t=e.tree,n=Object(r.useState)(!1),i=Object(p.a)(n,2),c=i[0],o=i[1],s=Object(r.useState)(!1),u=Object(p.a)(s,2),f=u[0],l=u[1],d=Object(r.useState)(""),b=Object(p.a)(d,2),v=b[0],m=b[1],h=function(){o(!1),l(!1)};return Object(r.useEffect)(function(){t.id().then(function(e){null!=e&&m(e)})}),a.a.createElement("div",null,a.a.createElement("h1",null,"Wallet"),a.a.createElement("p",null,v),a.a.createElement(x.a,{container:!0,spacing:2},a.a.createElement(x.a,{item:!0},a.a.createElement(Z.a,{variant:"outlined",onClick:function(){o(!0)}},"Establish Token")),a.a.createElement(x.a,{item:!0},a.a.createElement(Z.a,{variant:"outlined",onClick:function(){l(!0)}},"Receive Token"))),a.a.createElement(ce,{tree:t}),a.a.createElement(se,{open:c,onClose:h,tree:t}),a.a.createElement(oe.a,{open:f,onClose:h,tree:t}))},le=n(122),de=Object(I.a)(function(e){return{root:{padding:e.spacing(3,2)},title:Object(b.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),grow:{flexGrow:1},search:{marginLeft:e.spacing(3)},searchIcon:{color:"white"}}}),pe=Object(R.g)({"/":Object(R.i)({view:a.a.createElement("div",null,"Awaiting your DID")}),"/chaintrees/:did":F,"/login":J.a,"/wallet":ue}),be=function(){var e=de(),t=Object(r.useState)(""),n=Object(p.a)(t,2),i=n[0],c=n[1],o=Object(P.e)();return window.Community=j.Community,a.a.createElement(v.a,{position:"static"},a.a.createElement(m.a,null,a.a.createElement(h.a,{className:e.title,variant:"h6",noWrap:!0},"ChainTree Explorer"),a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i&&""!==i&&o.navigate("/chaintrees/"+i)}},a.a.createElement(y.a,{className:e.search,id:"did",label:"search...",type:"search",variant:"filled",InputProps:{startAdornment:a.a.createElement(w.a,{position:"start"},a.a.createElement(z.a,{className:e.searchIcon}))},value:i,onChange:function(e){c(e.target.value)}}))))},ve=function(){var e=de(),t=Object(Y.d)("userTree"),n=Object(p.a)(t,1)[0];return a.a.createElement(k.a,{maxWidth:"lg"},a.a.createElement(P.c,{routes:pe,context:n,history:Object(le.b)()},a.a.createElement(be,null),a.a.createElement(x.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2},a.a.createElement(x.a,{item:!0,xs:12},a.a.createElement(g.a,{className:e.root},a.a.createElement(P.b,{render:me},a.a.createElement(r.Suspense,{fallback:a.a.createElement(q.a,null)},a.a.createElement(P.d,null))))))))},me=function(e){return a.a.createElement("h1",null,"NotFound")},he=window.location.pathname;console.log("subDirectory ",he),"/"!==he&&(console.log("setting wasmpath to: ",he+"/tupelo.wasm"),Go.setWasmPath(he+"/tupelo.wasm"));var ye=function(){return a.a.createElement(Y.a,null,a.a.createElement(s.a,{theme:d},a.a.createElement(o.a,null),a.a.createElement(ve,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(1092);c.a.render(a.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},149:function(e,t,n){"use strict";(function(e){var r=n(6),a=n(3),i=n(4),c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(c,o)}s((r=r.apply(e,t||[])).next())})},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s,u,f=o(n(35)),l=n(524),d=n(219),p=n(329),b=function(){function e(){a(this,e),this._populated=!1}return i(e,[{key:"generateKey",value:function(){return new Promise(function(e,t){})}},{key:"passPhraseKey",value:function(e,t){return new Promise(function(e,t){})}},{key:"keyFromPrivateBytes",value:function(e){return new Promise(function(e,t){})}},{key:"ecdsaPubkeyToDid",value:function(e){return new Promise(function(e,t){})}},{key:"ecdsaPubkeyToAddress",value:function(e){return new Promise(function(e,t){})}},{key:"getCurrentState",value:function(e){return new Promise(function(e,t){})}},{key:"newEmptyTree",value:function(e,t){return new Promise(function(e,t){})}},{key:"playTransactions",value:function(e){return new Promise(function(e,t){})}},{key:"tokenPayloadForTransaction",value:function(e){return new Promise(function(e,t){})}}]),e}();!function(e){var t=new b;e.get=function(){return c(this,void 0,void 0,r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._populated){e.next=2;break}return e.abrupt("return",t);case 2:return l.run("./main.wasm"),e.next=5,l.ready();case 5:return l.populate(t,{cids:f.default,"ipfs-block":n(157)}),t._populated=!0,e.abrupt("return",t);case 8:case"end":return e.stop()}},e)}))}}(s||(s={})),function(t){t.generateKey=function(){return c(this,void 0,void 0,r.mark(function e(){var t;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get();case 2:return t=e.sent,e.abrupt("return",t.generateKey());case 4:case"end":return e.stop()}},e)}))},t.passPhraseKey=function(e,t){return c(this,void 0,void 0,r.mark(function n(){var a;return r.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.get();case 2:return a=n.sent,n.abrupt("return",a.passPhraseKey(e,t));case 4:case"end":return n.stop()}},n)}))},t.keyFromPrivateBytes=function(e){return c(this,void 0,void 0,r.mark(function t(){var n;return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.get();case 2:return n=t.sent,t.abrupt("return",n.keyFromPrivateBytes(e));case 4:case"end":return t.stop()}},t)}))},t.ecdsaPubkeyToDid=function(e){return c(this,void 0,void 0,r.mark(function t(){var n;return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.get();case 2:return n=t.sent,t.abrupt("return",n.ecdsaPubkeyToDid(e));case 4:case"end":return t.stop()}},t)}))},t.ecdsaPubkeyToAddress=function(e){return c(this,void 0,void 0,r.mark(function t(){var n;return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.get();case 2:return n=t.sent,t.abrupt("return",n.ecdsaPubkeyToAddress(e));case 4:case"end":return t.stop()}},t)}))},t.getCurrentState=function(e){return c(this,void 0,void 0,r.mark(function t(){var n,a;return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.get();case 2:return n=t.sent,t.prev=3,t.next=6,n.getCurrentState(e);case 6:return a=t.sent,t.abrupt("return",p.CurrentState.deserializeBinary(a));case 10:throw t.prev=10,t.t0=t.catch(3),t.t0;case 13:case"end":return t.stop()}},t,null,[[3,10]])}))},t.newEmptyTree=function(e,t){return c(this,void 0,void 0,r.mark(function n(){var a;return r.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.get();case 2:return a=n.sent,n.abrupt("return",a.newEmptyTree(e,t));case 4:case"end":return n.stop()}},n)}))},t.tokenPayloadForTransaction=function(e){return c(this,void 0,void 0,r.mark(function t(){var n,a;return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.get();case 2:return n=t.sent,t.next=5,n.tokenPayloadForTransaction({blockService:e.blockService,tip:e.tip,tokenName:e.tokenName,sendId:e.sendId,jsSendTxSig:e.signature.serializeBinary()});case 5:return a=t.sent,t.abrupt("return",d.TokenPayload.deserializeBinary(a));case 7:case"end":return t.stop()}},t)}))},t.playTransactions=function(t,n,a,i){return c(this,void 0,void 0,r.mark(function c(){var o,u,l,d,b,v,m,h,y,w,k,x,g,E;return r.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!=a.key){r.next=2;break}throw new Error("playing transactions on a tree requires the tree to have a private key, use tree.key = <ecdsaKey>");case 2:return r.next=4,s.get();case 4:for(o=r.sent,u=new Array,l=!0,d=!1,b=void 0,r.prev=9,v=i[Symbol.iterator]();!(l=(m=v.next()).done);l=!0)h=m.value,y=h.serializeBinary(),u=u.concat(y);r.next=17;break;case 13:r.prev=13,r.t0=r.catch(9),d=!0,b=r.t0;case 17:r.prev=17,r.prev=18,l||null==v.return||v.return();case 20:if(r.prev=20,!d){r.next=23;break}throw b;case 23:return r.finish(20);case 24:return r.finish(17);case 25:if(w=a.store,0!=(k=a.key.privateKey?a.key.privateKey:new Uint8Array).length){r.next=29;break}throw new Error("can only play transactions on a tree with a private key attached");case 29:return r.next=31,o.playTransactions({notaryGroup:n.serializeBinary(),publisher:t,blockService:w,privateKey:k,tip:a.tip,transactions:u});case 31:if(x=r.sent,g=p.CurrentState.deserializeBinary(x),void 0!=(E=g.getSignature())){r.next=36;break}throw new Error("empty signature received from CurrState");case 36:return a.tip=new f.default(e.from(E.getNewTip_asU8())),r.abrupt("return",g);case 38:case"end":return r.stop()}},c,null,[[9,13,17,25],[18,,20,24]])}))}}(u=t.Tupelo||(t.Tupelo={})),t.default=u}).call(this,n(2).Buffer)},24:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(149)),r(n(330)),r(n(984)),r(n(985)),r(n(1008)),r(n(455)),r(n(454))},330:function(e,t,n){"use strict";var r=n(6),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(c,o)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var i=n(614);!function(e){e.createNode=function(e){return a(this,void 0,void 0,r.mark(function t(){return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",i.CreateNode({config:{peerDiscovery:{bootstrap:{list:e.bootstrapAddresses}}}}));case 1:case"end":return t.stop()}},t)}))}}(t.p2p||(t.p2p={}))},367:function(e,t){},441:function(e,t,n){"use strict";var r=n(6),a=n(3),i=n(4),c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(c,o)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var o=n(987),s=function(){function e(t,n){a(this,e),this.tip=t,this.dagStore=new o({blockService:n})}return i(e,[{key:"get",value:function(e){return c(this,void 0,void 0,r.mark(function t(){return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.dagStore.get(e));case 1:case"end":return t.stop()}},t,this)}))}},{key:"resolve",value:function(e){return c(this,void 0,void 0,r.mark(function t(){return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.resolveAt(this.tip,e));case 1:case"end":return t.stop()}},t,this)}))}},{key:"resolveAt",value:function(e,t){return c(this,void 0,void 0,r.mark(function n(){var a,i,c;return r.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=t.join("/"),i=this.dagStore.resolve(e,a),n.prev=2,n.next=5,i.last();case 5:c=n.sent,n.next=13;break;case 8:if(n.prev=8,n.t0=n.catch(2),n.t0.message.startsWith("Object has no property")){n.next=13;break}throw n.t0;case 13:if("undefined"!==typeof c){n.next=15;break}return n.abrupt("return",{remainderPath:t,value:null});case 15:if(""==c.remainderPath){n.next=17;break}return n.abrupt("return",{remainderPath:c.remainderPath.split("/"),value:null});case 17:return n.abrupt("return",{remainderPath:[],value:c.value});case 18:case"end":return n.stop()}},n,this,[[2,8]])}))}}]),e}();t.Dag=s},448:function(e,t,n){"use strict";var r=n(6),a=this,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(c,o)}s((r=r.apply(e,t||[])).next())})},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,s=n(449),u=n(454),f=c(n(455)),l=n(330),d=c(n(12)).default("community:default");n(42).MemoryDatastore;t.defaultNotaryGroup=u.tomlToNotaryGroup('id = "testnet"\n\n# below are the community nodes running on the testnet\nBootstrapAddresses = [\n  "/dns4/3-210-47-111.ssl.quorumcontrol.com/tcp/443/wss/ipfs/16Uiu2HAmFLqDZpxvDiJZPTF3MazsH3f4AhGayCknuny121a8VzJz",\n  "/dns4/35-157-225-128.ssl.quorumcontrol.com/tcp/443/wss/ipfs/16Uiu2HAmEyHmGb7qDZ2yAzHKF8JYL7FSpTtSEauWpjaBFDdYtqBd",\n  "/dns4/54-241-183-3.ssl.quorumcontrol.com/tcp/443/wss/ipfs/16Uiu2HAmNp4pAvoGYPkTmniRzt5Y3onDCZDURdxpqHRcpbXYgvdi",\n]\n\n[[signers]]\nVerKeyHex = "0x7c1489ff8b8c8f22a8387dc0b3f387b3f48f2585e09c5a88e91f434e566662b056ca99cf5828a7a202eb6b2502b8846cb1291af4a086086d2cfe867d07e752065e8e384d8254cf57e3db3280cb5ca17f48f7471ae1cb943786bd0378bfdb609c60f6f0281d76b8579a22489f45eafa29a1db998523cdbe86300b1836fd736f9b"\nDestKeyHex = "0x0410ce0d11dcb98cbaa7b50d45b8ab3985438e7cb6af47b0f0cba15e58f9916529e406a1fbcdfd13a254e1cae220eccb196812b3847e547cd20925973550779a9a"\n\n[[signers]]\nVerKeyHex = "0x0f0ddf09f4d5bd799ea5dbed5edd4e82fa5f64122ef432eaef8520c53dfad62b2c146ab1a42f9dadf5ec3675c7a7c3d9a4287c002c1a97bc7d9504f8f8d937876e4114beb4da110258a879700d09f6e829fdd3924ce0184a14d7746ccae884ba7b509e9f8dc49bd497bf9203e6a95ad7f74c5b1097c95c7a47a4d1bd46da0321"\nDestKeyHex = "0x0486bbdca3916cede6ba65a39d625fc76936131f8b557e2ea508727b8be807af26619319a9495796eeb5a5abdf60106614b81eeae42e6e828ad9fbb04ba7c851fe"\n\n[[signers]]\nVerKeyHex = "0x01536daaa4654e03e48c143ebbea01a6a7a97516abeba3db8ef5b225e934ab855defe07200b3b5ef118cf16edec8d4e8e7fa29e0aa304f55b14aa0bbf4c3c52f278f073e4a933de52648dc3b7c0ea8bc0204034dc541385a705cf221e763f5482ed41150eaf4b3b154640e6de19a2e34f9c638ff52c8a72b5d09f3025df7641c"\nDestKeyHex = "0x0439923ba68fd9400c7148142aa052819d35fd00c798a216808719f03d9a3b623c06c69e814b8f8ffdbb9563e713e7796b950e6954085adc2af3adb8713c06b8a6"\n\n[[signers]]\nVerKeyHex = "0x145f59f7d4019a77b051c98cacb75e3ebe8c6c8e460cf8ff08874b906394c6f83e963ed1928d8e2aa453c9e6e02de381c5cc8118a33f87a45cf02f1e97cbd29308efc2f7bbaa49d8107c0a901824f4c4de44127c4476bf5fa0cb7fee073216b357cdc30274627cae6018a37033dd00e631fb051eab0642cb7a0ed049fd47d5ad"\nDestKeyHex = "0x0461a2fc33ef88281b07a1ff71b619aa584c28e5bc6be5e8b3981ab6b5017d3d2f06965b294d7c6fe9d3f9c7f2735181ce821e32d8bb5ca7fc6d5d26a8dd14107b"\n\n[[signers]]\nVerKeyHex = "0x713554805fc623b3ec668565f4074a0e1809967d2c346ece22924da799c3d8298adb0353d2360bcf28b2853616456dc459cd33b06c18c98af88541145a38cd77186f7b62b8d0f586be590f880858156a5469a9e8e3d05a3f5e4fdc61ea47d9e60b501771892c619f687b795c356755017961fab44b25af4434c42a8ddf9b3684"\nDestKeyHex = "0x04e8e38b206291a6447d074d471ca94f4e264acc187df283889ea5b27e158bfc6c85e2786b04c086b6fcaa1003659a1dc549a00411a66a883aacb58ac0fe51c0cb"\n\n[[signers]]\nVerKeyHex = "0x00e4a60d3997c07bf3df538f0010e163f4ba0fb14278841337dee9883e94b927164a2c9700b81b70df89f2d3355af35fc3f79845318d8feb48e4d3651c9e39292cf44c7fd31c467d6945bfed7d3645d4d4e9311b03f3728816ce92681c75fae11c5a1d3e017d906d4d436808983ef0f531c10ea81edd42dae9a1b039a1fa5a78"\nDestKeyHex = "0x04f3992ec14f4159d55283eae25a1cdd8ce38f5cae321ccfd17e7d631d5d27a30d4316cf59c97bb8d404dfd082a3ef64ade457c0398493cffa66c4ec152ed22908"\n\n[[signers]]\nVerKeyHex = "0x193bba05a9804ef7b4cc968720a36ac4aaa58a4ed48ce9cb2179fbb2bb24d2a84988d31be6f792d84098011405373950ea15dfdc26d3e41ce9454b6d39e3c0c3847df8c6e409a3ea600c0907d0414fc20c03ae5f6870970cdb7707c3dca871186fa97739c925b9449080035e46afdcad41a94f9fdaf3c992320390df329a365f"\nDestKeyHex = "0x04b51bfa4110e3c3dec1fa20eb716e74046b0ec16a8657256970c54a52fd9bb0bca4e57ef886ddac6d8e079129fb18baa88b0200c4f3f71c01692d638d877da0c9"\n\n[[signers]]\nVerKeyHex = "0x621732818cb7539c78562c756bc68f0dbe30f8bc6947545effc20ee6b16369a245387a252962fb9bea27adf9e3b3ff18b30101a53351e024e6dc06bbe549369e7d3ce89bb3c167fbe72b0933b5b05400f24fc6989cb6cde1bef5b6d8b363629f666743e3e85db3e022182bcebf7ce07b7304b7f22cc40b3540f4b5bef65f491b"\nDestKeyHex = "0x04718a3698c6d739f87723e266fb4b093d73256a684b49fa770bef9af9e322d8681b3dadf5bda5b3f4bb84eb82ba9f86236c1ebf6cca7f808d2547719236ca8dad"\n\n[[signers]]\nVerKeyHex = "0x7b5c97eb45b4813427f921a71b4e30ab41200307c32f6b80ca7bf7578487c81c496c877ca11f77ca8a7296d7b63460fbbdb53767824604e3068cbbcbdeb4854e43b6a85215a1ada3323543dd548a837e3db597591db1a363f65c01653118b2c00186b428ec9d1916fb451da3280d1de8c313d9210e287e9f83623ca6ae083127"\nDestKeyHex = "0x043be54e822c5a589b5e95dbe200c7ec520a689f24832e552e7842a4bcd3c31348ad2103528c29d4b53d1ccb241bf8a537d04e92b70a2248dcddb129a9ade20b94"\n'),t._getDefault=function(e){return i(a,void 0,void 0,r.mark(function n(){var a,c,u=this;return r.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!=e){n.next=6;break}return e=new f.default("default"),n.next=4,e.init({});case 4:return n.next=6,e.open();case 6:if(void 0===o){n.next=8;break}return n.abrupt("return",o.start());case 8:return n.next=10,l.p2p.createNode({bootstrapAddresses:t.defaultNotaryGroup.getBootstrapAddressesList()});case 10:return(a=n.sent).on("error",function(e){console.error("p2p error: ",e)}),a.start(function(){d("node started")}),a.once("stop",function(){return i(u,void 0,void 0,r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=void 0;case 1:case"end":return e.stop()}},e)}))}),c=new s.Community(a,t.defaultNotaryGroup,e.repo),o=c,n.abrupt("return",c.start());case 17:case"end":return n.stop()}},n)}))}},449:function(e,t,n){"use strict";(function(e){var r=n(6),a=n(3),i=n(4),c=n(18),o=n(16),s=n(19),u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(c,o)}s((r=r.apply(e,t||[])).next())})},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=f(n(17)),d=n(219),p=f(n(35)),b=n(450),v=f(n(149)),m=n(448),h=f(n(12)).default("community"),y=n(1009),w=n(1028);var k=function(t){function n(e,t,r){var i;return a(this,n),(i=c(this,o(n).call(this)))._started=!1,i.node=e,i.group=t,i.repo=r,i.bitswap=new y(i.node,i.repo.blocks),i.blockservice=new b.WrappedBlockService(new w(i.repo)),i.blockservice.setExchange(i.bitswap),i._startPromiseResolve=function(){},i._startPromiseReject=function(){},i._startPromise=new Promise(function(e){i._startPromiseResolve=e}),i}return s(n,t),i(n,[{key:"waitForStart",value:function(){return u(this,void 0,void 0,r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._startPromise);case 1:case"end":return e.stop()}},e,this)}))}},{key:"getCurrentState",value:function(e){return u(this,void 0,void 0,r.mark(function t(){return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.start();case 2:return t.next=4,this.nextUpdate();case 4:if(void 0!=this.tip){t.next=6;break}throw new Error("tip still undefined, even though community started and update received");case 6:return t.abrupt("return",v.default.getCurrentState({did:e,blockService:this.blockservice,tip:this.tip}));case 7:case"end":return t.stop()}},t,this)}))}},{key:"getTip",value:function(t){return u(this,void 0,void 0,r.mark(function n(){var a,i;return r.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getCurrentState(t);case 2:if(a=n.sent,void 0!=(i=a.getSignature())){n.next=6;break}throw new Error("undefined signature");case 6:return n.abrupt("return",new p.default(e.from(i.getNewTip_asU8())));case 7:case"end":return n.stop()}},n,this)}))}},{key:"sendTokenAndGetPayload",value:function(e,t){return u(this,void 0,void 0,r.mark(function n(){var a,i,c;return r.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=t.getSendTokenPayload(),t.getType()==d.Transaction.Type.SENDTOKEN&&void 0!==a){n.next=3;break}throw new Error("must use a send token transaction here");case 3:return n.next=5,this.playTransactions(e,[t]);case 5:if(i=n.sent,void 0!==(c=i.getSignature())){n.next=9;break}throw new Error("received undefined signature");case 9:return n.abrupt("return",v.default.tokenPayloadForTransaction({blockService:this.blockservice,tip:e.tip,tokenName:a.getName(),sendId:a.getId(),signature:c}));case 10:case"end":return n.stop()}},n,this)}))}},{key:"playTransactions",value:function(e,t){return u(this,void 0,void 0,r.mark(function n(){return r.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",v.default.playTransactions(this.node.pubsub,this.group,e,t));case 1:case"end":return n.stop()}},n,this)}))}},{key:"nextUpdate",value:function(){return u(this,void 0,void 0,r.mark(function e(){var t,n;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise(function(e,n){t=e}),this.once("tip",function(){t()}),e.abrupt("return",n);case 3:case"end":return e.stop()}},e,this)}))}},{key:"start",value:function(){return u(this,void 0,void 0,r.mark(function e(){var t=this;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._started){e.next=2;break}return e.abrupt("return",this._startPromise);case 2:if(this._started=!0,this.bitswap.start(function(){h("bitswap started")}),!this.node.isStarted()){e.next=16;break}return e.prev=5,e.next=8,this.subscribeToTips();case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(5),this._started=!1,this._startPromiseReject(e.t0);case 14:e.next=17;break;case 16:this.node.once("start",function(){return u(t,void 0,void 0,r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.subscribeToTips();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),this._started=!1,this._startPromiseReject(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,5]])}))});case 17:return this._startPromiseResolve(this),this.emit("start"),e.abrupt("return",this._startPromise);case 20:case"end":return e.stop()}},e,this,[[5,10]])}))}},{key:"subscribeToTips",value:function(){return u(this,void 0,void 0,r.mark(function t(){var n,a,i=this;return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:new Promise(function(e,t){n=e,a=t}),this.node.pubsub.subscribe(this.group.getId()+"-tips",function(t){t.data.length>0?(i.tip=new p.default(e.from(t.data)),i.emit("tip",i.tip),h("tip received: cid: ",i.tip," raw: ",t.data)):h("received null tip")},function(e){e?a(e):n()});case 2:case"end":return t.stop()}},t,this)}))}}]),n}(l.default);t.Community=k,function(e){e.getDefault=function(e){return u(this,void 0,void 0,r.mark(function t(){return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",m._getDefault(e));case 1:case"end":return t.stop()}},t)}))}}(k=t.Community||(t.Community={}))}).call(this,n(2).Buffer)},450:function(e,t,n){"use strict";var r=n(3),a=n(4),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(74)),o=function(){function e(t){r(this,e),this.blockservice=t}return a(e,[{key:"put",value:function(e){return c.default.promisify(this.blockservice.put.bind(this.blockservice))(e)}},{key:"get",value:function(e){return c.default.promisify(this.blockservice.get.bind(this.blockservice))(e)}},{key:"delete",value:function(e){return c.default.promisify(this.blockservice.delete.bind(this.blockservice))(e)}},{key:"setExchange",value:function(e){this.blockservice.setExchange(e)}},{key:"unsetExchange",value:function(){this.blockservice.unsetExchange()}},{key:"hasExchange",value:function(){return this.blockservice.hasExchange()}}]),e}();t.WrappedBlockService=o},454:function(e,t,n){"use strict";(function(e){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1029),i=r(n(1030));function c(t){return e.from(t.substr(2),"hex")}function o(e){return function(e){var t=new a.NotaryGroup;t.setId(e.id),t.setBootstrapAddressesList(e.bootstrapAddresses);var n=[],r=!0,i=!1,o=void 0;try{for(var s,u=e.signers[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var f=s.value,l=new a.PublicKeySet;l.setVerKey(c(f.verKeyHex)),l.setDestKey(c(f.destKeyHex)),n=n.concat(l)}}catch(d){i=!0,o=d}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return t.setSignersList(n),t}(function e(t){var n,r,a,i;if(t instanceof Array)return t.map(function(t){return"object"===typeof t&&(t=e(t)),t});for(r in n={},t)Object.prototype.hasOwnProperty.call(t,r)&&(a=(r.charAt(0).toLowerCase()+r.slice(1)||r).toString(),((i=t[r])instanceof Array||null!==i&&i.constructor===Object)&&(i=e(i)),n[a]=i);return n}(i.default.parse(e)))}t.tomlToNotaryGroup=o,t.default=o}).call(this,n(2).Buffer)},455:function(e,t,n){"use strict";var r=n(6),a=n(3),i=n(4),c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(c,o)}s((r=r.apply(e,t||[])).next())})},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(74)),u=n(1033),f=function(){function e(t,n){a(this,e),this.repo=new u(t,n)}return i(e,[{key:"init",value:function(e){return c(this,void 0,void 0,r.mark(function t(){return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.promisify(this.repo.init.bind(this.repo))(e));case 1:case"end":return t.stop()}},t,this)}))}},{key:"open",value:function(){return c(this,void 0,void 0,r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.default.promisify(this.repo.open.bind(this.repo))());case 1:case"end":return e.stop()}},e,this)}))}},{key:"close",value:function(){return c(this,void 0,void 0,r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.default.promisify(this.repo.close.bind(this.repo))());case 1:case"end":return e.stop()}},e,this)}))}},{key:"put",value:function(e,t){return c(this,void 0,void 0,r.mark(function n(){return r.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",s.default.promisify(this.repo.datastore.put.bind(this.repo.datastore))(e,t));case 1:case"end":return n.stop()}},n,this)}))}},{key:"get",value:function(e){return c(this,void 0,void 0,r.mark(function t(){return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.promisify(this.repo.datastore.get.bind(this.repo.datastore))(e));case 1:case"end":return t.stop()}},t,this)}))}},{key:"query",value:function(e){return this.repo.datastore.query(e)}}]),e}();t.Repo=f,t.default=f},47:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(6),a=n.n(r),i=n(27),c=n(24),o=function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Community.getDefault();case 2:return t=e.sent,e.next=5,t.nextUpdate();case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},487:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return g});var r=n(7),a=n(6),i=n.n(a),c=n(27),o=n(0),s=n.n(o),u=n(28),f=n(201),l=n(77),d=n(123),p=n(92),b=n(200),v=n(24),m=n(55),h=n(66),y=n(47),w=e.from("_crazywallet-dev"),k=function(){var t=Object(c.a)(i.a.mark(function t(n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",v.EcdsaKey.passPhraseKey(e.from(n),w));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),x=function(){var e=Object(c.a)(i.a.mark(function e(t){var n,r,a,c,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:return n=e.sent,e.next=5,v.Tupelo.ecdsaPubkeyToDid(n.publicKey);case 5:return r=e.sent,e.next=8,Object(y.a)();case 8:return a=e.sent,e.prev=9,e.next=12,a.getTip(r);case 12:c=e.sent,e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(9),"not found"!==e.t0){e.next=19;break}return e.abrupt("return",null);case 19:if(void 0!==c){e.next=21;break}return e.abrupt("return",null);case 21:return o=new v.ChainTree({store:a.blockservice,tip:c}),e.abrupt("return",o);case 23:case"end":return e.stop()}},e,null,[[9,15]])}));return function(t){return e.apply(this,arguments)}}(),g=Object(u.g)({"/":Object(u.i)(function(){var e=Object(c.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{view:s.a.createElement(O,null)});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),"/available/:username":Object(u.i)(function(){var e=Object(c.a)(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.params.username,e.next=3,x(n);case 3:if(!(r=e.sent)){e.next=8;break}return e.abrupt("return",{view:s.a.createElement(E,{userName:n,tree:r})});case 8:return e.abrupt("return",{view:s.a.createElement(T,{userName:n})});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}),E=function(t){var n=t.userName,a=t.tree,u=Object(m.e)(),b=Object(o.useState)(!1),y=Object(r.a)(b,2),w=y[0],k=y[1],x=Object(o.useState)(""),g=Object(r.a)(x,2),E=g[0],T=g[1],O=Object(o.useState)(!1),j=Object(r.a)(O,2),_=j[0],P=j[1],S=function(){var t=Object(c.a)(i.a.mark(function t(r){var c,o,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),k(!0),P(!1),t.next=5,v.EcdsaKey.passPhraseKey(e.from(E),e.from(n));case 5:return c=t.sent,t.next=8,v.Tupelo.ecdsaPubkeyToAddress(c.publicKey);case 8:return o=t.sent,t.next=11,a.resolve(["tree","_tupelo","authentications"]);case 11:s=t.sent,k(!1),s.value.includes(o)?(Object(h.b)({type:"setKey",userKey:c}),Object(h.b)({type:"setTree",userTree:a}),u.navigate("/wallet")):P(!0),k(!1);case 16:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return s.a.createElement("div",null,"Username ",n," is NOT available.",s.a.createElement("p",null,"Your Username? You can login."),s.a.createElement("form",{onSubmit:S},w?s.a.createElement(f.a,null):null,s.a.createElement(l.a,{container:!0,spacing:2},s.a.createElement(l.a,{item:!0},s.a.createElement(d.a,{error:_,label:"password",id:"password",type:"password",value:E,onChange:function(e){T(e.target.value)}})),s.a.createElement(l.a,{item:!0},s.a.createElement(p.a,{type:"submit",variant:"contained"},"Submit")))))},T=function(t){var n=t.userName,a=Object(m.e)(),u=Object(o.useState)(""),b=Object(r.a)(u,2),w=b[0],x=b[1],g=Object(o.useState)(!1),E=Object(r.a)(g,2),T=E[0],O=E[1],j=function(){var t=Object(c.a)(i.a.mark(function t(){var r,c,o,s,u;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),t.next=3,k(n);case 3:return r=t.sent,t.next=6,v.EcdsaKey.passPhraseKey(e.from(w),e.from(n));case 6:return c=t.sent,t.next=9,v.Tupelo.ecdsaPubkeyToAddress(c.publicKey);case 9:return o=t.sent,t.next=12,Object(y.a)();case 12:return s=t.sent,t.next=15,v.ChainTree.newEmptyTree(s.blockservice,r);case 15:return u=t.sent,t.next=18,s.playTransactions(u,[Object(v.setOwnershipTransaction)([o]),Object(v.setDataTransaction)("/_crazywallet/username",n)]);case 18:u.key=c,Object(h.b)({type:"setKey",userKey:c}),Object(h.b)({type:"setTree",userTree:u}),O(!1),a.navigate("/wallet");case 23:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return s.a.createElement("div",null,"Username ",n," is available.",s.a.createElement("p",null,"Reserve username?"),s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),j()}},T?s.a.createElement(f.a,null):null,s.a.createElement(l.a,{container:!0,spacing:2},s.a.createElement(l.a,{item:!0},s.a.createElement(d.a,{label:"password",id:"password",type:"password",value:w,onChange:function(e){x(e.target.value)}})),s.a.createElement(l.a,{item:!0},s.a.createElement(p.a,{type:"submit",variant:"contained"},"Submit")))))},O=function(){var e=Object(m.e)(),t=Object(o.useState)(""),n=Object(r.a)(t,2),a=n[0],i=n[1];return s.a.createElement("div",null,s.a.createElement(b.a,null,"Login or Register"),s.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.navigate("/login/available/"+a)}},s.a.createElement(l.a,{container:!0,spacing:2},s.a.createElement(l.a,{item:!0},s.a.createElement(d.a,{label:"user name",id:"userName",value:a,onChange:function(e){i(e.target.value)}})),s.a.createElement(l.a,{item:!0},s.a.createElement(p.a,{type:"submit",variant:"contained"},"Submit")))))}}).call(this,n(2).Buffer)},488:function(e,t,n){"use strict";(function(e){var r=n(6),a=n.n(r),i=n(27),c=n(7),o=n(0),s=n.n(o),u=n(282),f=n(278),l=n(279),d=n(280),p=n(123),b=n(201),v=n(281),m=n(92),h=n(1096),y=n(24),w=n(47),k=n(1086);t.a=function(t){var n=t.open,r=t.onClose,x=t.tree,g=t.tokenName,E=Object(o.useState)(0),T=Object(c.a)(E,2),O=T[0],j=T[1],_=Object(o.useState)(""),P=Object(c.a)(_,2),S=P[0],C=P[1],D=Object(o.useState)(!1),K=Object(c.a)(D,2),N=K[0],I=K[1],A=Object(o.useState)(),M=Object(c.a)(A,2),U=M[0],R=M[1],B=function(){var t=Object(i.a)(a.a.mark(function t(){var n,r,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==x){t.next=2;break}throw new Error("userTree is undefined");case 2:return I(!0),n=k(),t.next=6,Object(w.a)();case 6:return r=t.sent,console.log("tokenname: ",g),t.next=10,r.sendTokenAndGetPayload(x,Object(y.sendTokenTransaction)(n,g,O,S));case 10:i=t.sent,R(e.from(i.serializeBinary()).toString("base64"));case 12:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),F=function(){j(0),C(""),I(!1),r()};return U?s.a.createElement(u.a,{open:n,onClose:r,"aria-labelledby":"form-dialog-title"},s.a.createElement(f.a,{id:"form-dialog-title"},"Send Tokens"),s.a.createElement(l.a,null,s.a.createElement(d.a,null,"Give the following snippet to your send coin receiver:"),s.a.createElement(h.a,null,U)),s.a.createElement(v.a,null,s.a.createElement(m.a,{onClick:F,color:"primary"},"Ok"))):s.a.createElement(u.a,{open:n,onClose:r,"aria-labelledby":"form-dialog-title"},s.a.createElement(f.a,{id:"form-dialog-title"},"Send Tokens"),s.a.createElement(l.a,null,s.a.createElement(d.a,null,"Send tokens of type ",g),s.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"name",label:"Destination",fullWidth:!0,onChange:function(e){C(e.target.value)},value:S}),s.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"amount",label:"Amount",type:"number",fullWidth:!0,onChange:function(e){j(parseInt(e.target.value,10))},value:O.toString()})),N?s.a.createElement(b.a,null):s.a.createElement(v.a,null,s.a.createElement(m.a,{onClick:F,color:"primary"},"Cancel"),s.a.createElement(m.a,{onClick:B,color:"primary"},"Send")))}}).call(this,n(2).Buffer)},489:function(e,t,n){"use strict";(function(e){var r=n(6),a=n.n(r),i=n(27),c=n(7),o=n(0),s=n.n(o),u=n(282),f=n(278),l=n(279),d=n(280),p=n(123),b=n(201),v=n(281),m=n(92),h=n(24),y=n(490),w=n(47);t.a=function(t){var n=t.open,r=t.onClose,k=t.tree,x=Object(o.useState)(""),g=Object(c.a)(x,2),E=g[0],T=g[1],O=Object(o.useState)(!1),j=Object(c.a)(O,2),_=j[0],P=j[1],S=function(){var t=Object(i.a)(a.a.mark(function t(){var n,r,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==k){t.next=2;break}throw new Error("userTree is undefined");case 2:return n=y.TokenPayload.deserializeBinary(e.from(E,"base64")),r=Object(h.receiveTokenTransactionFromPayload)(n),P(!0),t.next=7,Object(w.a)();case 7:return i=t.sent,t.next=10,i.playTransactions(k,[r]);case 10:C();case 11:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),C=function(){T(""),P(!1),r()};return s.a.createElement(u.a,{open:n,onClose:r,"aria-labelledby":"form-dialog-title"},s.a.createElement(f.a,{id:"form-dialog-title"},"Receive Tokens"),s.a.createElement(l.a,null,s.a.createElement(d.a,null,"Receive Tokens"),s.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"name",label:"Code",fullWidth:!0,onChange:function(e){T(e.target.value)},value:E})),_?s.a.createElement(b.a,null):s.a.createElement(v.a,null,s.a.createElement(m.a,{onClick:C,color:"primary"},"Cancel"),s.a.createElement(m.a,{onClick:S,color:"primary"},"Send")))}}).call(this,n(2).Buffer)},497:function(e,t,n){e.exports=n(1093)},502:function(e,t,n){},503:function(e,t,n){},524:function(e,t,n){(function(t,r,a){var i=n(6),c=n(20),o=n(3),s=n(4),u=n(150),f=n(12)("gowasm");!function(){if("undefined"!==typeof t);else if("undefined"!==typeof window)window.global=window;else{if("undefined"===typeof self)throw new Error("cannot export Go (neither global, window nor self is defined)");self.global=self}var e,l,d=t.process&&-1!==t.process.title.indexOf("node");if(d){f("nodejs running"),t.require=n(532),t.fs=n(205);var p=n(533);t.crypto={getRandomValues:function(e){p.randomFillSync(e)}},t.performance={now:function(){var e=r.hrtime(),t=u(e,2);return 1e3*t[0]+t[1]/1e6}};var b=n(74);e=new b.TextEncoder,l=new b.TextDecoder}else{f("browser running"),t.Buffer=n(2).Buffer;var v="";t.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync:function(e,t){var n=(v+=l.decode(t)).lastIndexOf("\n");return-1!=n&&(console.log(v.substr(0,n)),v=v.substr(n+1)),t.length},write:function(e,t,n,r,a,i){if(0!==n||r!==t.length||null!==a)throw new Error("not implemented");i(null,this.writeSync(e,t))},open:function(e,t,n,r){var a=new Error("not implemented");a.code="ENOSYS",r(a)},read:function(e,t,n,r,a,i){var c=new Error("not implemented");c.code="ENOSYS",i(c)},fsync:function(e,t){t(null)}},e=new TextEncoder("utf-8"),l=new TextDecoder("utf-8")}t.Go=function(){"use strict";function n(){var r=this;o(this,n),this.argv=["js"],this.env={},this.exit=function(e){0!==e&&console.warn("exit code:",e)},this._exitPromise=new Promise(function(e){r._resolveExitPromise=e}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;var a=function(){return new DataView(r._inst.exports.mem.buffer)},i=function(e,t){a().setUint32(e+0,t,!0),a().setUint32(e+4,Math.floor(t/4294967296),!0)},c=function(e){return a().getUint32(e+0,!0)+4294967296*a().getInt32(e+4,!0)},s=function(e){var t=a().getFloat64(e,!0);if(0!==t){if(!isNaN(t))return t;var n=a().getUint32(e,!0);return r._values[n]}},u=function(e,t){if("number"===typeof t)return isNaN(t)?(a().setUint32(e+4,2146959360,!0),void a().setUint32(e,0,!0)):0===t?(a().setUint32(e+4,2146959360,!0),void a().setUint32(e,1,!0)):void a().setFloat64(e,t,!0);switch(t){case void 0:return void a().setFloat64(e,0,!0);case null:return a().setUint32(e+4,2146959360,!0),void a().setUint32(e,2,!0);case!0:return a().setUint32(e+4,2146959360,!0),void a().setUint32(e,3,!0);case!1:return a().setUint32(e+4,2146959360,!0),void a().setUint32(e,4,!0)}var n=r._refs.get(t);void 0===n&&(n=r._values.length,r._values.push(t),r._refs.set(t,n));var i=0;switch(typeof t){case"string":i=1;break;case"symbol":i=2;break;case"function":i=3}a().setUint32(e+4,2146959360|i,!0),a().setUint32(e,n,!0)},f=function(e){var t=c(e+0),n=c(e+8);return new Uint8Array(r._inst.exports.mem.buffer,t,n)},d=function(e){for(var t=c(e+0),n=c(e+8),r=new Array(n),a=0;a<n;a++)r[a]=s(t+8*a);return r},p=function(e){var t=c(e+0),n=c(e+8);return l.decode(new DataView(r._inst.exports.mem.buffer,t,n))},b=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":function(e){var t=a().getInt32(e+8,!0);r.exited=!0,delete r._inst,delete r._values,delete r._refs,r.exit(t)},"runtime.wasmWrite":function(e){var n=c(e+8),i=c(e+16),o=a().getInt32(e+24,!0);t.fs.writeSync(n,new Uint8Array(r._inst.exports.mem.buffer,i,o))},"runtime.nanotime":function(e){i(e+8,1e6*(b+performance.now()))},"runtime.walltime":function(e){var t=(new Date).getTime();i(e+8,t/1e3),a().setInt32(e+16,t%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":function(e){var t=r._nextCallbackTimeoutID;r._nextCallbackTimeoutID++,r._scheduledTimeouts.set(t,setTimeout(function(){r._resume()},c(e+8)+1)),a().setInt32(e+16,t,!0)},"runtime.clearTimeoutEvent":function(e){var t=a().getInt32(e+8,!0);clearTimeout(r._scheduledTimeouts.get(t)),r._scheduledTimeouts.delete(t)},"runtime.getRandomData":function(e){crypto.getRandomValues(f(e+8))},"syscall/js.stringVal":function(e){u(e+24,p(e+8))},"syscall/js.valueGet":function(e){var t=Reflect.get(s(e+8),p(e+16));e=r._inst.exports.getsp(),u(e+32,t)},"syscall/js.valueSet":function(e){Reflect.set(s(e+8),p(e+16),s(e+32))},"syscall/js.valueIndex":function(e){u(e+24,Reflect.get(s(e+8),c(e+16)))},"syscall/js.valueSetIndex":function(e){Reflect.set(s(e+8),c(e+16),s(e+24))},"syscall/js.valueCall":function(e){try{var t=s(e+8),n=Reflect.get(t,p(e+16)),i=d(e+32),c=Reflect.apply(n,t,i);e=r._inst.exports.getsp(),u(e+56,c),a().setUint8(e+64,1)}catch(o){u(e+56,o),a().setUint8(e+64,0)}},"syscall/js.valueInvoke":function(e){try{var t=s(e+8),n=d(e+16),i=Reflect.apply(t,void 0,n);e=r._inst.exports.getsp(),u(e+40,i),a().setUint8(e+48,1)}catch(c){u(e+40,c),a().setUint8(e+48,0)}},"syscall/js.valueNew":function(e){try{var t=s(e+8),n=d(e+16),i=Reflect.construct(t,n);e=r._inst.exports.getsp(),u(e+40,i),a().setUint8(e+48,1)}catch(c){u(e+40,c),a().setUint8(e+48,0)}},"syscall/js.valueLength":function(e){i(e+16,parseInt(s(e+8).length))},"syscall/js.valuePrepareString":function(t){var n=e.encode(String(s(t+8)));u(t+16,n),i(t+24,n.length)},"syscall/js.valueLoadString":function(e){var t=s(e+8);f(e+16).set(t)},"syscall/js.valueInstanceOf":function(e){a().setUint8(e+24,s(e+8)instanceof s(e+16))},debug:function(e){console.log(e)}}}}return s(n,[{key:"run",value:function(){var n=c(i.mark(function n(r){var a,c,o,s,u,f,l,d=this;return i.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this._inst=r,this._values=[NaN,0,null,!0,!1,t,this._inst.exports.mem,this],this._refs=new Map,this.exited=!1,a=new DataView(this._inst.exports.mem.buffer),c=4096,o=function(t){var n=c;return new Uint8Array(a.buffer,c,t.length+1).set(e.encode(t+"\0")),c+=t.length+(8-t.length%8),n},s=this.argv.length,u=[],this.argv.forEach(function(e){u.push(o(e))}),f=Object.keys(this.env).sort(),u.push(f.length),f.forEach(function(e){u.push(o("".concat(e,"=").concat(d.env[e])))}),l=c,u.forEach(function(e){a.setUint32(c,e,!0),a.setUint32(c+4,0,!0),c+=8}),this._inst.exports.run(s,l),this.exited&&this._resolveExitPromise(),n.next=19,this._exitPromise;case 19:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},{key:"_resume",value:function(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}},{key:"_makeFuncWrapper",value:function(e){var t=this;return function(){var n={id:e,this:this,args:arguments};return t._pendingEvent=n,t._resume(),n.result}}}]),n}(),t.Go.wasmPath=d?t.fs.readFileSync(n(156).join(a,"tupelo.wasm")):"/tupelo.wasm",t.Go.setWasmPath=function(e){t.Go.wasmPath=e},t.Go.readyPromise=new Promise(function(e){t.Go.readyResolver=e})}();var l={run:function(){var e=c(i.mark(function e(){var a,c,o,s,u;return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f("outer go.run"),a=t.process&&-1!==t.process.title.indexOf("node"),(c=new Go).env=Object.assign({TMPDIR:n(131).tmpdir()},Object({NODE_ENV:"production",PUBLIC_URL:"."})),!a){e.next=11;break}return e.next=7,WebAssembly.instantiate(Go.wasmPath,c.importObject);case 7:o=e.sent,r.on("exit",function(e){Go.exit(),0!==e||c.exited||(c._pendingEvent={id:0},c._resume())}),e.next=30;break;case 11:if(f("is not nodejs"),"function"!=typeof WebAssembly.instantiateStreaming){e.next=18;break}return e.next=15,WebAssembly.instantiateStreaming(fetch(Go.wasmPath),c.importObject);case 15:o=e.sent,e.next=30;break;case 18:return f("fetching wasm"),e.next=21,fetch(Go.wasmPath);case 21:return s=e.sent,f("turning it into an array buffer"),e.next=25,s.arrayBuffer();case 25:return u=e.sent,f("instantiating"),e.next=29,WebAssembly.instantiate(u,c.importObject);case 29:o=e.sent;case 30:return f("inner go.run"),e.abrupt("return",c.run(o.instance));case 32:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ready:function(){var e=c(i.mark(function e(n){return i.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.Go.readyPromise);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),populate:function(e,n){return t.populateLibrary(e,n)}};e.exports=l}).call(this,n(26),n(11),"/")},532:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=532},534:function(e,t){},536:function(e,t){},569:function(e,t){},570:function(e,t){},614:function(e,t,n){(function(t){var r=n(6),a=n(20),i=n(3),c=n(18),o=n(16),s=n(53),u=n(19),f=n(331),l=n(632);n(652);var d=n(678),p=n(792),b=n(793),v=n(861),m=n(430),h=n(44),y=n(99).keys,w=n(41),k=(n(967),n(74)),x=n(12)("p2p"),g=n(979),E=t.process&&-1!==t.process.title.indexOf("node"),T=function(e){"use strict";function t(e){var n;i(this,t);var r=new g({namespace:"tupelo-transaction-gossipers"}),a={switch:{blacklistTTL:12e4,blackListAttempts:5,maxParallelDials:100,maxColdCalls:25,dialTimeout:2e4},modules:{transport:[f],streamMuxer:[l],connEncryption:[d],peerDiscovery:[p,r.stub()],dht:b},config:{peerDiscovery:{autoDial:!0,bootstrap:{enabled:!0}},dht:{kBucketSize:20,enabled:!0,randomWalk:{enabled:!1}},EXPERIMENTAL:{pubsub:!0}}};return n=c(this,o(t).call(this,m(a,e))),r.node=s(n),n.once("peer:connect",function(){r.start(function(){x("discovery started")})}),n.once("stop",function(){r.stop(function(){x("routing stopped")})}),n._routingDiscoverer=r,n}return u(t,v),t}();e.exports.TupeloP2P=T,e.exports.CreateNode=function(){var e=a(r.mark(function e(t){var n,i,c;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t={}),c=new Promise(function(e,t){n=e,i=t}),y.generateKeyPair("secp256k1",function(){var e=a(r.mark(function e(a,c){var o,s,u;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a&&(console.error("error generating key pair ",a),i(a)),e.next=3,k.promisify(w.createFromPrivKey)(c.bytes);case 3:o=e.sent,s=new h(o),E&&(s.multiaddrs.add("/ip4/0.0.0.0/tcp/0/ws"),s.multiaddrs.add("/ip4/0.0.0.0/tcp/0/wss")),t.peerInfo=s,u=new T(t),x("peerIdStr ",o.toB58String()),n(u);case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",c);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}).call(this,n(26))},617:function(e,t){},66:function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return p}),n.d(t,"a",function(){return m}),n.d(t,"b",function(){return h}),n.d(t,"d",function(){return y});var r,a=n(6),i=n.n(a),c=n(27),o=n(25),s=n(486),u=n(24),f=n(47);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){Object(o.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var p=new Promise(function(e){r=e}),b={userTree:void 0,userKey:void 0},v=Object(s.a)(function(t,n){var r=function(e,t){switch(t.type){case"setKey":return d({},e,{userKey:t.userKey});case"setTree":return d({},e,{userTree:t.userTree});default:return e}}(t,n);return void 0!==r.userKey&&void 0!==r.userKey.privateKey&&sessionStorage.setItem("userKey",e.from(r.userKey.privateKey).toString("hex")),void 0!==r.userTree&&r.userTree.id().then(function(e){if(null==e)throw new Error("unknown id");sessionStorage.setItem("userTreeDid",e)},function(e){throw e}),r},b),m=v.GlobalStateProvider,h=v.dispatch,y=v.useGlobalState;function w(){return(w=Object(c.a)(i.a.mark(function t(){var n,a,c,o,s,l;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=sessionStorage.getItem("userKey"))&&""!==n){t.next=4;break}return r(),t.abrupt("return");case 4:return t.next=6,u.EcdsaKey.fromBytes(e.from(n,"hex"));case 6:if(a=t.sent,null!=(c=sessionStorage.getItem("userTreeDid"))){t.next=11;break}throw r(),new Error("had a userKey but no user Tree");case 11:return t.next=13,Object(f.a)();case 13:return o=t.sent,t.next=16,o.getTip(c);case 16:s=t.sent,l=new u.ChainTree({tip:s,store:o.blockservice,key:a}),h({type:"setKey",userKey:a}),h({type:"setTree",userTree:l}),r();case 21:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){w.apply(this,arguments)}()}).call(this,n(2).Buffer)},708:function(e,t){},719:function(e,t){},979:function(e,t,n){(function(t,r){var a=n(6),i=n(53),c=n(3),o=n(4),s=n(18),u=n(16),f=n(19),l=n(20),d=n(17).EventEmitter,p=n(12),b=(n(107),n(35)),v=n(179);function m(e){return h.apply(this,arguments)}function h(){return(h=l(a.mark(function e(n){var r;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t.from(n),"sha2-256");case 2:return r=e.sent,e.abrupt("return",new b(1,"raw",r));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}p("p2p:discovery").error=p("p2p:discoveryp:error");var y=function(e){"use strict";function t(e){var n;return c(this,t),(n=s(this,u(t).call(this))).parent=e.parent,n}return f(t,d),o(t,[{key:"start",value:function(e){e()}},{key:"stop",value:function(e){this.parent.stop(e)}}]),t}(),w=function(e){"use strict";function t(e){var n;if(c(this,t),n=s(this,u(t).call(this)),!e.namespace)throw new Error("you must provide a namespace to the RoutingDiscovery");return n._stub=new y({parent:i(n)}),n._namespace=e.namespace,n._interval=e.interval||2e3,n._timer=null,n}return f(t,d),o(t,[{key:"stub",value:function(){return this._stub}},{key:"start",value:function(e){var t=this;if(!this.node)throw new Error("you must set node on this discoverer before starting");if(!this.node.isStarted())throw new Error("you must start the node before discovering");if(this._timer)return r.nextTick(function(){return e()});this._timer=setInterval(function(){return t._discoverContentPeers()},this._interval),r.nextTick(function(){e(),t._discoverContentPeers()})}},{key:"_discoverContentPeers",value:function(){var e=l(a.mark(function e(){var t=this;return a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._nsCid){e.next=4;break}return e.next=3,m(this._namespace);case 3:this._nsCid=e.sent;case 4:this.node.contentRouting.findProviders(this._nsCid,1800,function(e,n){if(e){if(t.node.isStarted()||t.stop(function(){console.error("self-stopping the discoverer, because the node is stopped")}),"no providers found"===e.message)return;if('Callback function "anonymous" timed out.'===e.message)return void console.error("timeout on findProviders");throw console.error("throwing an error: ",e.message),e}var r=!0,a=!1,i=void 0;try{for(var c,o=n[Symbol.iterator]();!(r=(c=o.next()).done);r=!0){var s=c.value;t.stub().emit("peer",s)}}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(e){r.nextTick(e),this._timer&&(clearInterval(this._timer),this._timer=null)}}]),t}();(e.exports=w).tag="routing"}).call(this,n(2).Buffer,n(11))},984:function(e,t,n){"use strict";var r=n(6),a=n(3),i=n(4),c=this,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(c,o)}s((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});var s=n(149),u=function(){function e(t,n){a(this,e),this.publicKey=t,this.privateKey=n}return i(e,[{key:"keyAddr",value:function(){return o(this,void 0,void 0,r.mark(function e(){return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.Tupelo.ecdsaPubkeyToDid(this.publicKey));case 1:case"end":return e.stop()}},e,this)}))}}]),e}();u.generate=function(){return o(c,void 0,void 0,r.mark(function e(){var t,n;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Tupelo.generateKey();case 2:return t=e.sent,n=new u(t[1],t[0]),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))},u.passPhraseKey=function(e,t){return o(c,void 0,void 0,r.mark(function n(){var a;return r.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.Tupelo.passPhraseKey(e,t);case 2:return a=n.sent,n.abrupt("return",new u(a[1],a[0]));case 4:case"end":return n.stop()}},n)}))},u.fromBytes=function(e){return o(c,void 0,void 0,r.mark(function t(){var n;return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Tupelo.keyFromPrivateBytes(e);case 2:return n=t.sent,t.abrupt("return",new u(n[1],n[0]));case 4:case"end":return t.stop()}},t)}))},t.EcdsaKey=u},985:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),r(n(986)),r(n(441));var i=a(n(35));t.CID=i.default},986:function(e,t,n){"use strict";var r=n(6),a=n(3),i=n(4),c=n(18),o=n(16),s=n(19),u=this,f=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function o(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(c,o)}s((r=r.apply(e,t||[])).next())})},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d=n(441),p=l(n(35)),b=n(149),v=n(219),m=n(442),h=function(e){function t(e){var n;return a(this,t),(n=c(this,o(t).call(this,e.tip,e.store))).key=e.key,n.store=e.store,n}return s(t,e),i(t,[{key:"id",value:function(){return f(this,void 0,void 0,r.mark(function e(){var t;return r.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resolve(["id"]);case 2:return t=e.sent,e.abrupt("return",t.value);case 4:case"end":return e.stop()}},e,this)}))}}]),t}(d.Dag);h.newEmptyTree=function(e,t){return f(u,void 0,void 0,r.mark(function n(){var a;return r.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.Tupelo.newEmptyTree(e,t.publicKey);case 2:return a=n.sent,n.abrupt("return",new h({key:t,tip:a,store:e}));case 4:case"end":return n.stop()}},n)}))},t.ChainTree=h;t.setOwnershipTransaction=function(e){var t=function(e){var t=new v.SetOwnershipPayload;return t.setAuthenticationList(e),t}(e),n=new v.Transaction;return n.setType(v.Transaction.Type.SETOWNERSHIP),n.setSetOwnershipPayload(t),n};t.setDataTransaction=function(e,t){var n=function(e,t){var n=m.util.serialize(t),r=new v.SetDataPayload;return r.setPath(e),r.setValue(n),r}(e,t),r=new v.Transaction;return r.setType(v.Transaction.Type.SETDATA),r.setSetDataPayload(n),r};t.establishTokenTransaction=function(e,t){var n=function(e,t){var n=new v.TokenMonetaryPolicy;n.setMaximum(t);var r=new v.EstablishTokenPayload;return r.setName(e),r.setMonetaryPolicy(n),r}(e,t),r=new v.Transaction;return r.setType(v.Transaction.Type.ESTABLISHTOKEN),r.setEstablishTokenPayload(n),r};t.mintTokenTransaction=function(e,t){var n=function(e,t){var n=new v.MintTokenPayload;return n.setName(e),n.setAmount(t),n}(e,t),r=new v.Transaction;return r.setType(v.Transaction.Type.MINTTOKEN),r.setMintTokenPayload(n),r};t.sendTokenTransaction=function(e,t,n,r){var a=function(e,t,n,r){var a=new v.SendTokenPayload;return a.setId(e),a.setName(t),a.setAmount(n),a.setDestination(r),a}(e,t,n,r),i=new v.Transaction;return i.setType(v.Transaction.Type.SENDTOKEN),i.setSendTokenPayload(a),i};var y=function(e,t,n,r){var a=new v.ReceiveTokenPayload;return a.setSendTokenTransactionId(e),a.setTip(t),a.setSignature(n),a.setLeavesList(r),a};t.receiveTokenTransaction=function(e,t,n,r){var a=y(e,t,n,r),i=new v.Transaction;return i.setType(v.Transaction.Type.RECEIVETOKEN),i.setReceiveTokenPayload(a),i},t.receiveTokenTransactionFromPayload=function(e){var t=new v.Transaction;t.setType(v.Transaction.Type.RECEIVETOKEN);var n=new p.default(e.getTip()),r=e.getSignature();if(void 0===r)throw new Error("signature must be defined");var a=e.getLeavesList_asU8();if(void 0===a)throw new Error("leaves must be defined");return t.setReceiveTokenPayload(y(e.getTransactionId(),n.buffer,r,a)),t},t.default=h}},[[497,1,2]]]);
//# sourceMappingURL=main.cc560bee.chunk.js.map