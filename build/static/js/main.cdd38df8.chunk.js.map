{"version":3,"sources":["../../tupelo-wasm-sdk/lib/community/index.js","../../tupelo-wasm-sdk/lib/community/wrappedbitswap.js","theme.tsx","nodedisplay.tsx","explorer.tsx","wallet/minttokendialog.tsx","wallet/tokendisplay.tsx","wallet/establishtokendialog.tsx","wallet/wallet.tsx","layout.tsx","App.tsx","serviceWorker.ts","index.tsx","../../tupelo-wasm-sdk/lib/tupelo.js","../../tupelo-wasm-sdk/lib/index.js","../../tupelo-wasm-sdk/lib/node.js","../../tupelo-wasm-sdk/lib/chaintree/dag/dag.js","../../tupelo-wasm-sdk/lib/community/default.js","../../tupelo-wasm-sdk/lib/community/community.js","../../tupelo-wasm-sdk/lib/community/wrappedblockservice.js","../../tupelo-wasm-sdk/lib/notarygroup.js","../../tupelo-wasm-sdk/lib/repo.js","community.ts","wallet/login.tsx","wallet/sendtokendialog.tsx","wallet/receivetokendialog.tsx","../../tupelo-wasm-sdk/lib/js/go/index.js","../../tupelo-wasm-sdk/lib/js/go sync","../../tupelo-wasm-sdk/lib/js/p2p/index.js","state.ts","../../tupelo-wasm-sdk/lib/js/p2p/discovery.js","../../tupelo-wasm-sdk/lib/crypto.js","../../tupelo-wasm-sdk/lib/chaintree/index.js","../../tupelo-wasm-sdk/lib/chaintree/chaintree.js"],"names":["__export","m","p","exports","hasOwnProperty","Object","defineProperty","value","default_1","defaultNotaryGroup","_classCallCheck","_createClass","__importDefault","this","mod","__esModule","util_1","log","default","WrappedBitswap","bitswap","key","cid","promisify","get","bind","block","resolve","reject","Promise","res","rej","put","toString","err","_","Error","start","stop","peerID","wantlistForPeer","ledgerForPeer","cids","getMany","blocks","putMany","getWantlist","peers","stat","theme","createMuiTheme","palette","primary","main","secondary","error","red","A400","background","useStyles","makeStyles","preFormatted","whiteSpace","NodeRow","display","label","path","did","classes","CID","isCID","href","concat","join","className","JSON","stringify","TableRow","TableCell","NodeExplorer","decodedCbor","Table","TableHead","TableBody","keys","map","k","i","explorerRoute","route","req","a","params","fetchTree","fetchTreeResult","console","split","undefined","tree","resolveResult","view","pathDisplay","padding","spacing","found","getCommunity","community","getTip","tip","ChainTree","store","blockservice","PathRenderer","val","slice","Explorer","result","Typography","variant","MintTokenDialog","open","onClose","tokenName","useState","amount","setAmount","loading","setLoading","handleSubmit","playTransactions","mintTokenTransaction","_onClose","Dialog","aria-labelledby","DialogTitle","id","DialogContent","DialogContentText","TextField","autoFocus","margin","type","fullWidth","onChange","evt","parseInt","target","CircularProgress","DialogActions","Button","onClick","color","tokenPath","balance","setBalance","max","setMax","loaded","setLoaded","mintDialogOpen","setMintDialogOpen","sendDialogOpen","setSendDialogOpen","loadInfo","tokenInfoPath","tokenInfoResp","monetaryPolicy","useEffect","TokenList","tokens","setTokens","loadTokens","tokenResp","EstablishTokenDialog","setTokenName","maxAmount","setMaxAmount","establishTokenTransaction","walletRoute","mount","userTreeObj","globalStorageStarted","userTree","redirect","WalletPage","dialogOpen","setDialogOpen","receiveDialogOpen","setReceiveDialogOpen","setDid","handleClose","then","Grid","container","item","root","title","breakpoints","up","grow","flexGrow","search","marginLeft","searchIcon","routes","loginRoute","NavBar","setSearch","navigation","useNavigation","window","Community","AppBar","position","Toolbar","noWrap","onSubmit","preventDefault","navigate","InputProps","startAdornment","InputAdornment","Layout","useGlobalState","Container","maxWidth","context","history","createHashHistory","direction","justify","alignItems","xs","Paper","render","renderNotFound","fallback","App","ThemeProvider","CssBaseline","Boolean","location","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","_regeneratorRuntime","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","e","rejected","done","apply","TupeloWasm","Tupelo","cids_1","go","transactions_pb_1","signatures_pb_1","logger","UnderlyingWasm","_populated","phrase","salt","bytes","pubKey","opts","publicKey","_tupelowasm","mark","_callee","wrap","_context","prev","abrupt","run","populate","generateKey","_callee2","tw","_context2","sent","passPhraseKey","_callee3","_context3","keyFromPrivateBytes","_callee4","_context4","ecdsaPubkeyToDid","_callee5","_context5","ecdsaPubkeyToAddress","_callee6","_context6","getCurrentState","_callee7","stateBits","_context7","CurrentState","deserializeBinary","t0","newEmptyTree","_callee8","_context8","tokenPayloadForTransaction","_callee9","respBits","_context9","blockService","sendId","jsSendTxSig","signature","serializeBinary","TokenPayload","publisher","notaryGroup","transactions","_callee10","transBits","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","t","serialized","privateKey","resp","currState","sig","_context10","Array","Symbol","iterator","return","finish","Uint8Array","length","getSignature","Buffer","from","getNewTip_asU8","libp2p","p2p","createNode","CreateNode","config","peerDiscovery","bootstrap","list","bootstrapAddresses","Ipld","Dag","dagStore","resolveAt","str_path","resolved","lastVal","last","message","startsWith","remainderPath","_this","_defaultCommunity","community_1","notarygroup_1","repo_1","node_1","MemoryDatastore","tomlToNotaryGroup","_getDefault","repo","node","c","_this2","init","getBootstrapAddressesList","on","once","_possibleConstructorReturn","_getPrototypeOf","_inherits","events_1","wrappedblockservice_1","tupelo_1","debugLog","IpfsBitswap","IpfsBlockService","_events_1$default","group","call","_started","WrappedBlockService","setExchange","_startPromiseResolve","_startPromiseReject","_startPromise","nextUpdate","state","tx","sendTokenPayload","getSendTokenPayload","getType","Transaction","Type","SENDTOKEN","getName","getId","pubsub","_rej","isStarted","subscribeToTips","emit","_this3","subscribe","msg","data","getDefault","delete","unsetExchange","hasExchange","config_pb_1","toml_1","hexToBuffer","hex","substr","tomlString","obj","ng","NotaryGroup","setId","setBootstrapAddressesList","signers","s","publicKeySet","PublicKeySet","setVerKey","verKeyHex","setDestKey","destKeyHex","setSignersList","configToNotaryGroup","toCamel","o","newO","origKey","newKey","prototype","charAt","toLowerCase","constructor","parse","IpfsRepo","Repo","name","close","datastore","_query","query","namespace","publicUserKey","userName","EcdsaKey","RootLoginPage","username","UsernameUnavailable","UsernameAvailable","password","setPassword","badPassword","setBadPassword","secureKey","secureAddr","resolveResp","includes","dispatch","userKey","registerUser","insecureKey","secureKeyAddress","setOwnershipTransaction","setDataTransaction","setUsername","uuidv4","require","SendTokenDialog","destination","setDestination","code","setCode","uuid","sendTokenAndGetPayload","sendTokenTransaction","payload","ReceiveTokenDialog","tokenPayload","receiveTokenTransactionFromPayload","_asyncToGenerator","_slicedToArray","global","self","encoder","decoder","isNodeJS","process","indexOf","fs","nodeCrypto","crypto","getRandomValues","b","randomFillSync","performance","now","_process$hrtime","hrtime","_process$hrtime2","util","TextEncoder","TextDecoder","outputBuf","constants","O_WRONLY","O_RDWR","O_CREAT","O_TRUNC","O_APPEND","O_EXCL","writeSync","fd","buf","nl","decode","lastIndexOf","write","offset","callback","flags","mode","read","buffer","fsync","Go","_class","argv","env","exit","warn","_exitPromise","_resolveExitPromise","_pendingEvent","_scheduledTimeouts","Map","_nextCallbackTimeoutID","mem","DataView","_inst","setInt64","addr","v","setUint32","Math","floor","getInt64","getUint32","getInt32","loadValue","f","getFloat64","isNaN","_values","storeValue","setFloat64","ref","_refs","push","set","typeFlag","loadSlice","array","len","loadSliceOfValues","loadString","saddr","timeOrigin","Date","importObject","sp","exited","n","msec","getTime","setInt32","setTimeout","_resume","clearTimeout","Reflect","getsp","args","setUint8","construct","str","encode","String","_run","instance","strPtr","argc","argvPtrs","NaN","ptr","forEach","arg","sort","_x","arguments","resume","event","wasmPath","readFileSync","__dirname","setWasmPath","readyPromise","readyResolver","runner","_run2","wasmResp","wasm","assign","TMPDIR","tmpdir","WebAssembly","instantiate","instantiateStreaming","fetch","arrayBuffer","_ready","_x2","reqs","populateLibrary","module","webpackEmptyContext","_assertThisInitialized","WS","Multiplex","SECIO","Bootstrap","KadDHT","mergeOptions","PeerInfo","PeerId","RoutingDiscovery","TupeloP2P","_libp2p","_options","routingDiscoverer","defaults","switch","blacklistTTL","blackListAttempts","maxParallelDials","maxColdCalls","dialTimeout","modules","transport","streamMuxer","connEncryption","stub","dht","autoDial","enabled","kBucketSize","randomWalk","EXPERIMENTAL","_routingDiscoverer","_ref","options","generateKeyPair","_ref2","peerInfo","createFromPrivKey","multiaddrs","add","toB58String","_x3","subDirectory","pathname","initialState","createStore","action","mutated","reducer","sessionStorage","setItem","GlobalStateProvider","keyString","getItem","fromBytes","userTreeDid","setStoredState","EventEmitter","debug","multihashing","nsToCid","_nsToCid","ns","hash","RoutingStub","_EventEmitter","parent","_EventEmitter2","_stub","_namespace","_interval","interval","_timer","nextTick","setInterval","_discoverContentPeers","_discoverContentPeers2","_this4","_nsCid","contentRouting","findProviders","providers","clearInterval","tag","publicKeyBits","privateKeyBits","generate","pair","dag_1","dagCBOR","_dag_1$Dag","newOwnerKeys","SetOwnershipPayload","setAuthenticationList","setOwnershipPayload","txn","setType","SETOWNERSHIP","setSetOwnershipPayload","cborData","serialize","SetDataPayload","setPath","setValue","setDataPayloadMaker","SETDATA","setSetDataPayload","maximum","policy","TokenMonetaryPolicy","setMaximum","EstablishTokenPayload","setName","setMonetaryPolicy","establishTokenPayload","ESTABLISHTOKEN","setEstablishTokenPayload","MintTokenPayload","mintTokenPayload","MINTTOKEN","setMintTokenPayload","destinationChainId","SendTokenPayload","setSendTokenPayload","receiveTokenPayload","leaves","ReceiveTokenPayload","setSendTokenTransactionId","setTip","setSignature","setLeavesList","receiveTokenTransaction","RECEIVETOKEN","setReceiveTokenPayload","getLeavesList_asU8","getTransactionId"],"mappings":"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","file":"static/js/main.cdd38df8.chunk.js","sourcesContent":["\"use strict\";\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar default_1 = require(\"./default\");\n\nexports.defaultNotaryGroup = default_1.defaultNotaryGroup;\n\n__export(require(\"./community\"));\n\n__export(require(\"./wrappedbitswap\"));\n\n__export(require(\"./wrappedblockservice\"));","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = __importDefault(require(\"util\"));\n\nvar debug_1 = __importDefault(require(\"debug\"));\n\nvar log = debug_1.default(\"wrappedbitswap\");\n/**\n * A wrapper around an IPFS call-back-based bitswap that turns it into async/await compatible.\n * There is currently an open PR on the bitswap repo that will allow us to switch to the IPFS-maintained bitswap completely.\n * @public\n */\n\nvar WrappedBitswap =\n/*#__PURE__*/\nfunction () {\n  function WrappedBitswap(bitswap) {\n    _classCallCheck(this, WrappedBitswap);\n\n    this.bitswap = bitswap;\n  }\n\n  _createClass(WrappedBitswap, [{\n    key: \"get\",\n    value: function get(cid) {\n      return util_1.default.promisify(this.bitswap.get.bind(this.bitswap))(cid);\n    }\n  }, {\n    key: \"put\",\n    value: function put(block) {\n      var resolve, reject;\n      var p = new Promise(function (res, rej) {\n        resolve = res, reject = rej;\n      });\n      log(\"bitswap put: \", this.bitswap.put.toString());\n      this.bitswap.put(block, function (err) {\n        if (err) {\n          reject(err);\n        }\n\n        resolve();\n      });\n      return p; // return util.promisify(this.bitswap.put.bind(this.bitswap))(block) as Promise<any>\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(cid) {\n      return new Promise(function (_, reject) {\n        reject(new Error(\"can't delete from bitswap\"));\n      });\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      return util_1.default.promisify(this.bitswap.start.bind(this.bitswap));\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      return util_1.default.promisify(this.bitswap.stop.bind(this.bitswap));\n    }\n  }, {\n    key: \"wantlistForPeer\",\n    value: function wantlistForPeer(peerID) {\n      return this.bitswap.wantlistForPeer(peerID);\n    }\n  }, {\n    key: \"ledgerForPeer\",\n    value: function ledgerForPeer(peerID) {\n      return this.bitswap.ledgerForPeer(peerID);\n    }\n  }, {\n    key: \"getMany\",\n    value: function getMany(cids) {\n      return util_1.default.promisify(this.bitswap.getMany.bind(this.bitswap))(cids);\n    }\n  }, {\n    key: \"putMany\",\n    value: function putMany(blocks) {\n      return util_1.default.promisify(this.bitswap.putMany.bind(this.bitswap))(blocks);\n    }\n  }, {\n    key: \"getWantlist\",\n    value: function getWantlist() {\n      return this.bitswap.getWantlist();\n    }\n  }, {\n    key: \"peers\",\n    value: function peers() {\n      return this.bitswap.peers();\n    }\n  }, {\n    key: \"stat\",\n    value: function stat() {\n      return this.bitswap.stat();\n    }\n  }]);\n\n  return WrappedBitswap;\n}();\n\nexports.WrappedBitswap = WrappedBitswap;","import red from '@material-ui/core/colors/red';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n});\n\nexport default theme","import React from 'react';\nimport { Link } from 'react-navi'\nimport { Table, TableHead, TableBody, TableRow, TableCell, Theme } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/styles';\nimport {CID} from 'tupelo-wasm-sdk'\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    preFormatted: {\n        whiteSpace: \"pre\",\n    },\n}));\n\nconst NodeRow = ({ label, value, path, did }: { did: string, path: string[], label: string, value: any }) => {\n    const classes = useStyles()\n    let display\n    if (value && CID.isCID(value)) {\n        display = (\n            <Link\n                href={\"/chaintrees/\" + did + \"?path=\" + path.concat(label).join(\"/\")}\n            >\n                CID: {value.toString()}\n            </Link>\n        )\n    } else {\n        display = (\n            <code className={classes.preFormatted}>{JSON.stringify(value, null, 2)}</code>\n        )\n    }\n\n    return (\n        <TableRow>\n            <TableCell>{label}</TableCell>\n            <TableCell>{display}</TableCell>\n        </TableRow>\n    )\n}\n\nconst NodeExplorer = ({ decodedCbor, path, did }: { decodedCbor: any, path: string[], did: string }) => {\n    return (\n            <Table>\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Key</TableCell>\n                        <TableCell>Value</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {Object.keys(decodedCbor).map((k: string, i: number) => {\n                        return (\n                            <NodeRow key={i} label={k} path={path} did={did} value={decodedCbor[k]} />\n                        )\n                    })}\n                </TableBody>\n            </Table>\n    )\n}\n\nexport default NodeExplorer\n","import React from 'react';\nimport { ChainTree} from 'tupelo-wasm-sdk';\nimport { Typography, makeStyles, Theme } from '@material-ui/core';\nimport {Link} from 'react-navi'\nimport NodeDisplay from './nodedisplay';\nimport { route } from 'navi'\nimport { getCommunity } from './community';\n\nexport const explorerRoute = route(async (req) => {\n    const did = req.params.did\n    let fetchTreeResult\n    try {\n        fetchTreeResult = await fetchTree(did)\n    } catch(e) {\n        console.error(\"error fetching tree: \", e)\n        throw e\n    }\n    let path = [\"\"]\n    let decodedCbor\n    if (req.params.path) {\n        path = req.params.path.split(\"/\")\n    }\n    if (fetchTreeResult.tree !== undefined) {\n        const resolveResult = await fetchTreeResult.tree.resolve(path)\n        if (resolveResult.value !== undefined) {\n            decodedCbor = resolveResult.value\n        }\n    }\n    return {\n        view: <Explorer did={did} path={path} fetchTreeResult={fetchTreeResult} decodedCbor={decodedCbor} />\n    }\n})\n\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    pathDisplay: {\n        padding: theme.spacing(0, 0.5),\n    },\n}));\n\ninterface IFetchTreeResult {\n    tree?:ChainTree\n    found:boolean\n    message?:string\n}\n\nexport const fetchTree = async (did: string):Promise<IFetchTreeResult> => {\n    if (did === \"\") {\n        return {\n            found: false,\n        }\n    }\n    const community = await getCommunity()\n\n    try {\n        const tip = await community.getTip(did)\n        const tree = new ChainTree({\n            store: community.blockservice,\n            tip: tip,\n        })\n        return {\n            tree: tree,\n            found: true,\n        }\n    } catch (e) {\n        if (e === \"not found\") {\n            return {\n                found: false,\n            }\n        }\n        console.error(\"error getting tip: \", e)\n        throw e\n    }\n}\n\n\nconst PathRenderer = ({ did, path }: { did:string, path: string[] }) => {\n    const classes = useStyles()\n\n    return (\n        <div>\n        Path: \n        {path.map((val: string, i: number) => {\n            return (\n                <Link\n                    key={i}\n                    className={classes.pathDisplay}\n                    href={\"/chaintrees/\" + did + \"?path=\" + path.slice(0,i+1).join(\"/\")}\n                >\n                    {val}/\n            </Link>)\n        })}</div>\n    )\n}\n\nconst Explorer = ({ did, fetchTreeResult, path, decodedCbor }: { did:string, fetchTreeResult: IFetchTreeResult, path:string[], decodedCbor:any }) => {\n\n    let result = fetchTreeResult\n\n    return (\n        <div>\n        {result && (result.found === undefined || !result.found) && (\n            <div>\n                <Typography variant=\"h6\">{did}</Typography>\n                {(did === \"\") ? \"Awaiting your DID\" : \"Not found\"}\n            </div>\n        )}\n        {(result && result.tree !== undefined) && (\n            <div>\n            <Typography variant=\"h6\">{did}</Typography>\n            <p>tip: {result.tree.tip.toString()}</p>\n            <PathRenderer did={did} path={path}/>\n            <NodeDisplay decodedCbor={decodedCbor} path={path} did={did}/>\n            </div>\n        )}\n        </div>\n    )\n}\n\nexport default Explorer","import React, { useState } from 'react'\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, TextField, CircularProgress, Button } from '@material-ui/core';\nimport { ChainTree, mintTokenTransaction } from 'tupelo-wasm-sdk'\nimport { getCommunity } from '../community';\n\n/**\n * Mint token is really simple, just take a tokenName and ammount and create it.\n * The token must be *established* (see {@link EstablishTokenDialog }) before you are allowed to mint.\n */\nexport const MintTokenDialog = ({ open, onClose, tree, tokenName }: { tokenName: string, open: boolean, onClose: () => void, tree: ChainTree }) => {\n    const [amount, setAmount] = useState(0)\n    const [loading, setLoading] = useState(false)\n\n\n    const handleSubmit = async () => {\n        if (tree === undefined) {\n            throw new Error(\"userTree is undefined\")\n        }\n        setLoading(true)\n        const community = await getCommunity()\n        await community.playTransactions(tree, [mintTokenTransaction(tokenName, amount)])\n        _onClose()\n    }\n\n    const _onClose = () => {\n        setAmount(0)\n        setLoading(false)\n        onClose()\n    }\n\n    return (\n        <Dialog open={open} onClose={onClose} aria-labelledby=\"form-dialog-title\">\n            <DialogTitle id=\"form-dialog-title\">Mint Tokens</DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    Mint tokens of type {tokenName}\n                </DialogContentText>\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    id=\"amount\"\n                    label=\"Amount\"\n                    type=\"number\"\n                    fullWidth\n                    onChange={(evt) => { setAmount(parseInt(evt.target.value, 10)) }}\n                    value={amount.toString()}\n                />\n\n            </DialogContent>\n            {loading ? <CircularProgress /> :\n                <DialogActions>\n                    <Button onClick={_onClose} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleSubmit} color=\"primary\">\n                        Mint\n                    </Button>\n                </DialogActions>\n            }\n        </Dialog>\n    )\n}\n\nexport default MintTokenDialog","import React, { useState, useEffect } from 'react'\nimport {  Table, TableHead, TableBody, TableRow, TableCell, CircularProgress, Button } from '@material-ui/core';\nimport { ChainTree } from 'tupelo-wasm-sdk'\nimport SendTokenDialog from './sendtokendialog'\nimport MintTokenDialog from './minttokendialog'\n\nconst tokenPath = [\"tree\", \"_tupelo\", \"tokens\"];\n\nexport const NodeRow = ({tree,tokenName}:{tree:ChainTree, tokenName:string})=> {\n    const [balance,setBalance] = useState(0)\n    const [max,setMax] = useState(null)\n    const [loading,setLoading] = useState(true)\n    const [loaded,setLoaded] = useState(false)\n    const [mintDialogOpen, setMintDialogOpen] = useState(false)\n    const [sendDialogOpen, setSendDialogOpen] = useState(false)\n\n    const loadInfo = async ()=> {\n        setLoaded(true)\n\n        const tokenInfoPath = tokenPath.concat(tokenName)\n        const tokenInfoResp = await tree.resolve(tokenInfoPath)\n        if (tokenInfoResp.value.monetaryPolicy) {\n            const monetaryPolicy = await tree.resolve(tokenInfoPath.concat(\"monetaryPolicy\"))\n            setMax(monetaryPolicy.value['maximum'])\n        }\n\n        setBalance(tokenInfoResp.value['balance'])\n        setLoading(false)\n    }\n\n    useEffect(()=> {\n        if (!loaded) {\n            loadInfo()\n        }\n    })\n\n    const handleMintClose = ()=> {\n        setMintDialogOpen(false)\n        setLoaded(false)\n    }\n\n    const handleSendClose = ()=> {\n        setSendDialogOpen(false)\n        setLoaded(false)\n    }\n\n    return (\n        <TableRow>\n            <TableCell>\n                {tokenName}\n            </TableCell>\n            <TableCell>\n                {loading ? <CircularProgress/> : balance}\n            </TableCell>\n            <TableCell>\n                {loading ? <CircularProgress/> : max}\n            </TableCell>\n            <TableCell>\n                <Button onClick={()=>{setMintDialogOpen(true)}}>\n                    Mint\n                </Button>\n                <Button onClick={()=>{setSendDialogOpen(true)}}>\n                    Send\n                </Button>\n                <MintTokenDialog open={mintDialogOpen} onClose={handleMintClose} tree={tree} tokenName={tokenName}/>\n                <SendTokenDialog open={sendDialogOpen} onClose={handleSendClose} tree={tree} tokenName={tokenName}/>\n            </TableCell>\n        </TableRow>\n    )\n}\n\nexport const TokenList = ({ tree }: { tree: ChainTree }) => {\n    const [tokens, setTokens] = useState({});\n    const [loaded, setLoaded] = useState(false);\n\n    const loadTokens = async () => {\n        let tokenResp = await tree.resolve(tokenPath)\n\n        if (tokenResp.value) {\n            console.log(\"tokens resp: \", tokenResp)\n            setLoaded(true)\n            setTokens(tokenResp.value)\n        }\n    }\n\n    useEffect(() => {\n        if (!loaded) {\n            loadTokens()\n        }\n    })\n\n    return (\n        <Table>\n            <TableHead>\n                <TableRow>\n                    <TableCell>Name</TableCell>\n                    <TableCell>Balance</TableCell>\n                    <TableCell>Max</TableCell>\n                    <TableCell>Actions</TableCell>\n                </TableRow>\n            </TableHead>\n            <TableBody>\n                {Object.keys(tokens).map((k: string, i: number) => {\n                    return (<NodeRow key={i} tree={tree} tokenName={k}/>)\n                })}\n            </TableBody>\n        </Table>\n    )\n}\n\nexport default TokenList","import React, {useState} from 'react'\nimport {  Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, TextField, CircularProgress, Button } from '@material-ui/core';\nimport { ChainTree, establishTokenTransaction } from 'tupelo-wasm-sdk'\nimport { getCommunity } from '../community';\n\n/**\n * Establishing a token allows you to mint them. It is done before a mint because it allows you to set a monetary\n * policy. As of this writing, only a maximum is supported in the monetary policy. A maximum of 0 means unlimited.\n * \n */\nexport const EstablishTokenDialog = ({open, onClose, tree}:{open:boolean, onClose:() => void, tree:ChainTree})=> {\n\n    const [tokenName, setTokenName] = useState(\"\")\n    const [maxAmount, setMaxAmount] = useState(0)\n    const [loading,setLoading] = useState(false)\n\n    const handleSubmit = async ()=> {\n        if (tree === undefined) {\n            throw new Error(\"userTree is undefined\")\n        }\n        setLoading(true)\n        const community = await getCommunity()\n        await community.playTransactions(tree, [establishTokenTransaction(tokenName, maxAmount)])\n        _onClose()\n    }\n\n    const _onClose = ()=> {\n        setTokenName(\"\")\n        setMaxAmount(0)\n        setLoading(false)\n        onClose()\n    }\n\n    return (\n        <Dialog open={open} onClose={onClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">Establish Token</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        Establish a token with a name and a monetary policy.\n                    </DialogContentText>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"name\"\n                        label=\"Token Name\"\n                        fullWidth\n                        onChange={(evt)=> {setTokenName(evt.target.value)}}\n                        value={tokenName}\n                    />\n                    <TextField\n                        margin=\"dense\"\n                        id=\"maximum\"\n                        label=\"Maximum Amount\"\n                        type=\"number\"\n                        fullWidth\n                        onChange={(evt)=> {setMaxAmount(parseInt(evt.target.value, 10))}}\n                        value={maxAmount}\n                    />\n                </DialogContent>\n                {loading ? <CircularProgress/> : \n                <DialogActions>\n                    <Button onClick={_onClose} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleSubmit} color=\"primary\">\n                        Establish\n                    </Button>\n                </DialogActions>\n                }\n            </Dialog>\n    )\n}\n\nexport default EstablishTokenDialog","import React, { useState, useEffect } from 'react'\nimport { mount, route, redirect, map } from 'navi'\nimport { globalStorageStarted } from '../state'\nimport { ChainTree } from 'tupelo-wasm-sdk'\nimport TokenDisplay from './tokendisplay'\nimport { Button, Grid } from '@material-ui/core';\nimport ReceiveTokenDialog from './receivetokendialog'\nimport EstablishTokenDialog from './establishtokendialog'\n/**\n * Define the navi routes \n */\nexport const walletRoute = mount({\n    \"/\": map(async (req, userTreeObj) => {\n        await globalStorageStarted\n        const userTree = userTreeObj as ChainTree\n        if (userTree.id === undefined) {\n            return redirect(\"/login\")\n        }\n        return route({\n            view: <WalletPage tree={userTree} />\n        })\n    }),\n});\n\n\n/**\n * Demos all the coin transactions:\n * EstablishToken,MintToken,SendToken,ReceiveToken\n * A full flow of creating and then sending a token is this:\n * \n * * Establish the token with a monetary policy\n * * Mint some tokens (less than the maximum defined in monetaryPolicy)\n * * Send token (that you have a balance of)\n * * copy the payload generated from sending the token and send (out-of-band) to receiver\n * \n * Then the receiver\n * * Receive token transaction using the sent payload\n * \n * Note the payload does not need to be kept secure, it is tied directly to the receiving chaintree.\n */\nconst WalletPage = ({ tree }: { tree: ChainTree }) => {\n    const [dialogOpen, setDialogOpen] = useState(false)\n    const [receiveDialogOpen,setReceiveDialogOpen] = useState(false)\n    const [did,setDid] = useState(\"\")\n\n    const handleClose = () => {\n        setDialogOpen(false)\n        setReceiveDialogOpen(false)\n    }\n\n    useEffect(()=> {\n        tree.id().then((id)=> {\n            if (id != null) {\n                setDid(id)\n            }\n        })\n    })\n\n    return (\n        <div>\n            <h1>Wallet</h1>\n            <p>{did}</p>\n            <Grid container spacing={2}>\n                <Grid item>\n                    <Button variant=\"outlined\" onClick={() => { setDialogOpen(true) }}>Establish Token</Button>\n                </Grid>\n                <Grid item>\n                    <Button variant=\"outlined\" onClick={()=>{setReceiveDialogOpen(true)}}>Receive Token</Button>\n                </Grid>\n            </Grid>\n            <TokenDisplay tree={tree}/>\n            <EstablishTokenDialog open={dialogOpen} onClose={handleClose} tree={tree}/>\n            <ReceiveTokenDialog open={receiveDialogOpen} onClose={handleClose} tree={tree}/>\n        </div>\n    )\n}\n","import React, { useState, Suspense } from 'react';\n\nimport { Paper, Container, Grid, Theme, AppBar, Toolbar, Typography, TextField, InputAdornment } from '@material-ui/core';\nimport { explorerRoute } from './explorer';\nimport { makeStyles } from '@material-ui/styles';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { mount, route } from 'navi'\nimport { Router, View, useNavigation, NotFoundBoundary } from 'react-navi'\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useGlobalState } from './state';\nimport { loginRoute } from './wallet/login';\nimport { walletRoute } from './wallet/wallet';\nimport { createHashHistory } from 'history';\nimport {Community} from 'tupelo-wasm-sdk';\n\nimport 'tupelo-wasm-sdk' // in order to bring in the Go global\n\ndeclare global {\n    interface Window { Community: any; }\n}\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    root: {\n        padding: theme.spacing(3, 2),\n    },\n    title: {\n        display: 'none',\n        [theme.breakpoints.up('sm')]: {\n            display: 'block',\n        },\n    },\n    grow: {\n        flexGrow: 1,\n    },\n    search: {\n        marginLeft: theme.spacing(3),\n    },\n    searchIcon: {\n        color: \"white\",\n    }\n}));\n\nconst routes =\n    mount({\n        '/': route({\n            view: <div>Awaiting your DID</div>\n        }),\n        '/chaintrees/:did': explorerRoute,\n        '/login': loginRoute,\n        \"/wallet\": walletRoute,\n    })\n\nexport const NavBar = () => {\n    const classes = useStyles();\n    let [search, setSearch] = useState(\"\")\n    let navigation = useNavigation()\n\n    const handleSubmit = (evt: React.FormEvent) => {\n        evt.preventDefault()\n        if (!!search && search !== \"\") {\n            navigation.navigate(\"/chaintrees/\" + search)\n        }\n    }\n\n    window.Community = Community\n\n    return (\n        <AppBar position=\"static\">\n            <Toolbar>\n                <Typography className={classes.title} variant=\"h6\" noWrap>\n                    ChainTree Explorer\n            </Typography>\n                <form onSubmit={handleSubmit}>\n                    <TextField\n                        className={classes.search}\n                        id=\"did\"\n                        label=\"search...\"\n                        type=\"search\"\n                        variant=\"filled\"\n                        InputProps={{\n                            startAdornment: <InputAdornment position=\"start\"><SearchIcon className={classes.searchIcon} /></InputAdornment>,\n                        }}\n                        value={search}\n                        onChange={(evt) => {\n                            setSearch(evt.target.value)\n                        }} />\n                </form>\n            </Toolbar>\n        </AppBar>\n    )\n}\n\nexport const Layout = () => {\n    const classes = useStyles();\n    const [userTree] = useGlobalState(\"userTree\")\n\n    return (\n        <Container maxWidth=\"lg\">\n\n            <Router \n                routes={routes} \n                context={userTree} \n                history={createHashHistory()}>\n                <NavBar />\n                <Grid\n                    container\n                    direction=\"row\"\n                    justify=\"center\"\n                    alignItems=\"center\"\n                    spacing={2}\n                >\n                    <Grid item xs={12} >\n                        <Paper className={classes.root}>\n                            <NotFoundBoundary render={renderNotFound}>\n                                <Suspense fallback={<CircularProgress />}>\n                                    <View />\n                                </Suspense>\n                            </NotFoundBoundary>\n                        </Paper>\n                    </Grid>\n                </Grid>\n            </Router>\n\n        </Container>\n    )\n}\n\nconst renderNotFound = (err: Error) => {\n    return (\n        <h1>NotFound</h1>\n    )\n}","import React from 'react';\nimport './App.css';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/styles';\nimport theme from './theme';\nimport { Layout } from './layout'\nimport { GlobalStateProvider } from './state'\n\nconst App: React.FC = () => {\n  return (\n    <GlobalStateProvider>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Layout />\n      </ThemeProvider>\n    </GlobalStateProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'typeface-roboto';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar cids_1 = __importDefault(require(\"cids\"));\n\nvar go = require('./js/go');\n\nvar transactions_pb_1 = require(\"tupelo-messages/transactions/transactions_pb\");\n\nvar signatures_pb_1 = require(\"tupelo-messages/signatures/signatures_pb\");\n\nvar debug_1 = __importDefault(require(\"debug\"));\n\nvar logger = debug_1.default(\"tupelo\");\n\nvar UnderlyingWasm =\n/*#__PURE__*/\nfunction () {\n  function UnderlyingWasm() {\n    _classCallCheck(this, UnderlyingWasm);\n\n    this._populated = false;\n  }\n\n  _createClass(UnderlyingWasm, [{\n    key: \"generateKey\",\n    value: function generateKey() {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"passPhraseKey\",\n    value: function passPhraseKey(phrase, salt) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"keyFromPrivateBytes\",\n    value: function keyFromPrivateBytes(bytes) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"ecdsaPubkeyToDid\",\n    value: function ecdsaPubkeyToDid(pubKey) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"ecdsaPubkeyToAddress\",\n    value: function ecdsaPubkeyToAddress(pubKey) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"getCurrentState\",\n    value: function getCurrentState(opts) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"newEmptyTree\",\n    value: function newEmptyTree(store, publicKey) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"playTransactions\",\n    value: function playTransactions(opts) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }, {\n    key: \"tokenPayloadForTransaction\",\n    value: function tokenPayloadForTransaction(opts) {\n      return new Promise(function (res, rej) {}); // replaced by wasm\n    }\n  }]);\n\n  return UnderlyingWasm;\n}();\n\nvar TupeloWasm;\n\n(function (TupeloWasm) {\n  var _tupelowasm = new UnderlyingWasm();\n\n  function get() {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!_tupelowasm._populated) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", _tupelowasm);\n\n            case 2:\n              logger(\"go.run for first time\");\n              go.run(\"./main.wasm\");\n              _context.next = 6;\n              return go.ready();\n\n            case 6:\n              go.populate(_tupelowasm, {\n                \"cids\": cids_1.default,\n                \"ipfs-block\": require('ipfs-block')\n              });\n              _tupelowasm._populated = true;\n              return _context.abrupt(\"return\", _tupelowasm);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n  }\n\n  TupeloWasm.get = get;\n})(TupeloWasm || (TupeloWasm = {}));\n/**\n * Tupelo is the more \"raw\" namespace, it is generally expected\n * that you would use higher level wrapper classes around this namespace.\n * For example: {@link EcdsaKey} or {@link Community#\"class\"}\n * @public\n */\n\n\nvar Tupelo;\n\n(function (Tupelo) {\n  // generateKey returns a two element array of the bytes for [privateKey, publicKey]\n  function generateKey() {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var tw;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              logger(\"generateKey\");\n              _context2.next = 3;\n              return TupeloWasm.get();\n\n            case 3:\n              tw = _context2.sent;\n              return _context2.abrupt(\"return\", tw.generateKey());\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n  }\n\n  Tupelo.generateKey = generateKey;\n\n  function passPhraseKey(phrase, salt) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var tw;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              logger(\"passPhraseKey\");\n              _context3.next = 3;\n              return TupeloWasm.get();\n\n            case 3:\n              tw = _context3.sent;\n              return _context3.abrupt(\"return\", tw.passPhraseKey(phrase, salt));\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n  }\n\n  Tupelo.passPhraseKey = passPhraseKey;\n\n  function keyFromPrivateBytes(bytes) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      var tw;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              logger(\"keyFromPrivateBytes\");\n              _context4.next = 3;\n              return TupeloWasm.get();\n\n            case 3:\n              tw = _context4.sent;\n              return _context4.abrupt(\"return\", tw.keyFromPrivateBytes(bytes));\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n  }\n\n  Tupelo.keyFromPrivateBytes = keyFromPrivateBytes;\n\n  function ecdsaPubkeyToDid(pubKey) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee5() {\n      var tw;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              logger(\"ecdsaPubkeyToDid\");\n              _context5.next = 3;\n              return TupeloWasm.get();\n\n            case 3:\n              tw = _context5.sent;\n              return _context5.abrupt(\"return\", tw.ecdsaPubkeyToDid(pubKey));\n\n            case 5:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n  }\n\n  Tupelo.ecdsaPubkeyToDid = ecdsaPubkeyToDid;\n\n  function ecdsaPubkeyToAddress(pubKey) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee6() {\n      var tw;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              logger(\"ecdsaPubkeyToAddress\");\n              _context6.next = 3;\n              return TupeloWasm.get();\n\n            case 3:\n              tw = _context6.sent;\n              return _context6.abrupt(\"return\", tw.ecdsaPubkeyToAddress(pubKey));\n\n            case 5:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n  }\n\n  Tupelo.ecdsaPubkeyToAddress = ecdsaPubkeyToAddress;\n\n  function getCurrentState(opts) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee7() {\n      var tw, stateBits;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              logger(\"getCurrentState\");\n              _context7.next = 3;\n              return TupeloWasm.get();\n\n            case 3:\n              tw = _context7.sent;\n              _context7.prev = 4;\n              _context7.next = 7;\n              return tw.getCurrentState(opts);\n\n            case 7:\n              stateBits = _context7.sent;\n              return _context7.abrupt(\"return\", signatures_pb_1.CurrentState.deserializeBinary(stateBits));\n\n            case 11:\n              _context7.prev = 11;\n              _context7.t0 = _context7[\"catch\"](4);\n              throw _context7.t0;\n\n            case 14:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[4, 11]]);\n    }));\n  }\n\n  Tupelo.getCurrentState = getCurrentState; // newEmptyTree creates a new ChainTree with the ID populateed in the IBlockService and\n  // returns the CID to the tip\n\n  function newEmptyTree(store, publicKey) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee8() {\n      var tw;\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              logger(\"newEmptyTree\");\n              _context8.next = 3;\n              return TupeloWasm.get();\n\n            case 3:\n              tw = _context8.sent;\n              return _context8.abrupt(\"return\", tw.newEmptyTree(store, publicKey));\n\n            case 5:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n  }\n\n  Tupelo.newEmptyTree = newEmptyTree;\n\n  function tokenPayloadForTransaction(opts) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee9() {\n      var tw, respBits;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              logger(\"tokenPayloadForTransaction\");\n              _context9.next = 3;\n              return TupeloWasm.get();\n\n            case 3:\n              tw = _context9.sent;\n              _context9.next = 6;\n              return tw.tokenPayloadForTransaction({\n                blockService: opts.blockService,\n                tip: opts.tip,\n                tokenName: opts.tokenName,\n                sendId: opts.sendId,\n                jsSendTxSig: opts.signature.serializeBinary()\n              });\n\n            case 6:\n              respBits = _context9.sent;\n              return _context9.abrupt(\"return\", transactions_pb_1.TokenPayload.deserializeBinary(respBits));\n\n            case 8:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n  }\n\n  Tupelo.tokenPayloadForTransaction = tokenPayloadForTransaction;\n\n  function playTransactions(publisher, notaryGroup, tree, transactions) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee10() {\n      var tw, transBits, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, t, serialized, store, privateKey, resp, currState, sig;\n\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              logger(\"playTransactions\");\n\n              if (!(tree.key == undefined)) {\n                _context10.next = 3;\n                break;\n              }\n\n              throw new Error(\"playing transactions on a tree requires the tree to have a private key, use tree.key = <ecdsaKey>\");\n\n            case 3:\n              _context10.next = 5;\n              return TupeloWasm.get();\n\n            case 5:\n              tw = _context10.sent;\n              transBits = new Array();\n              _iteratorNormalCompletion = true;\n              _didIteratorError = false;\n              _iteratorError = undefined;\n              _context10.prev = 10;\n\n              for (_iterator = transactions[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                t = _step.value;\n                serialized = t.serializeBinary();\n                transBits = transBits.concat(serialized);\n              }\n\n              _context10.next = 18;\n              break;\n\n            case 14:\n              _context10.prev = 14;\n              _context10.t0 = _context10[\"catch\"](10);\n              _didIteratorError = true;\n              _iteratorError = _context10.t0;\n\n            case 18:\n              _context10.prev = 18;\n              _context10.prev = 19;\n\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n\n            case 21:\n              _context10.prev = 21;\n\n              if (!_didIteratorError) {\n                _context10.next = 24;\n                break;\n              }\n\n              throw _iteratorError;\n\n            case 24:\n              return _context10.finish(21);\n\n            case 25:\n              return _context10.finish(18);\n\n            case 26:\n              store = tree.store;\n              privateKey = tree.key.privateKey ? tree.key.privateKey : new Uint8Array();\n\n              if (!(privateKey.length == 0)) {\n                _context10.next = 30;\n                break;\n              }\n\n              throw new Error(\"can only play transactions on a tree with a private key attached\");\n\n            case 30:\n              _context10.next = 32;\n              return tw.playTransactions({\n                notaryGroup: notaryGroup.serializeBinary(),\n                publisher: publisher,\n                blockService: store,\n                privateKey: privateKey,\n                tip: tree.tip,\n                transactions: transBits\n              });\n\n            case 32:\n              resp = _context10.sent;\n              currState = signatures_pb_1.CurrentState.deserializeBinary(resp);\n              sig = currState.getSignature();\n\n              if (!(sig == undefined)) {\n                _context10.next = 37;\n                break;\n              }\n\n              throw new Error(\"empty signature received from CurrState\");\n\n            case 37:\n              tree.tip = new cids_1.default(Buffer.from(sig.getNewTip_asU8()));\n              return _context10.abrupt(\"return\", currState);\n\n            case 39:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10, null, [[10, 14, 18, 26], [19,, 21, 25]]);\n    }));\n  }\n\n  Tupelo.playTransactions = playTransactions;\n})(Tupelo = exports.Tupelo || (exports.Tupelo = {}));\n\nexports.default = Tupelo;","\"use strict\";\n/**\n * The Tupelo WASM SDK is designed to be used in both nodejs and the browser.\n * @packageDocumentation\n */\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__export(require(\"./tupelo\"));\n\n__export(require(\"./node\"));\n\n__export(require(\"./crypto\"));\n\n__export(require(\"./chaintree\"));\n\n__export(require(\"./community\"));\n\n__export(require(\"./repo\"));\n\n__export(require(\"./notarygroup\"));","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar libp2p = require('./js/p2p');\n/**\n * @public\n */\n\n\nvar p2p;\n\n(function (p2p) {\n  /**\n   *\n   * @param opts - {@link INodeOptions}\n   * @public\n   */\n  function createNode(opts) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", libp2p.CreateNode({\n                config: {\n                  peerDiscovery: {\n                    bootstrap: {\n                      list: opts.bootstrapAddresses\n                    }\n                  }\n                }\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n  }\n\n  p2p.createNode = createNode;\n})(p2p = exports.p2p || (exports.p2p = {}));","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Ipld = require('ipld');\n/**\n * Underlies a ChainTree, it represents a DAG of IPLD nodes and supports resolving accross\n * multiple nodes.\n * @public\n */\n\n\nvar Dag =\n/*#__PURE__*/\nfunction () {\n  function Dag(tip, store) {\n    _classCallCheck(this, Dag);\n\n    this.tip = tip;\n    this.dagStore = new Ipld({\n      blockService: store\n    });\n  }\n  /**\n   * Gets a node from the dag\n   * @param cid - The CID of the node to get from the DAG\n   * @public\n   */\n\n\n  _createClass(Dag, [{\n    key: \"get\",\n    value: function get(cid) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", this.dagStore.get(cid));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n    /**\n     *\n     * @param path - an array of strings which form a path to the desired node/key in the DAG\n     * @public\n     */\n\n  }, {\n    key: \"resolve\",\n    value: function resolve(path) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", this.resolveAt(this.tip, path));\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n    /**\n     * Similar to resolve, but allows you to start at a specific tip of a dag rather than the current tip.\n     * @param tip - The tip of the dag to start at\n     * @param path - the path to find the value\n     * @public\n     */\n\n  }, {\n    key: \"resolveAt\",\n    value: function resolveAt(tip, path) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var str_path, resolved, lastVal, e;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                str_path = path.join(\"/\");\n                resolved = this.dagStore.resolve(tip, str_path);\n                _context3.prev = 2;\n                _context3.next = 5;\n                return resolved.last();\n\n              case 5:\n                lastVal = _context3.sent;\n                _context3.next = 13;\n                break;\n\n              case 8:\n                _context3.prev = 8;\n                _context3.t0 = _context3[\"catch\"](2);\n                e = _context3.t0;\n\n                if (e.message.startsWith(\"Object has no property\")) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                throw _context3.t0;\n\n              case 13:\n                if (!(typeof lastVal === 'undefined')) {\n                  _context3.next = 15;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", {\n                  remainderPath: path,\n                  value: null\n                });\n\n              case 15:\n                if (!(lastVal.remainderPath != \"\")) {\n                  _context3.next = 17;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", {\n                  remainderPath: lastVal.remainderPath.split(\"/\"),\n                  value: null\n                });\n\n              case 17:\n                return _context3.abrupt(\"return\", {\n                  remainderPath: [],\n                  value: lastVal.value\n                });\n\n              case 18:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[2, 8]]);\n      }));\n    }\n  }]);\n\n  return Dag;\n}();\n\nexports.Dag = Dag;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _this = this;\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar community_1 = require(\"./community\");\n\nvar notarygroup_1 = require(\"../notarygroup\");\n\nvar repo_1 = __importDefault(require(\"../repo\"));\n\nvar node_1 = require(\"../node\");\n\nvar debug_1 = __importDefault(require(\"debug\"));\n\nvar log = debug_1.default(\"community:default\");\n\nvar MemoryDatastore = require('interface-datastore').MemoryDatastore;\n\nvar testNetToml = \"id = \\\"testnet\\\"\\nBootstrapAddresses = [\\n  \\\"/dns4/3-123-96-106.ssl.quorumcontrol.com/tcp/443/wss/ipfs/16Uiu2HAmLMQwov4gUfMYGA8Joiob7A2j9gKRTMzBpUgaMJchoAGd\\\",\\n  \\\"/dns4/3-221-84-48.ssl.quorumcontrol.com/tcp/443/wss/ipfs/16Uiu2HAmN9ZudXfmPwqLqLBUDW9kyomsbADhU2ASKKYYJT45FPyi\\\",\\n  \\\"/dns4/52-53-97-145.ssl.quorumcontrol.com/tcp/443/wss/ipfs/16Uiu2HAmBFKXigYAWknDkbNQ2rNxtsihhvrFkmfmowNuq55eLWSP\\\",\\n]\\n\\n[[signers]]\\nVerKeyHex = \\\"0x867c679dd953736544eea3127a36d43c5d588c281e3da9d9dfabf0a8dffe81a93f8618b25e563a959d7970d2fda5c9a6ca6c077ce8eddc6bc8868effcbfc3c3e280e1fbc41c2804bfb7f5a12b5b33845ab10e33c64dc399404b4a47c1d82613552c2f2965e8cb9abca1e601f89925c1471a7018895c5166221f32dd252a29650\\\"\\nDestKeyHex = \\\"0x040560b2fe4131beeb4a90f1f9a69a15c1bd9510812e2e25345b966a156711898e4e87bb2cc7162e9632cc962ab2193d817fe9703d2d6fbd5db295abd0cff79efe\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x5e33249b2a85d5f819a603b41d5c83d78c7410722d9f74a9e8c6600f31435b6f361b2d7021d526e7935436fe90981f32603c6b31c13ada87d5d46e0a359b8a8e650ec09df6e6d8ce7994e27891747d07f347d3b1f1dd1b7e4cfd7ff06f71c5e13c2a5a0d1aa465fb5006cba1e3251109a5f86dd1b9cd0d483419feaa12dc4280\\\"\\nDestKeyHex = \\\"0x04fbb7aeb467925ec541e3f0a4e3a1036cb1d847cd53c92934e7c3e2718118cde8a2dd6de4e1339baebcd8928b6a1d495f40e2849d1d08b393092fe5d2c007aff0\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x15c92f871f12c00b2d0004241c99689a45e27e43d4cef7fd27b0b198868de25085de8b5bac0678b6b5ca8baea1b586a99ffe65579fe96f0bfcdcbc5dce04be9b76de1c1764271614424b731f339e778a4b3362e14aca8d905f8a4a8f54399ae14347e241df786687e1759b8d0526111b2897aff0da32077980620e48516a74fd\\\"\\nDestKeyHex = \\\"0x040b6193752e88b8d74214f4f415f7514cc914feca54d4ca47c5a33d6da28acadc0b53e1fc7f231a186032332e5c9853c675d0a3540c7f7faa03bd2d387a27cafc\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x2d4ca8a6182dbb74240d0a0a393427b45d3549308385c07dd2c96542523571e213b69e7d5769c4173d97ec77ec4db72244821c41d479802fa5d75cc2a31ac3264aeb54a404d5f16d20a8d6337dc66f8e32158ce827b1a87115bf4c7726b6ca2d22ce0c4a0465bcba563c50683903d8a43cea77e8986ce769dd0ac1812e7f88cc\\\"\\nDestKeyHex = \\\"0x0436ab7e03178260b6279b1dbf4a8e1a165d6aae6f62b075abad639d6b076c4e9db8e30e2df58bf70adffedcfa58c16bf6b6a856f43997d8ce6ec05c4c91ad0841\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x851b9db5331df5778e52d2bfa81c1f676a69b3f353f2874470a51a0ee1c86f21493fe3851936923484443045ca5efeddfc8fa546ae270a12e1b0a8179732a469389f6c3636edec4fa85ab0cccaa12dae2fa0d960d0d9a13c1db313db9cd9b48057efac0152f2dc2126694ebc9b228c5c136e05bab448361ef3fe589ab925fd0e\\\"\\nDestKeyHex = \\\"0x0415a161376677e171adfac81929e811e9ee0b499b8d1913164e9fc4dab18c7ace3b27a4292590b851e8cc69df5ae0fa5aca785f1d2bf9bed75227823bedcbec5e\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x61d29e7dbff838b61dc3934a6bb3fb1b18767fbb3b6520fe9fb94e046bb6b951021261871e8b96c43ddf99c1b60eb04f5c3313a3b104860329f21c28d1cf1815407a8583fc9984beb75507b6009e50e58b1bd3dbde0eff512410c6dfc583539a58baef477b4e922890251f92c529a6a875bbb68808f0235582fb29b9eee3563e\\\"\\nDestKeyHex = \\\"0x04e3a2e47c2e82cab1a19d5aea6f86e4ad2c440916cd07430b082d41f229a747feaab4d2e6cbe79bb0d55f6ced6062842ee72b8746c3d466249714d63ddec23b68\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x09491cb4cc81652d97ba7b78f9bbe91d391e1d6127e4999efe59bf18fa04192887d2522ee53639120642194dc409a8e03a44a8d7c2145f5ea148f9aa77342610149e79ca0cf509b1a9284cc6125e570e159c17fbffbc47f5ca5423e80a49b75776ef9621fa20bb5ab73d25e9f59e405c2c6b2bda89ecf65d14b4925e94b1ed7a\\\"\\nDestKeyHex = \\\"0x04cdc351158774938570f8610727751c5229d505a6ff5f1ad1c31c091c2505fe49f91a38f756ddccf9272b89e7f6790a26e10de32f9c96eeeba4ca819343812b47\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x48d186d0d5fad19e3b377fd3583cbec39826cabd36b73b8b6eabde45da1432dd63389bb82c7214b911b5c617852eb35525461dfabf6cd41ca3e54d1a230fa745728b8cb5e42720958dd967b5fa4e68d07120ea26c4e57d80477fda8d0064d9bf78ccd9ec2444dad591fe78a40fb30373855f3aea3cb21cebc67eb6f1a07867b5\\\"\\nDestKeyHex = \\\"0x043f6d3fa2ef77d9cef9c1b4d32f783b1db1a8f8eba535d3258c044039275fda7c47da7de67232054444d6482eb644e9a8cec6d9ec2185f41339fcedf5ee234742\\\"\\n\\n[[signers]]\\nVerKeyHex = \\\"0x0acbbc879cd7ec18498419cf51ca1e25ef5d080823eebdc0f8892007b12225cd1bc573cb73aa8dde600e595036ea96b6a97136dc18f2ae7e8e75fb98bcc1a91942e722bfcfeeb93e9db9adb6a7e4cf598d57a65d453642d6c657f3ee258d2a4772470db264d5165001ce4605d3bce981c7e95ecadc2d764cea6b539c65b9ff90\\\"\\nDestKeyHex = \\\"0x046d0293103d8975b174bbe5752a958b13c3f937ae67b24027b6cafb780b8d88e9790bc3f463bd3acc8d5226bb8329d1ba9959381a4b778bdf5b4e97e81c2b0fce\\\"\\n\";\n/**\n * The default (testnet) notary group for the Tupelo Network\n * @public\n */\n\nexports.defaultNotaryGroup = notarygroup_1.tomlToNotaryGroup(testNetToml);\n\nvar _defaultCommunity;\n/**\n *\n * @internal\n */\n\n\nexports._getDefault = function (repo) {\n  return __awaiter(_this, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var _this2 = this;\n\n    var node, c;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!(repo == undefined)) {\n              _context2.next = 6;\n              break;\n            }\n\n            repo = new repo_1.default(\"default\");\n            _context2.next = 4;\n            return repo.init({});\n\n          case 4:\n            _context2.next = 6;\n            return repo.open();\n\n          case 6:\n            if (!(_defaultCommunity !== undefined)) {\n              _context2.next = 8;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", _defaultCommunity.start());\n\n          case 8:\n            _context2.next = 10;\n            return node_1.p2p.createNode({\n              bootstrapAddresses: exports.defaultNotaryGroup.getBootstrapAddressesList()\n            });\n\n          case 10:\n            node = _context2.sent;\n            node.on('error', function (err) {\n              console.error('p2p error: ', err);\n            });\n            node.start(function () {\n              log(\"node started\");\n            }); // clear the defaultcommunity on a node stopage\n\n            node.once('stop', function () {\n              return __awaiter(_this2, void 0, void 0,\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee() {\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _defaultCommunity = undefined;\n\n                      case 1:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n            });\n            c = new community_1.Community(node, exports.defaultNotaryGroup, repo.repo);\n            _defaultCommunity = c;\n            return _context2.abrupt(\"return\", c.start());\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n};","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar events_1 = __importDefault(require(\"events\"));\n\nvar transactions_pb_1 = require(\"tupelo-messages/transactions/transactions_pb\");\n\nvar cids_1 = __importDefault(require(\"cids\"));\n\nvar wrappedblockservice_1 = require(\"./wrappedblockservice\");\n\nvar tupelo_1 = __importDefault(require(\"../tupelo\"));\n\nvar default_1 = require(\"./default\");\n\nvar debug_1 = __importDefault(require(\"debug\"));\n\nvar debugLog = debug_1.default(\"community\"); // const IpfsBlockService:any = require('ipfs-block-service');\n\nvar IpfsBitswap = require('ipfs-bitswap');\n\nvar IpfsBlockService = require('ipfs-block-service');\n\nfunction tipTopicFromNotaryGroup(ng) {\n  return ng.getId() + \"-tips\";\n}\n/**\n * Commmunity is a combination of a Tupelo NotaryGroup and the application 'Community' running.\n * The remote p2p community app will also store blocks, and this is the default supported way\n * that the current wasm-sdk works.\n * @public\n */\n\n\nvar Community =\n/*#__PURE__*/\nfunction (_events_1$default) {\n  _inherits(Community, _events_1$default);\n\n  function Community(node, group, repo) {\n    var _this;\n\n    _classCallCheck(this, Community);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Community).call(this));\n    _this._started = false;\n    _this.node = node;\n    _this.group = group;\n    _this.repo = repo;\n    _this.bitswap = new IpfsBitswap(_this.node, _this.repo.blocks);\n    _this.blockservice = new wrappedblockservice_1.WrappedBlockService(new IpfsBlockService(_this.repo));\n\n    _this.blockservice.setExchange(_this.bitswap);\n\n    _this._startPromiseResolve = function () {}; // replaced on the line below, this just stops typescript from complaining\n\n\n    _this._startPromiseReject = function () {}; // replaced on the line below, this just stops typescript from complaining\n\n\n    _this._startPromise = new Promise(function (resolve) {\n      _this._startPromiseResolve = resolve;\n    });\n    return _this;\n  }\n\n  _createClass(Community, [{\n    key: \"waitForStart\",\n    value: function waitForStart() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", this._startPromise);\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n    /**\n     * getCurrentState returns the current state (signatures)\n     * for a given ChainTree (its DID)\n     * @public\n    */\n\n  }, {\n    key: \"getCurrentState\",\n    value: function getCurrentState(did) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.start();\n\n              case 2:\n                _context2.next = 4;\n                return this.nextUpdate();\n\n              case 4:\n                if (!(this.tip == undefined)) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                throw new Error(\"tip still undefined, even though community started and update received\");\n\n              case 6:\n                return _context2.abrupt(\"return\", tupelo_1.default.getCurrentState({\n                  did: did,\n                  blockService: this.blockservice,\n                  tip: this.tip\n                }));\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n    /**\n     * returns the TIP as a CID of the ChainTree. This is more of a convenience function\n     * around getting the current state, and then casting the tip, etc.\n     * @param did - The DID of the ChainTree\n     */\n\n  }, {\n    key: \"getTip\",\n    value: function getTip(did) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var state, sig;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.getCurrentState(did);\n\n              case 2:\n                state = _context3.sent;\n                sig = state.getSignature();\n\n                if (!(sig == undefined)) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                throw new Error(\"undefined signature\");\n\n              case 6:\n                return _context3.abrupt(\"return\", new cids_1.default(Buffer.from(sig.getNewTip_asU8())));\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }, {\n    key: \"sendTokenAndGetPayload\",\n    value: function sendTokenAndGetPayload(tree, tx) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        var sendTokenPayload, resp, sig;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                sendTokenPayload = tx.getSendTokenPayload();\n\n                if (!(tx.getType() != transactions_pb_1.Transaction.Type.SENDTOKEN || sendTokenPayload === undefined)) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                throw new Error(\"must use a send token transaction here\");\n\n              case 3:\n                _context4.next = 5;\n                return this.playTransactions(tree, [tx]);\n\n              case 5:\n                resp = _context4.sent;\n                sig = resp.getSignature();\n\n                if (!(sig === undefined)) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                throw new Error('received undefined signature');\n\n              case 9:\n                return _context4.abrupt(\"return\", tupelo_1.default.tokenPayloadForTransaction({\n                  blockService: this.blockservice,\n                  tip: tree.tip,\n                  tokenName: sendTokenPayload.getName(),\n                  sendId: sendTokenPayload.getId(),\n                  signature: sig\n                }));\n\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n    }\n    /**\n     * playTransactions is a convenience wrapper on community to make calling the underlying Tupelo.playTransactions\n     * easier when using a fully community client\n    */\n\n  }, {\n    key: \"playTransactions\",\n    value: function playTransactions(tree, transactions) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                return _context5.abrupt(\"return\", tupelo_1.default.playTransactions(this.node.pubsub, this.group, tree, transactions));\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n    }\n    /** next update is a helper function\n     * which lets you do an await until the next tip\n     * update of the community\n    */\n\n  }, {\n    key: \"nextUpdate\",\n    value: function nextUpdate() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6() {\n        var resolve, p;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                p = new Promise(function (res, _rej) {\n                  resolve = res;\n                });\n                this.once('tip', function () {\n                  resolve();\n                });\n                return _context6.abrupt(\"return\", p);\n\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n    }\n    /**\n     * starts up the community\n    */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (!this._started) {\n                  _context8.next = 2;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\", this._startPromise);\n\n              case 2:\n                this._started = true;\n                this.bitswap.start(function () {\n                  debugLog(\"bitswap started\");\n                });\n\n                if (!this.node.isStarted()) {\n                  _context8.next = 16;\n                  break;\n                }\n\n                _context8.prev = 5;\n                _context8.next = 8;\n                return this.subscribeToTips();\n\n              case 8:\n                _context8.next = 14;\n                break;\n\n              case 10:\n                _context8.prev = 10;\n                _context8.t0 = _context8[\"catch\"](5);\n                this._started = false;\n\n                this._startPromiseReject(_context8.t0);\n\n              case 14:\n                _context8.next = 17;\n                break;\n\n              case 16:\n                this.node.once('start', function () {\n                  return __awaiter(_this2, void 0, void 0,\n                  /*#__PURE__*/\n                  _regeneratorRuntime.mark(function _callee7() {\n                    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n                      while (1) {\n                        switch (_context7.prev = _context7.next) {\n                          case 0:\n                            _context7.prev = 0;\n                            _context7.next = 3;\n                            return this.subscribeToTips();\n\n                          case 3:\n                            _context7.next = 9;\n                            break;\n\n                          case 5:\n                            _context7.prev = 5;\n                            _context7.t0 = _context7[\"catch\"](0);\n                            this._started = false;\n\n                            this._startPromiseReject(_context7.t0);\n\n                          case 9:\n                          case \"end\":\n                            return _context7.stop();\n                        }\n                      }\n                    }, _callee7, this, [[0, 5]]);\n                  }));\n                });\n\n              case 17:\n                this._startPromiseResolve(this);\n\n                this.emit('start');\n                return _context8.abrupt(\"return\", this._startPromise);\n\n              case 20:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[5, 10]]);\n      }));\n    }\n  }, {\n    key: \"subscribeToTips\",\n    value: function subscribeToTips() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee9() {\n        var _this3 = this;\n\n        var resolve, reject, p;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                p = new Promise(function (res, rej) {\n                  resolve = res, reject = rej;\n                });\n                this.node.pubsub.subscribe(tipTopicFromNotaryGroup(this.group), function (msg) {\n                  if (msg.data.length > 0) {\n                    _this3.tip = new cids_1.default(Buffer.from(msg.data));\n\n                    _this3.emit('tip', _this3.tip);\n\n                    debugLog(\"tip received: cid: \", _this3.tip, \" raw: \", msg.data);\n                  } else {\n                    debugLog(\"received null tip\");\n                  }\n                }, function (err) {\n                  if (err) {\n                    reject(err);\n                    return;\n                  }\n\n                  debugLog(\"subscribed to tips\");\n                  resolve();\n                });\n\n              case 2:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n    }\n  }]);\n\n  return Community;\n}(events_1.default);\n\nexports.Community = Community;\n\n(function (Community) {\n  /**\n   * getDefault returns the default Tupelo commuity. This is currently the Tupelo testnet.\n   * It creates a libp2p node and connects to the testnet, establishes the community connection.\n   * This method optionally takes a {@link Repo}. If you do not pass in a Repo, then it will create a\n   * default repo. Details on the default can be found:\n   * @param repo - (optional) - a {@link Repo} object (wrapper around an IPFS repo).\n   * @public\n  */\n  function getDefault(repo) {\n    return __awaiter(this, void 0, void 0,\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee10() {\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              return _context10.abrupt(\"return\", default_1._getDefault(repo));\n\n            case 1:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n  }\n\n  Community.getDefault = getDefault;\n})(Community = exports.Community || (exports.Community = {}));","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = __importDefault(require(\"util\"));\n/**\n * A wrapper around a callback-based IBlockService that allows async/await\n * There is an open PR on the bitswap PR which will allow us to switch to the ipfs-maintained version.\n * @public\n */\n\n\nvar WrappedBlockService =\n/*#__PURE__*/\nfunction () {\n  function WrappedBlockService(blockservice) {\n    _classCallCheck(this, WrappedBlockService);\n\n    this.blockservice = blockservice;\n  }\n\n  _createClass(WrappedBlockService, [{\n    key: \"put\",\n    value: function put(block) {\n      return util_1.default.promisify(this.blockservice.put.bind(this.blockservice))(block);\n    }\n  }, {\n    key: \"get\",\n    value: function get(cid) {\n      return util_1.default.promisify(this.blockservice.get.bind(this.blockservice))(cid);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(cid) {\n      return util_1.default.promisify(this.blockservice.delete.bind(this.blockservice))(cid);\n    }\n  }, {\n    key: \"setExchange\",\n    value: function setExchange(bitswap) {\n      this.blockservice.setExchange(bitswap);\n    }\n  }, {\n    key: \"unsetExchange\",\n    value: function unsetExchange() {\n      this.blockservice.unsetExchange();\n    }\n  }, {\n    key: \"hasExchange\",\n    value: function hasExchange() {\n      return this.blockservice.hasExchange();\n    }\n  }]);\n\n  return WrappedBlockService;\n}();\n\nexports.WrappedBlockService = WrappedBlockService;","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar config_pb_1 = require(\"tupelo-messages/config/config_pb\");\n\nvar toml_1 = __importDefault(require(\"toml\"));\n\nfunction hexToBuffer(hex) {\n  // the hex that we export in go is always prefaced with \"0x\", so strip that off\n  return Buffer.from(hex.substr(2), \"hex\");\n} // stack overflow ftw\n\n\nfunction toCamel(o) {\n  var newO, origKey, newKey, value;\n\n  if (o instanceof Array) {\n    return o.map(function (value) {\n      if (typeof value === \"object\") {\n        value = toCamel(value);\n      }\n\n      return value;\n    });\n  } else {\n    newO = {};\n\n    for (origKey in o) {\n      if (Object.prototype.hasOwnProperty.call(o, origKey)) {\n        newKey = (origKey.charAt(0).toLowerCase() + origKey.slice(1) || origKey).toString();\n        value = o[origKey];\n\n        if (value instanceof Array || value !== null && value.constructor === Object) {\n          value = toCamel(value);\n        }\n\n        newO[newKey] = value;\n      }\n    }\n  }\n\n  return newO;\n}\n/**\n * takes a toml config and returns a NotaryGroup object.\n * @param tomlString - a notary group HumanConfig in toml format\n * @public\n */\n\n\nfunction tomlToNotaryGroup(tomlString) {\n  var config = toml_1.default.parse(tomlString);\n  return configToNotaryGroup(toCamel(config));\n}\n\nexports.tomlToNotaryGroup = tomlToNotaryGroup;\n\nfunction configToNotaryGroup(obj) {\n  var ng = new config_pb_1.NotaryGroup();\n  ng.setId(obj.id);\n  ng.setBootstrapAddressesList(obj.bootstrapAddresses);\n  var signers = [];\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = obj.signers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var s = _step.value;\n      var publicKeySet = new config_pb_1.PublicKeySet();\n      publicKeySet.setVerKey(hexToBuffer(s.verKeyHex));\n      publicKeySet.setDestKey(hexToBuffer(s.destKeyHex));\n      signers = signers.concat(publicKeySet);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  ng.setSignersList(signers);\n  return ng;\n}\n\nexports.default = tomlToNotaryGroup;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = __importDefault(require(\"util\"));\n\nvar IpfsRepo = require('ipfs-repo');\n/**\n * Repo is a typescript wrapper around the IPFS Repo {@link https://github.com/ipfs/js-ipfs-repo}\n * @public\n */\n\n\nvar Repo =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @param name - The name of the repo\n   * @param opts - (optional) {@link RepoOpts} - if opts are unspecified, it will use the IPFS repo defaults\n   * @public\n   */\n  function Repo(name, opts) {\n    _classCallCheck(this, Repo);\n\n    this.repo = new IpfsRepo(name, opts);\n  }\n\n  _createClass(Repo, [{\n    key: \"init\",\n    value: function init(opts) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", util_1.default.promisify(this.repo.init.bind(this.repo))(opts));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", util_1.default.promisify(this.repo.open.bind(this.repo))());\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", util_1.default.promisify(this.repo.close.bind(this.repo))());\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }, {\n    key: \"put\",\n    value: function put(key, val) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                return _context4.abrupt(\"return\", util_1.default.promisify(this.repo.datastore.put.bind(this.repo.datastore))(key, val));\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                return _context5.abrupt(\"return\", util_1.default.promisify(this.repo.datastore.get.bind(this.repo.datastore))(key));\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n    }\n  }, {\n    key: \"query\",\n    value: function query(_query) {\n      return this.repo.datastore.query(_query);\n    }\n  }]);\n\n  return Repo;\n}();\n\nexports.Repo = Repo;\nexports.default = Repo;","import {Community} from 'tupelo-wasm-sdk'\n\nexport const getCommunity = async ()=> {\n    let c = await Community.getDefault()\n    await c.nextUpdate()\n    return c\n}","import React, { useState } from 'react';\nimport { route,mount } from 'navi';\nimport { TextField, Button, Grid, Typography, CircularProgress } from '@material-ui/core';\nimport { EcdsaKey, Tupelo, ChainTree, setOwnershipTransaction, setDataTransaction } from 'tupelo-wasm-sdk';\nimport { useNavigation } from 'react-navi';\nimport { dispatch } from '../state';\nimport { getCommunity } from '../community';\n\nexport const usernameKey = \"/_crazywallet/username\"\nconst namespace =  Buffer.from(\"_crazywallet-dev\")\n\n/**\n * Generates a public/private keypair from an *insecure* passphrase.\n * This method is used to generate a ChainTree with a known name (given a namespace)\n * The very first thing you do with the ChainTree should be to ChangeOwner\n * @param userName - the username\n */\nconst publicUserKey = async (userName:string)=> {\n    return EcdsaKey.passPhraseKey(Buffer.from(userName),namespace)\n}\n\n/**\n * Fetch the ChainTree based on the username see {@link publicUserKey} for more details\n * on how we determine the ChainTree from the username.\n * \n * @param userName - the username\n */\nconst userTree = async (userName:string) => {\n    const key = await publicUserKey(userName)\n    // Convert the key to a tupelo DID (ChainTree id)\n    const did = await Tupelo.ecdsaPubkeyToDid(key.publicKey)\n\n    const community = await getCommunity()\n    let tip\n    try {\n        tip = await community.getTip(did)\n    } catch(e) {\n        if (e === \"not found\") {\n            return null\n        }\n    }\n    if (tip === undefined) {\n        return null\n    }\n    const tree = new ChainTree({\n        store: community.blockservice,\n        tip: tip,\n    })\n    return tree\n}\n\n/**\n * Define the navi routes \n */\nexport const loginRoute = mount({\n    \"/\": route(async (req) => {\n            return {\n                view: <RootLoginPage />\n            }\n    }),\n    \"/available/:username\": route(async (req) => {\n        const username = req.params.username\n        const tree = await userTree(username)\n        if (tree) {\n            return {\n                view: <UsernameUnavailable userName={username} tree={tree} />\n            }\n        } else {\n            return {\n                view: <UsernameAvailable userName={username} />\n            }\n        }\n    }),\n});\n\n\n/**\n * \n * When the username is unavailable\n */\nconst UsernameUnavailable = ({userName, tree}:{userName:string, tree:ChainTree}) => {\n    const navigation = useNavigation()\n\n    const [loading,setLoading] = useState(false)\n    const [password,setPassword] = useState(\"\")\n    const [badPassword,setBadPassword] = useState(false)\n\n    const handleSubmit = async (evt:React.FormEvent)=> {\n        evt.preventDefault()\n\n        setLoading(true)\n        setBadPassword(false)\n        let secureKey = await EcdsaKey.passPhraseKey(Buffer.from(password), Buffer.from(userName))\n        let secureAddr = await Tupelo.ecdsaPubkeyToAddress(secureKey.publicKey)\n        let resolveResp = await tree.resolve([\"tree\", \"_tupelo\", \"authentications\"])\n        setLoading(false)\n        let auths:string[] = resolveResp.value\n        if (auths.includes(secureAddr)) {\n            dispatch({\n                type:\"setKey\",\n                userKey: secureKey,\n            })\n            dispatch({\n                type:\"setTree\",\n                userTree: tree,\n            })\n            navigation.navigate(\"/wallet\")\n        } else {\n            setBadPassword(true)\n        }\n        setLoading(false)\n    }\n\n    return (\n        <div>\n            Username {userName} is NOT available.\n            <p>Your Username? You can login.</p>\n            <form onSubmit={handleSubmit}>\n            {loading ? <CircularProgress/> : null}\n             <Grid container spacing={2}>\n                    <Grid item>\n                        <TextField error={badPassword} label=\"password\" id=\"password\" type=\"password\" value={password} onChange={(evt) => {setPassword(evt.target.value)}}/>\n                    </Grid>\n                    <Grid item>\n                        <Button type=\"submit\" variant=\"contained\">Submit</Button>\n                    </Grid>\n                </Grid>\n            </form>\n        </div>\n    )\n}\n\n/**\n * When the user name is available, offer to register the user with a password.\n * Under the hood, we'll be creating a private key from the password using the\n * warp wallet technique (Brain wallet).\n */\nconst UsernameAvailable = ({userName}:{userName:string}) => {\n    const navigation = useNavigation()\n    const [password,setPassword] = useState(\"\")\n    const [loading,setLoading] = useState(false)\n\n    /**\n     * * create the private key from the password\n     * * change ownership of the known ChainTree to the new key\n     * * change the global state to reflect the user is logged in\n     */\n    const registerUser = async ()=> {\n        setLoading(true)\n        const insecureKey = await publicUserKey(userName)\n\n        const secureKey = await EcdsaKey.passPhraseKey(Buffer.from(password), Buffer.from(userName))\n        const secureKeyAddress = await Tupelo.ecdsaPubkeyToAddress(secureKey.publicKey)\n        \n        const community = await getCommunity()\n        const tree = await ChainTree.newEmptyTree(community.blockservice, insecureKey)\n\n        await community.playTransactions(tree, [\n                // Set the ownership of the chaintree to our secure key (thus owning the username)\n                setOwnershipTransaction([secureKeyAddress]),\n                // Cache the username inside of the chaintree for easier access later\n                setDataTransaction(usernameKey, userName),\n        ])\n        tree.key = secureKey\n        dispatch({\n            type:\"setKey\",\n            userKey: secureKey,\n        })\n        dispatch({\n            type:\"setTree\",\n            userTree: tree,\n        })\n        setLoading(false)\n        navigation.navigate(\"/wallet\")\n    }\n\n    const handleSubmit = (evt:React.FormEvent) => {\n        evt.preventDefault()\n        registerUser()\n    }\n\n    return (\n        <div>\n            Username {userName} is available.\n            <p>Reserve username?</p>\n            <form onSubmit={handleSubmit}>\n            {loading ? <CircularProgress/> : null}\n             <Grid container spacing={2}>\n                    <Grid item>\n                        <TextField label=\"password\" id=\"password\" type=\"password\" value={password} onChange={(evt) => {setPassword(evt.target.value)}}/>\n                    </Grid>\n                    <Grid item>\n                        <Button type=\"submit\" variant=\"contained\">Submit</Button>\n                    </Grid>\n                </Grid>\n            </form>\n        </div>\n    )\n}\n\n\n/**\n * The root login page which just allows for choosing a username\n */\nexport const RootLoginPage = () => {\n\n    const navigation = useNavigation()\n    const [username,setUsername] = useState(\"\")\n\n    const handleSubmit = (evt:React.FormEvent) => {\n        evt.preventDefault()\n        navigation.navigate(\"/login/available/\" + username)\n    }\n\n    return (\n        <div>\n            <Typography>Login or Register</Typography>\n            <form onSubmit={handleSubmit}>\n                <Grid container spacing={2}>\n                    <Grid item>\n                        <TextField label=\"user name\" id=\"userName\" value={username} onChange={(evt) => {setUsername(evt.target.value)}}/>\n                    </Grid>\n                    <Grid item>\n                        <Button type=\"submit\" variant=\"contained\">Submit</Button>\n                    </Grid>\n                </Grid>\n            </form>\n        </div>\n    )\n}","import React, { useState } from 'react'\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, TextField, CircularProgress, Button } from '@material-ui/core';\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\nimport { ChainTree, sendTokenTransaction } from 'tupelo-wasm-sdk'\nimport { getCommunity } from '../community';\n\nconst uuidv4: () => string = require('uuid/v4');\n\n/**\n * \n * You can send any token you have a balance of. This dialog will show the user the base64 encoded version of the payload they need to send\n * to the receiver. If that payload is lost, it's difficult to recover.\n * The token transaction flow is this:\n * send token (transaction) -> copy payload -> send payload -> (receiver) get payload -> receive token (transaction)\n */\nexport const SendTokenDialog = ({ open, onClose, tree, tokenName }: { tokenName: string, open: boolean, onClose: () => void, tree: ChainTree }) => {\n    const [amount, setAmount] = useState(0)\n    const [destination, setDestination] = useState(\"\")\n    const [loading, setLoading] = useState(false)\n    const [code, setCode] = useState()\n\n    const handleSubmit = async () => {\n        if (tree === undefined) {\n            throw new Error(\"userTree is undefined\")\n        }\n        setLoading(true)\n        //sendId must be unique to the receiving chaintree. Here we just use a globally unique uuid.\n        const uuid = uuidv4()\n        const community = await getCommunity()\n        // const canonicalName = await tokenCanonicalName(tree, tokenName)\n        console.log('tokenname: ', tokenName)\n    \n        // sendTokenAndGetPayload is a helper function to both play the send token transaction and then also create the payload\n        // from the transaction. it is then shown to the user.\n        const payload = await community.sendTokenAndGetPayload(tree, sendTokenTransaction(uuid, tokenName, amount, destination))\n        setCode(Buffer.from(payload.serializeBinary()).toString('base64'))\n    }\n\n    const _onClose = () => {\n        setAmount(0)\n        setDestination(\"\")\n        setLoading(false)\n        onClose()\n    }\n\n    return (\n        !code ? <Dialog open={open} onClose={onClose} aria-labelledby=\"form-dialog-title\">\n            <DialogTitle id=\"form-dialog-title\">Send Tokens</DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    Send tokens of type {tokenName}\n                </DialogContentText>\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    id=\"name\"\n                    label=\"Destination\"\n                    fullWidth\n                    onChange={(evt) => { setDestination(evt.target.value) }}\n                    value={destination}\n                />\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    id=\"amount\"\n                    label=\"Amount\"\n                    type=\"number\"\n                    fullWidth\n                    onChange={(evt) => { setAmount(parseInt(evt.target.value, 10)) }}\n                    value={amount.toString()}\n                />\n\n            </DialogContent>\n            {loading ? <CircularProgress /> :\n                <DialogActions>\n                    <Button onClick={_onClose} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleSubmit} color=\"primary\">\n                        Send\n                    </Button>\n                </DialogActions>\n            }\n        </Dialog> : // if we have a code, display it to the user\n        <Dialog open={open} onClose={onClose} aria-labelledby=\"form-dialog-title\">\n            <DialogTitle id=\"form-dialog-title\">Send Tokens</DialogTitle>\n            <DialogContent>\n                <DialogContentText>\n                    Give the following snippet to your send coin receiver:\n                </DialogContentText>\n                <TextareaAutosize>\n                    {code}\n                </TextareaAutosize>\n            </DialogContent>\n            <DialogActions>\n                    <Button onClick={_onClose} color=\"primary\">\n                        Ok\n                    </Button>\n                </DialogActions>\n        </Dialog>\n        \n    )\n}\n\nexport default SendTokenDialog","import React, {useState} from 'react'\nimport {  Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, TextField, CircularProgress, Button } from '@material-ui/core';\nimport { ChainTree, receiveTokenTransactionFromPayload } from 'tupelo-wasm-sdk'\nimport { TokenPayload } from 'tupelo-messages/transactions/transactions_pb';\nimport { getCommunity } from '../community';\n\n/**\n * Receive token is used on the *receiving* side of a token transaction. The sender does a send transaction and then \n * (out of band) sends the payload to the receiver. The receiver can then do a receive coin transaction.\n */\nexport const ReceiveTokenDialog = ({open, onClose, tree}:{open:boolean, onClose:() => void, tree:ChainTree})=> {\n    const [code, setCode] = useState(\"\")\n    const [loading,setLoading] = useState(false)\n\n    const handleSubmit = async ()=> {\n        if (tree === undefined) {\n            throw new Error(\"userTree is undefined\")\n        }\n        let tokenPayload = TokenPayload.deserializeBinary(Buffer.from(code, 'base64'))\n        // The receiveTokenTransactionFromPayload function is a helper to create a transaction\n        // from a TokenPayload\n        let tx = receiveTokenTransactionFromPayload(tokenPayload)\n\n        setLoading(true)\n        const community = await getCommunity()\n        await community.playTransactions(tree, [tx])\n        _onClose()\n    }\n\n    const _onClose = ()=> {\n        setCode(\"\")\n        setLoading(false)\n        onClose()\n    }\n\n    return (\n        <Dialog open={open} onClose={onClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">Receive Tokens</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                       Receive Tokens\n                    </DialogContentText>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"name\"\n                        label=\"Code\"\n                        fullWidth\n                        onChange={(evt)=> {setCode(evt.target.value)}}\n                        value={code}\n                    />\n                </DialogContent>\n                {loading ? <CircularProgress/> : \n                <DialogActions>\n                    <Button onClick={_onClose} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleSubmit} color=\"primary\">\n                        Send\n                    </Button>\n                </DialogActions>\n                }\n            </Dialog>\n    )\n}\n\nexport default ReceiveTokenDialog","var _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _slicedToArray = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/slicedToArray\");\n\n// Copyright 2018 The Go Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\nvar log = require('debug')('gowasm');\n\n(function () {\n  if (typeof global !== \"undefined\") {// global already exists\n  } else if (typeof window !== \"undefined\") {\n    window.global = window;\n  } else if (typeof self !== \"undefined\") {\n    self.global = self;\n  } else {\n    throw new Error(\"cannot export Go (neither global, window nor self is defined)\");\n  }\n\n  var encoder, decoder; // Map web browser API and Node.js API to a single common API (preferring web standards over Node.js API).\n\n  var isNodeJS = global.process && global.process.title.indexOf(\"node\") !== -1;\n\n  if (isNodeJS) {\n    log('nodejs running');\n    global.require = require;\n    global.fs = require(\"fs\");\n\n    var nodeCrypto = require(\"crypto\");\n\n    global.crypto = {\n      getRandomValues: function getRandomValues(b) {\n        nodeCrypto.randomFillSync(b);\n      }\n    };\n    global.performance = {\n      now: function now() {\n        var _process$hrtime = process.hrtime(),\n            _process$hrtime2 = _slicedToArray(_process$hrtime, 2),\n            sec = _process$hrtime2[0],\n            nsec = _process$hrtime2[1];\n\n        return sec * 1000 + nsec / 1000000;\n      }\n    };\n\n    var util = require(\"util\");\n\n    encoder = new util.TextEncoder();\n    decoder = new util.TextDecoder();\n  } else {\n    log('browser running');\n    global.Buffer = require('buffer').Buffer;\n    var outputBuf = \"\";\n    global.fs = {\n      constants: {\n        O_WRONLY: -1,\n        O_RDWR: -1,\n        O_CREAT: -1,\n        O_TRUNC: -1,\n        O_APPEND: -1,\n        O_EXCL: -1\n      },\n      // unused\n      writeSync: function writeSync(fd, buf) {\n        outputBuf += decoder.decode(buf);\n        var nl = outputBuf.lastIndexOf(\"\\n\");\n\n        if (nl != -1) {\n          console.log(outputBuf.substr(0, nl));\n          outputBuf = outputBuf.substr(nl + 1);\n        }\n\n        return buf.length;\n      },\n      write: function write(fd, buf, offset, length, position, callback) {\n        if (offset !== 0 || length !== buf.length || position !== null) {\n          throw new Error(\"not implemented\");\n        }\n\n        var n = this.writeSync(fd, buf);\n        callback(null, n);\n      },\n      open: function open(path, flags, mode, callback) {\n        var err = new Error(\"not implemented\");\n        err.code = \"ENOSYS\";\n        callback(err);\n      },\n      read: function read(fd, buffer, offset, length, position, callback) {\n        var err = new Error(\"not implemented\");\n        err.code = \"ENOSYS\";\n        callback(err);\n      },\n      fsync: function fsync(fd, callback) {\n        callback(null);\n      }\n    };\n    encoder = new TextEncoder(\"utf-8\");\n    decoder = new TextDecoder(\"utf-8\");\n  }\n\n  global.Go =\n  /*#__PURE__*/\n  function () {\n    \"use strict\";\n\n    function _class() {\n      var _this = this;\n\n      _classCallCheck(this, _class);\n\n      this.argv = [\"js\"];\n      this.env = {};\n\n      this.exit = function (code) {\n        if (code !== 0) {\n          console.warn(\"exit code:\", code);\n        }\n      };\n\n      this._exitPromise = new Promise(function (resolve) {\n        _this._resolveExitPromise = resolve;\n      });\n      this._pendingEvent = null;\n      this._scheduledTimeouts = new Map();\n      this._nextCallbackTimeoutID = 1;\n\n      var mem = function mem() {\n        // The buffer may change when requesting more memory.\n        return new DataView(_this._inst.exports.mem.buffer);\n      };\n\n      var setInt64 = function setInt64(addr, v) {\n        mem().setUint32(addr + 0, v, true);\n        mem().setUint32(addr + 4, Math.floor(v / 4294967296), true);\n      };\n\n      var getInt64 = function getInt64(addr) {\n        var low = mem().getUint32(addr + 0, true);\n        var high = mem().getInt32(addr + 4, true);\n        return low + high * 4294967296;\n      };\n\n      var loadValue = function loadValue(addr) {\n        var f = mem().getFloat64(addr, true);\n\n        if (f === 0) {\n          return undefined;\n        }\n\n        if (!isNaN(f)) {\n          return f;\n        }\n\n        var id = mem().getUint32(addr, true);\n        return _this._values[id];\n      };\n\n      var storeValue = function storeValue(addr, v) {\n        var nanHead = 0x7FF80000;\n\n        if (typeof v === \"number\") {\n          if (isNaN(v)) {\n            mem().setUint32(addr + 4, nanHead, true);\n            mem().setUint32(addr, 0, true);\n            return;\n          }\n\n          if (v === 0) {\n            mem().setUint32(addr + 4, nanHead, true);\n            mem().setUint32(addr, 1, true);\n            return;\n          }\n\n          mem().setFloat64(addr, v, true);\n          return;\n        }\n\n        switch (v) {\n          case undefined:\n            mem().setFloat64(addr, 0, true);\n            return;\n\n          case null:\n            mem().setUint32(addr + 4, nanHead, true);\n            mem().setUint32(addr, 2, true);\n            return;\n\n          case true:\n            mem().setUint32(addr + 4, nanHead, true);\n            mem().setUint32(addr, 3, true);\n            return;\n\n          case false:\n            mem().setUint32(addr + 4, nanHead, true);\n            mem().setUint32(addr, 4, true);\n            return;\n        }\n\n        var ref = _this._refs.get(v);\n\n        if (ref === undefined) {\n          ref = _this._values.length;\n\n          _this._values.push(v);\n\n          _this._refs.set(v, ref);\n        }\n\n        var typeFlag = 0;\n\n        switch (typeof v) {\n          case \"string\":\n            typeFlag = 1;\n            break;\n\n          case \"symbol\":\n            typeFlag = 2;\n            break;\n\n          case \"function\":\n            typeFlag = 3;\n            break;\n        }\n\n        mem().setUint32(addr + 4, nanHead | typeFlag, true);\n        mem().setUint32(addr, ref, true);\n      };\n\n      var loadSlice = function loadSlice(addr) {\n        var array = getInt64(addr + 0);\n        var len = getInt64(addr + 8);\n        return new Uint8Array(_this._inst.exports.mem.buffer, array, len);\n      };\n\n      var loadSliceOfValues = function loadSliceOfValues(addr) {\n        var array = getInt64(addr + 0);\n        var len = getInt64(addr + 8);\n        var a = new Array(len);\n\n        for (var i = 0; i < len; i++) {\n          a[i] = loadValue(array + i * 8);\n        }\n\n        return a;\n      };\n\n      var loadString = function loadString(addr) {\n        var saddr = getInt64(addr + 0);\n        var len = getInt64(addr + 8);\n        return decoder.decode(new DataView(_this._inst.exports.mem.buffer, saddr, len));\n      };\n\n      var timeOrigin = Date.now() - performance.now();\n      this.importObject = {\n        go: {\n          // Go's SP does not change as long as no Go code is running. Some operations (e.g. calls, getters and setters)\n          // may synchronously trigger a Go event handler. This makes Go code get executed in the middle of the imported\n          // function. A goroutine can switch to a new stack if the current stack is too small (see morestack function).\n          // This changes the SP, thus we have to update the SP used by the imported function.\n          // func wasmExit(code int32)\n          \"runtime.wasmExit\": function runtimeWasmExit(sp) {\n            var code = mem().getInt32(sp + 8, true);\n            _this.exited = true;\n            delete _this._inst;\n            delete _this._values;\n            delete _this._refs;\n\n            _this.exit(code);\n          },\n          // func wasmWrite(fd uintptr, p unsafe.Pointer, n int32)\n          \"runtime.wasmWrite\": function runtimeWasmWrite(sp) {\n            var fd = getInt64(sp + 8);\n            var p = getInt64(sp + 16);\n            var n = mem().getInt32(sp + 24, true);\n            global.fs.writeSync(fd, new Uint8Array(_this._inst.exports.mem.buffer, p, n));\n          },\n          // func nanotime() int64\n          \"runtime.nanotime\": function runtimeNanotime(sp) {\n            setInt64(sp + 8, (timeOrigin + performance.now()) * 1000000);\n          },\n          // func walltime() (sec int64, nsec int32)\n          \"runtime.walltime\": function runtimeWalltime(sp) {\n            var msec = new Date().getTime();\n            setInt64(sp + 8, msec / 1000);\n            mem().setInt32(sp + 16, msec % 1000 * 1000000, true);\n          },\n          // func scheduleTimeoutEvent(delay int64) int32\n          \"runtime.scheduleTimeoutEvent\": function runtimeScheduleTimeoutEvent(sp) {\n            var id = _this._nextCallbackTimeoutID;\n            _this._nextCallbackTimeoutID++;\n\n            _this._scheduledTimeouts.set(id, setTimeout(function () {\n              _this._resume();\n            }, getInt64(sp + 8) + 1 // setTimeout has been seen to fire up to 1 millisecond early\n            ));\n\n            mem().setInt32(sp + 16, id, true);\n          },\n          // func clearTimeoutEvent(id int32)\n          \"runtime.clearTimeoutEvent\": function runtimeClearTimeoutEvent(sp) {\n            var id = mem().getInt32(sp + 8, true);\n            clearTimeout(_this._scheduledTimeouts.get(id));\n\n            _this._scheduledTimeouts.delete(id);\n          },\n          // func getRandomData(r []byte)\n          \"runtime.getRandomData\": function runtimeGetRandomData(sp) {\n            crypto.getRandomValues(loadSlice(sp + 8));\n          },\n          // func stringVal(value string) ref\n          \"syscall/js.stringVal\": function syscallJsStringVal(sp) {\n            storeValue(sp + 24, loadString(sp + 8));\n          },\n          // func valueGet(v ref, p string) ref\n          \"syscall/js.valueGet\": function syscallJsValueGet(sp) {\n            var result = Reflect.get(loadValue(sp + 8), loadString(sp + 16));\n            sp = _this._inst.exports.getsp(); // see comment above\n\n            storeValue(sp + 32, result);\n          },\n          // func valueSet(v ref, p string, x ref)\n          \"syscall/js.valueSet\": function syscallJsValueSet(sp) {\n            Reflect.set(loadValue(sp + 8), loadString(sp + 16), loadValue(sp + 32));\n          },\n          // func valueIndex(v ref, i int) ref\n          \"syscall/js.valueIndex\": function syscallJsValueIndex(sp) {\n            storeValue(sp + 24, Reflect.get(loadValue(sp + 8), getInt64(sp + 16)));\n          },\n          // valueSetIndex(v ref, i int, x ref)\n          \"syscall/js.valueSetIndex\": function syscallJsValueSetIndex(sp) {\n            Reflect.set(loadValue(sp + 8), getInt64(sp + 16), loadValue(sp + 24));\n          },\n          // func valueCall(v ref, m string, args []ref) (ref, bool)\n          \"syscall/js.valueCall\": function syscallJsValueCall(sp) {\n            try {\n              var v = loadValue(sp + 8);\n              var m = Reflect.get(v, loadString(sp + 16));\n              var args = loadSliceOfValues(sp + 32);\n              var result = Reflect.apply(m, v, args);\n              sp = _this._inst.exports.getsp(); // see comment above\n\n              storeValue(sp + 56, result);\n              mem().setUint8(sp + 64, 1);\n            } catch (err) {\n              storeValue(sp + 56, err);\n              mem().setUint8(sp + 64, 0);\n            }\n          },\n          // func valueInvoke(v ref, args []ref) (ref, bool)\n          \"syscall/js.valueInvoke\": function syscallJsValueInvoke(sp) {\n            try {\n              var v = loadValue(sp + 8);\n              var args = loadSliceOfValues(sp + 16);\n              var result = Reflect.apply(v, undefined, args);\n              sp = _this._inst.exports.getsp(); // see comment above\n\n              storeValue(sp + 40, result);\n              mem().setUint8(sp + 48, 1);\n            } catch (err) {\n              storeValue(sp + 40, err);\n              mem().setUint8(sp + 48, 0);\n            }\n          },\n          // func valueNew(v ref, args []ref) (ref, bool)\n          \"syscall/js.valueNew\": function syscallJsValueNew(sp) {\n            try {\n              var v = loadValue(sp + 8);\n              var args = loadSliceOfValues(sp + 16);\n              var result = Reflect.construct(v, args);\n              sp = _this._inst.exports.getsp(); // see comment above\n\n              storeValue(sp + 40, result);\n              mem().setUint8(sp + 48, 1);\n            } catch (err) {\n              storeValue(sp + 40, err);\n              mem().setUint8(sp + 48, 0);\n            }\n          },\n          // func valueLength(v ref) int\n          \"syscall/js.valueLength\": function syscallJsValueLength(sp) {\n            setInt64(sp + 16, parseInt(loadValue(sp + 8).length));\n          },\n          // valuePrepareString(v ref) (ref, int)\n          \"syscall/js.valuePrepareString\": function syscallJsValuePrepareString(sp) {\n            var str = encoder.encode(String(loadValue(sp + 8)));\n            storeValue(sp + 16, str);\n            setInt64(sp + 24, str.length);\n          },\n          // valueLoadString(v ref, b []byte)\n          \"syscall/js.valueLoadString\": function syscallJsValueLoadString(sp) {\n            var str = loadValue(sp + 8);\n            loadSlice(sp + 16).set(str);\n          },\n          // func valueInstanceOf(v ref, t ref) bool\n          \"syscall/js.valueInstanceOf\": function syscallJsValueInstanceOf(sp) {\n            mem().setUint8(sp + 24, loadValue(sp + 8) instanceof loadValue(sp + 16));\n          },\n          \"debug\": function debug(value) {\n            console.log(value);\n          }\n        }\n      };\n    }\n\n    _createClass(_class, [{\n      key: \"run\",\n      value: function () {\n        var _run = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(instance) {\n          var _this2 = this;\n\n          var mem, offset, strPtr, argc, argvPtrs, keys, argv;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  this._inst = instance;\n                  this._values = [// TODO: garbage collection\n                  NaN, 0, null, true, false, global, this._inst.exports.mem, this];\n                  this._refs = new Map();\n                  this.exited = false;\n                  mem = new DataView(this._inst.exports.mem.buffer); // Pass command line arguments and environment variables to WebAssembly by writing them to the linear memory.\n\n                  offset = 4096;\n\n                  strPtr = function strPtr(str) {\n                    var ptr = offset;\n                    new Uint8Array(mem.buffer, offset, str.length + 1).set(encoder.encode(str + \"\\0\"));\n                    offset += str.length + (8 - str.length % 8);\n                    return ptr;\n                  };\n\n                  argc = this.argv.length;\n                  argvPtrs = [];\n                  this.argv.forEach(function (arg) {\n                    argvPtrs.push(strPtr(arg));\n                  });\n                  keys = Object.keys(this.env).sort();\n                  argvPtrs.push(keys.length);\n                  keys.forEach(function (key) {\n                    argvPtrs.push(strPtr(\"\".concat(key, \"=\").concat(_this2.env[key])));\n                  });\n                  argv = offset;\n                  argvPtrs.forEach(function (ptr) {\n                    mem.setUint32(offset, ptr, true);\n                    mem.setUint32(offset + 4, 0, true);\n                    offset += 8;\n                  });\n\n                  this._inst.exports.run(argc, argv);\n\n                  if (this.exited) {\n                    this._resolveExitPromise();\n                  }\n\n                  _context.next = 19;\n                  return this._exitPromise;\n\n                case 19:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this);\n        }));\n\n        function run(_x) {\n          return _run.apply(this, arguments);\n        }\n\n        return run;\n      }()\n    }, {\n      key: \"_resume\",\n      value: function _resume() {\n        if (this.exited) {\n          throw new Error(\"Go program has already exited\");\n        }\n\n        this._inst.exports.resume();\n\n        if (this.exited) {\n          this._resolveExitPromise();\n        }\n      }\n    }, {\n      key: \"_makeFuncWrapper\",\n      value: function _makeFuncWrapper(id) {\n        var go = this;\n        return function () {\n          var event = {\n            id: id,\n            this: this,\n            args: arguments\n          };\n          go._pendingEvent = event;\n\n          go._resume();\n\n          return event.result;\n        };\n      }\n    }]);\n\n    return _class;\n  }();\n\n  global.Go.wasmPath = isNodeJS ? global.fs.readFileSync(require(\"path\").join(__dirname, \"tupelo.wasm\")) : \"/tupelo.wasm\";\n\n  global.Go.setWasmPath = function (path) {\n    global.Go.wasmPath = path;\n  };\n\n  global.Go.readyPromise = new Promise(function (resolve) {\n    global.Go.readyResolver = resolve;\n  });\n})();\n\nvar runner = {\n  run: function () {\n    var _run2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var isNodeJS, go, result, wasmResp, wasm;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              log('outer go.run');\n              isNodeJS = global.process && global.process.title.indexOf(\"node\") !== -1;\n              go = new Go();\n              go.env = Object.assign({\n                TMPDIR: require(\"os\").tmpdir()\n              }, process.env); // go.exit = process.exit;\n\n              if (!isNodeJS) {\n                _context2.next = 11;\n                break;\n              }\n\n              _context2.next = 7;\n              return WebAssembly.instantiate(Go.wasmPath, go.importObject);\n\n            case 7:\n              result = _context2.sent;\n              process.on(\"exit\", function (code) {\n                // Node.js exits if no event handler is pending\n                Go.exit();\n\n                if (code === 0 && !go.exited) {\n                  // deadlock, make Go print error and stack traces\n                  go._pendingEvent = {\n                    id: 0\n                  };\n\n                  go._resume();\n                }\n              });\n              _context2.next = 31;\n              break;\n\n            case 11:\n              log(\"is not nodejs\");\n\n              if (!(typeof WebAssembly.instantiateStreaming == 'function')) {\n                _context2.next = 19;\n                break;\n              }\n\n              console.log(\"wasm path: \", Go.wasmPath);\n              _context2.next = 16;\n              return WebAssembly.instantiateStreaming(fetch(Go.wasmPath), go.importObject);\n\n            case 16:\n              result = _context2.sent;\n              _context2.next = 31;\n              break;\n\n            case 19:\n              log('fetching wasm');\n              _context2.next = 22;\n              return fetch(Go.wasmPath);\n\n            case 22:\n              wasmResp = _context2.sent;\n              log('turning it into an array buffer');\n              _context2.next = 26;\n              return wasmResp.arrayBuffer();\n\n            case 26:\n              wasm = _context2.sent;\n              log('instantiating');\n              _context2.next = 30;\n              return WebAssembly.instantiate(wasm, go.importObject);\n\n            case 30:\n              result = _context2.sent;\n\n            case 31:\n              log('inner go.run');\n              return _context2.abrupt(\"return\", go.run(result.instance));\n\n            case 33:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    function run() {\n      return _run2.apply(this, arguments);\n    }\n\n    return run;\n  }(),\n  ready: function () {\n    var _ready = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(path) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              return _context3.abrupt(\"return\", global.Go.readyPromise);\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    function ready(_x2) {\n      return _ready.apply(this, arguments);\n    }\n\n    return ready;\n  }(),\n  populate: function populate(obj, reqs) {\n    return global.populateLibrary(obj, reqs);\n  }\n};\nmodule.exports = runner;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 532;","var _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _assertThisInitialized = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/inherits\");\n\nvar WS = require('libp2p-websockets');\n\nvar Multiplex = require('pull-mplex');\n\nrequire('libp2p-crypto-secp256k1'); // no need to do anything with this, just require it.\n\n\nvar SECIO = require('libp2p-secio');\n\nvar Bootstrap = require('libp2p-bootstrap');\n\nvar KadDHT = require('libp2p-kad-dht');\n\nvar libp2p = require('libp2p');\n\nvar mergeOptions = require('merge-options');\n\nvar PeerInfo = require('peer-info');\n\nvar crypto = require('libp2p-crypto').keys;\n\nvar PeerId = require('peer-id');\n\nvar TCP = require('libp2p-tcp');\n\nvar util = require('util');\n\nvar log = require('debug')(\"p2p\");\n\nvar RoutingDiscovery = require('./discovery');\n\nvar isNodeJS = global.process && global.process.title.indexOf(\"node\") !== -1;\n\nvar TupeloP2P =\n/*#__PURE__*/\nfunction (_libp2p) {\n  \"use strict\";\n\n  _inherits(TupeloP2P, _libp2p);\n\n  function TupeloP2P(_options) {\n    var _this;\n\n    _classCallCheck(this, TupeloP2P);\n\n    var routingDiscoverer = new RoutingDiscovery({\n      namespace: 'tupelo-transaction-gossipers'\n    });\n    var defaults = {\n      switch: {\n        blacklistTTL: 2 * 60 * 1e3,\n        // 2 minute base\n        blackListAttempts: 5,\n        // back off 5 times\n        maxParallelDials: 100,\n        maxColdCalls: 25,\n        dialTimeout: 20e3\n      },\n      modules: {\n        transport: [WS],\n        streamMuxer: [Multiplex],\n        connEncryption: [SECIO],\n        peerDiscovery: [Bootstrap, routingDiscoverer.stub()],\n        dht: KadDHT\n      },\n      config: {\n        peerDiscovery: {\n          autoDial: true,\n          bootstrap: {\n            enabled: true\n          }\n        },\n        dht: {\n          kBucketSize: 20,\n          // taken from https://github.com/ipfs/js-ipfs/blob/master/src/core/runtime/libp2p-nodejs.js\n          enabled: true,\n          randomWalk: {\n            enabled: false\n          }\n        },\n        EXPERIMENTAL: {\n          pubsub: true\n        }\n      }\n    };\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TupeloP2P).call(this, mergeOptions(defaults, _options)));\n    routingDiscoverer.node = _assertThisInitialized(_this);\n\n    _this.once('peer:connect', function () {\n      log(\"first peer:connect\");\n      routingDiscoverer.start(function () {\n        log(\"discovery started\");\n      });\n    });\n\n    _this.once('stop', function () {\n      routingDiscoverer.stop(function () {\n        log(\"routing stopped\");\n      });\n    });\n\n    _this._routingDiscoverer = routingDiscoverer;\n    return _this;\n  }\n\n  return TupeloP2P;\n}(libp2p);\n\nmodule.exports.TupeloP2P = TupeloP2P;\n\nmodule.exports.CreateNode =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(options) {\n    var resolve, reject, p;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!options) {\n              options = {};\n            }\n\n            p = new Promise(function (res, rej) {\n              resolve = res;\n              reject = rej;\n            });\n            crypto.generateKeyPair('secp256k1',\n            /*#__PURE__*/\n            function () {\n              var _ref2 = _asyncToGenerator(\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee(err, key) {\n                var peerID, peerInfo, node;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        if (err) {\n                          console.error(\"error generating key pair \", err);\n                          reject(err);\n                        }\n\n                        _context.next = 3;\n                        return util.promisify(PeerId.createFromPrivKey)(key.bytes);\n\n                      case 3:\n                        peerID = _context.sent;\n                        peerInfo = new PeerInfo(peerID);\n\n                        if (isNodeJS) {\n                          // nodejs requires that you listen to the address to be able\n                          // to dial it, the browser *can't* listen to an address.\n                          peerInfo.multiaddrs.add('/ip4/0.0.0.0/tcp/0/ws');\n                          peerInfo.multiaddrs.add('/ip4/0.0.0.0/tcp/0/wss');\n                        }\n\n                        options.peerInfo = peerInfo;\n                        node = new TupeloP2P(options);\n                        log(\"peerIdStr \", peerID.toB58String());\n                        resolve(node);\n\n                      case 10:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x2, _x3) {\n                return _ref2.apply(this, arguments);\n              };\n            }());\n            return _context2.abrupt(\"return\", p);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();","import { createStore } from 'react-hooks-global-state';\nimport {EcdsaKey, ChainTree} from 'tupelo-wasm-sdk';\nimport { getCommunity } from './community';\n\ndeclare const Go: any;\n\nconst subDirectory = window.location.pathname\nconsole.log(\"subDirectory \", subDirectory)\n\nif (subDirectory !== '/') {\n    console.log(\"setting wasmpath to: \",  subDirectory + \"tupelo.wasm\")\n    Go.setWasmPath(subDirectory + \"tupelo.wasm\");\n}\n\nlet resolve:Function\nexport const globalStorageStarted = new Promise((res)=> {resolve = res})\n\ninterface IGlobalState {\n    userKey?:EcdsaKey\n    userTree?:ChainTree\n}\n\ninterface IAction {\n    type:\"setKey\"|\"setTree\"\n    userKey?:EcdsaKey\n    userTree?:ChainTree\n}\n\nconst reducer = (state:IGlobalState, action:IAction) => {\n    switch (action.type) {\n      case 'setKey': return {...state, userKey: action.userKey}\n      case 'setTree': return { ...state, userTree: action.userTree };\n      default: return state;\n    }\n  };\n\nconst initialState:IGlobalState = {\n    userTree:undefined,\n    userKey:undefined,\n};\nconst persistentReducer = (state:IGlobalState, action:IAction) => {\n    let mutated = reducer(state,action)\n\n    if (mutated.userKey !== undefined && mutated.userKey.privateKey !== undefined) {\n        sessionStorage.setItem('userKey', Buffer.from(mutated.userKey.privateKey).toString('hex'))\n    }\n    if (mutated.userTree !== undefined) {\n        mutated.userTree.id().then((id)=> {\n            if (id == null) {\n                throw new Error(\"unknown id\")\n            }\n            sessionStorage.setItem('userTreeDid', id)\n        }, (err)=> {\n            throw err\n        })\n    }\n\treturn mutated\n}\n\nexport const { GlobalStateProvider, dispatch, useGlobalState } = createStore(persistentReducer, initialState)\n\nasync function setStoredState() {\n    let keyString = sessionStorage.getItem('userKey')\n    if (!keyString || keyString === \"\") {\n        resolve()\n        return\n    }\n    let key = await EcdsaKey.fromBytes(Buffer.from(keyString, 'hex'))\n\n    let userTreeDid = sessionStorage.getItem('userTreeDid')\n    if (userTreeDid == null) {\n        resolve()\n        throw new Error(\"had a userKey but no user Tree\")\n    }\n    let community = await getCommunity()\n    let tip = await community.getTip(userTreeDid)\n\n    let tree = new ChainTree({\n        tip: tip,\n        store: community.blockservice,\n        key:key,\n    })\n    dispatch({\n        type: \"setKey\",\n        userKey: key,\n    })\n    dispatch({\n        type:\"setTree\",\n        userTree: tree,\n    })\n    resolve()\n}\nsetStoredState()","var _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _assertThisInitialized = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _asyncToGenerator = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar EventEmitter = require('events').EventEmitter;\n\nvar debug = require('debug');\n\nvar mafmt = require('mafmt');\n\nvar CID = require('cids');\n\nvar multihashing = require('multihashing-async');\n\nvar log = debug('p2p:discovery');\nlog.error = debug('p2p:discoveryp:error');\n\nfunction isIPFS(addr) {\n  try {\n    return mafmt.IPFS.matches(addr);\n  } catch (e) {\n    return false;\n  }\n} // Go function is:\n// func nsToCid(ns string) (cid.Cid, error) {\n// \th, err := mh.Sum([]byte(ns), mh.SHA2_256, -1)\n// \tif err != nil {\n// \t\treturn cid.Undef, err\n// \t}\n// \treturn cid.NewCidV1(cid.Raw, h), nil\n// }\n\n\nfunction nsToCid(_x) {\n  return _nsToCid.apply(this, arguments);\n}\n\nfunction _nsToCid() {\n  _nsToCid = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(ns) {\n    var hash;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return multihashing(Buffer.from(ns), 'sha2-256');\n\n          case 2:\n            hash = _context2.sent;\n            return _context2.abrupt(\"return\", new CID(1, 'raw', hash));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _nsToCid.apply(this, arguments);\n}\n\nvar RoutingStub =\n/*#__PURE__*/\nfunction (_EventEmitter) {\n  \"use strict\";\n\n  _inherits(RoutingStub, _EventEmitter);\n\n  function RoutingStub(options) {\n    var _this;\n\n    _classCallCheck(this, RoutingStub);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RoutingStub).call(this));\n    _this.parent = options.parent;\n    return _this;\n  }\n\n  _createClass(RoutingStub, [{\n    key: \"start\",\n    value: function start(callback) {\n      // don't call the parent for start\n      // because we'll need new information\n      callback();\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(callback) {\n      this.parent.stop(callback);\n    }\n  }]);\n\n  return RoutingStub;\n}(EventEmitter);\n\nvar RoutingDiscovery =\n/*#__PURE__*/\nfunction (_EventEmitter2) {\n  \"use strict\";\n\n  _inherits(RoutingDiscovery, _EventEmitter2);\n\n  function RoutingDiscovery(options) {\n    var _this2;\n\n    _classCallCheck(this, RoutingDiscovery);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(RoutingDiscovery).call(this));\n\n    if (!options.namespace) {\n      throw new Error(\"you must provide a namespace to the RoutingDiscovery\");\n    }\n\n    _this2._stub = new RoutingStub({\n      parent: _assertThisInitialized(_this2)\n    });\n    _this2._namespace = options.namespace;\n    _this2._interval = options.interval || 2000;\n    _this2._timer = null;\n    return _this2;\n  } // stub is used so that there is something for the node to listen to for the 'peer' event\n  // but we can't actually spin up this routing discovery until we have a node\n\n\n  _createClass(RoutingDiscovery, [{\n    key: \"stub\",\n    value: function stub() {\n      return this._stub;\n    }\n  }, {\n    key: \"start\",\n    value: function start(callback) {\n      var _this3 = this;\n\n      if (!this.node) {\n        throw new Error(\"you must set node on this discoverer before starting\");\n      }\n\n      if (!this.node.isStarted()) {\n        throw new Error(\"you must start the node before discovering\");\n      }\n\n      if (this._timer) {\n        return process.nextTick(function () {\n          return callback();\n        });\n      }\n\n      this._timer = setInterval(function () {\n        return _this3._discoverContentPeers();\n      }, this._interval);\n      process.nextTick(function () {\n        callback();\n\n        _this3._discoverContentPeers();\n      });\n    }\n  }, {\n    key: \"_discoverContentPeers\",\n    value: function () {\n      var _discoverContentPeers2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this4 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this._nsCid) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _context.next = 3;\n                return nsToCid(this._namespace);\n\n              case 3:\n                this._nsCid = _context.sent;\n\n              case 4:\n                this.node.contentRouting.findProviders(this._nsCid, 1800, function (err, providers) {\n                  if (err) {\n                    if (!_this4.node.isStarted()) {\n                      _this4.stop(function () {\n                        console.error(\"self-stopping the discoverer, because the node is stopped\");\n                      });\n                    }\n\n                    if (err.message === \"no providers found\") {\n                      return; // we don't want to throw an error when we just haven't found the providers yet\n                    }\n\n                    if (err.message === 'Callback function \"anonymous\" timed out.') {\n                      console.error(\"timeout on findProviders\");\n                      return; // do nothing here either, don't want to blow up due to a timeout\n                    }\n\n                    console.error(\"throwing an error: \", err.message);\n                    throw err;\n                  }\n\n                  var _iteratorNormalCompletion = true;\n                  var _didIteratorError = false;\n                  var _iteratorError = undefined;\n\n                  try {\n                    for (var _iterator = providers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                      var peerInfo = _step.value;\n\n                      _this4.stub().emit('peer', peerInfo);\n                    }\n                  } catch (err) {\n                    _didIteratorError = true;\n                    _iteratorError = err;\n                  } finally {\n                    try {\n                      if (!_iteratorNormalCompletion && _iterator.return != null) {\n                        _iterator.return();\n                      }\n                    } finally {\n                      if (_didIteratorError) {\n                        throw _iteratorError;\n                      }\n                    }\n                  }\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _discoverContentPeers() {\n        return _discoverContentPeers2.apply(this, arguments);\n      }\n\n      return _discoverContentPeers;\n    }()\n  }, {\n    key: \"stop\",\n    value: function stop(callback) {\n      process.nextTick(callback);\n\n      if (this._timer) {\n        clearInterval(this._timer);\n        this._timer = null;\n      }\n    }\n  }]);\n\n  return RoutingDiscovery;\n}(EventEmitter);\n\nexports = module.exports = RoutingDiscovery;\nexports.tag = 'routing';","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _this = this;\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tupelo_1 = require(\"./tupelo\");\n/**\n * EcdsaKey defines the public/private key-pairs used to interact with Tupelo.\n * It also supportes generating new keys either randomly or through a passphrase.\n * @public\n */\n\n\nvar EcdsaKey =\n/*#__PURE__*/\nfunction () {\n  function EcdsaKey(publicKeyBits, privateKeyBits) {\n    _classCallCheck(this, EcdsaKey);\n\n    this.publicKey = publicKeyBits;\n    this.privateKey = privateKeyBits;\n  }\n\n  _createClass(EcdsaKey, [{\n    key: \"keyAddr\",\n    value: function keyAddr() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", tupelo_1.Tupelo.ecdsaPubkeyToDid(this.publicKey));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }]);\n\n  return EcdsaKey;\n}();\n/**\n * Generate a new keypair with random bits.\n * @public\n */\n\n\nEcdsaKey.generate = function () {\n  return __awaiter(_this, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var pair, key;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return tupelo_1.Tupelo.generateKey();\n\n          case 2:\n            pair = _context2.sent;\n            key = new EcdsaKey(pair[1], pair[0]);\n            return _context2.abrupt(\"return\", key);\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n};\n/**\n * Generate a new key based on a passphrase and salt (this goes through the Warp wallet treatment {@link https://keybase.io/warp/warp_1.0.9_SHA256_a2067491ab582bde779f4505055807c2479354633a2216b22cf1e92d1a6e4a87.html})\n */\n\n\nEcdsaKey.passPhraseKey = function (phrase, salt) {\n  return __awaiter(_this, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3() {\n    var pair;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return tupelo_1.Tupelo.passPhraseKey(phrase, salt);\n\n          case 2:\n            pair = _context3.sent;\n            return _context3.abrupt(\"return\", new EcdsaKey(pair[1], pair[0]));\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n};\n\nEcdsaKey.fromBytes = function (bytes) {\n  return __awaiter(_this, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4() {\n    var pair;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return tupelo_1.Tupelo.keyFromPrivateBytes(bytes);\n\n          case 2:\n            pair = _context4.sent;\n            return _context4.abrupt(\"return\", new EcdsaKey(pair[1], pair[0]));\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n};\n\nexports.EcdsaKey = EcdsaKey;","\"use strict\";\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__export(require(\"./chaintree\"));\n\n__export(require(\"./dag/dag\"));\n\nvar cids_1 = __importDefault(require(\"cids\"));\n/**\n//  * This is a helper const so that CID types can be used in other repos.\n//  * @public\n//  */\n\n\nexports.CID = cids_1.default;","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/tobowers/code/explorer/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _this2 = this;\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar dag_1 = require(\"./dag/dag\");\n\nvar cids_1 = __importDefault(require(\"cids\"));\n\nvar tupelo_1 = require(\"../tupelo\");\n\nvar transactions_pb_1 = require(\"tupelo-messages/transactions/transactions_pb\");\n\nvar dagCBOR = require('ipld-dag-cbor');\n/**\n * ChainTree is the main class used for interacting with the data of Tupelo.\n * See {@link https://docs.quorumcontrol.com/docs/chaintree.html} for a detailed description\n * of what a ChainTree is.\n * @public\n */\n\n\nvar ChainTree =\n/*#__PURE__*/\nfunction (_dag_1$Dag) {\n  _inherits(ChainTree, _dag_1$Dag);\n\n  /**\n   * Creates a new ChainTree\n   * @param opts - {@link IChainTreeInitializer}\n   * @public\n   */\n  function ChainTree(opts) {\n    var _this;\n\n    _classCallCheck(this, ChainTree);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ChainTree).call(this, opts.tip, opts.store));\n    _this.key = opts.key;\n    _this.store = opts.store;\n    return _this;\n  }\n  /**\n   * Returns the DID of the ChainTree\n   * @public\n   */\n\n\n  _createClass(ChainTree, [{\n    key: \"id\",\n    value: function id() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var resolveResp;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.resolve([\"id\"]);\n\n              case 2:\n                resolveResp = _context.sent;\n                return _context.abrupt(\"return\", resolveResp.value);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }]);\n\n  return ChainTree;\n}(dag_1.Dag);\n/**\n * Creates a new empty chaintree using the specified key and blockservice.\n * @param store - The {@link IBlockService} to store the new blocks in (Community exports a block service)\n * @param key - The {@link EcdsaKey} to use to name the ChainTree (this is used to create the DID)\n * @public\n */\n\n\nChainTree.newEmptyTree = function (store, key) {\n  return __awaiter(_this2, void 0, void 0,\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    var tip;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return tupelo_1.Tupelo.newEmptyTree(store, key.publicKey);\n\n          case 2:\n            tip = _context2.sent;\n            return _context2.abrupt(\"return\", new ChainTree({\n              key: key,\n              tip: tip,\n              store: store\n            }));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n};\n\nexports.ChainTree = ChainTree;\n\nvar setOwnershipPayload = function setOwnershipPayload(newOwnerKeys) {\n  var payload = new transactions_pb_1.SetOwnershipPayload();\n  payload.setAuthenticationList(newOwnerKeys);\n  return payload;\n};\n/**\n * returns a setOwnershipTransaction\n * @param newOwnerKeys - An array of the addresses of the new owners\n * @public\n */\n\n\nexports.setOwnershipTransaction = function (newOwnerKeys) {\n  var payload = setOwnershipPayload(newOwnerKeys);\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.SETOWNERSHIP);\n  txn.setSetOwnershipPayload(payload);\n  return txn;\n};\n\nvar setDataPayloadMaker = function setDataPayloadMaker(path, value) {\n  var cborData = dagCBOR.util.serialize(value);\n  var payload = new transactions_pb_1.SetDataPayload();\n  payload.setPath(path);\n  payload.setValue(cborData);\n  return payload;\n};\n/**\n * Returns a setDataTransaction\n * @param path - The path of the Tree to set\n * @param value - An object to set at the path (this will be CBOR encoded for you).\n * @public\n */\n\n\nexports.setDataTransaction = function (path, value) {\n  var payload = setDataPayloadMaker(path, value);\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.SETDATA);\n  txn.setSetDataPayload(payload);\n  return txn;\n};\n\nvar establishTokenPayload = function establishTokenPayload(name, maximum) {\n  var policy = new transactions_pb_1.TokenMonetaryPolicy();\n  policy.setMaximum(maximum);\n  var payload = new transactions_pb_1.EstablishTokenPayload();\n  payload.setName(name);\n  payload.setMonetaryPolicy(policy);\n  return payload;\n};\n/**\n * Returns a new establishTokenTransaction which is used to setup the monetary policy\n * of a new token on a ChainTree\n * @public\n */\n\n\nexports.establishTokenTransaction = function (name, maximum) {\n  var payload = establishTokenPayload(name, maximum);\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.ESTABLISHTOKEN);\n  txn.setEstablishTokenPayload(payload);\n  return txn;\n};\n\nvar mintTokenPayload = function mintTokenPayload(name, amount) {\n  var payload = new transactions_pb_1.MintTokenPayload();\n  payload.setName(name);\n  payload.setAmount(amount);\n  return payload;\n};\n/**\n * @public\n */\n\n\nexports.mintTokenTransaction = function (name, amount) {\n  var payload = mintTokenPayload(name, amount);\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.MINTTOKEN);\n  txn.setMintTokenPayload(payload);\n  return txn;\n};\n\nvar sendTokenPayload = function sendTokenPayload(sendId, name, amount, destinationChainId) {\n  var payload = new transactions_pb_1.SendTokenPayload();\n  payload.setId(sendId);\n  payload.setName(name);\n  payload.setAmount(amount);\n  payload.setDestination(destinationChainId);\n  return payload;\n};\n/**\n * @public\n */\n\n\nexports.sendTokenTransaction = function (sendId, name, amount, destinationChainId) {\n  var payload = sendTokenPayload(sendId, name, amount, destinationChainId);\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.SENDTOKEN);\n  txn.setSendTokenPayload(payload);\n  return txn;\n};\n\nvar receiveTokenPayload = function receiveTokenPayload(sendId, tip, signature, leaves) {\n  var payload = new transactions_pb_1.ReceiveTokenPayload();\n  payload.setSendTokenTransactionId(sendId);\n  payload.setTip(tip);\n  payload.setSignature(signature);\n  payload.setLeavesList(leaves);\n  return payload;\n};\n/**\n * @public\n */\n\n\nexports.receiveTokenTransaction = function (sendId, tip, signature, leaves) {\n  var payload = receiveTokenPayload(sendId, tip, signature, leaves);\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.RECEIVETOKEN);\n  txn.setReceiveTokenPayload(payload);\n  return txn;\n};\n/**\n * This function is useful if you have the full payload from the send token sent to you\n * no need to deconstruct and the reconstruct the payload. Often wallets will send this payload as base64.\n *\n * @param payload - The receive token payload\n * @public\n */\n\n\nexports.receiveTokenTransactionFromPayload = function (payload) {\n  var txn = new transactions_pb_1.Transaction();\n  txn.setType(transactions_pb_1.Transaction.Type.RECEIVETOKEN);\n  var tip = new cids_1.default(payload.getTip());\n  var sig = payload.getSignature();\n\n  if (sig === undefined) {\n    throw new Error(\"signature must be defined\");\n  }\n\n  var leaves = payload.getLeavesList_asU8();\n\n  if (leaves === undefined) {\n    throw new Error('leaves must be defined');\n  }\n\n  txn.setReceiveTokenPayload(receiveTokenPayload(payload.getTransactionId(), tip.buffer, sig, leaves));\n  return txn;\n};\n\nexports.default = ChainTree;"],"sourceRoot":""}